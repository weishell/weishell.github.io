<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>d3实例 | 2020</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="welcome">
    <link rel="preload" href="/assets/css/0.styles.28ab0d71.css" as="style"><link rel="preload" href="/assets/js/app.f10cc161.js" as="script"><link rel="preload" href="/assets/js/2.662cea8a.js" as="script"><link rel="preload" href="/assets/js/177.cd6927eb.js" as="script"><link rel="preload" href="/assets/js/7.19ce3b94.js" as="script"><link rel="prefetch" href="/assets/js/10.b3914c97.js"><link rel="prefetch" href="/assets/js/100.99cb0628.js"><link rel="prefetch" href="/assets/js/101.68fa77ef.js"><link rel="prefetch" href="/assets/js/102.5800d7a4.js"><link rel="prefetch" href="/assets/js/103.ae7f599b.js"><link rel="prefetch" href="/assets/js/104.0fc7e067.js"><link rel="prefetch" href="/assets/js/105.934a6f42.js"><link rel="prefetch" href="/assets/js/106.829be1c3.js"><link rel="prefetch" href="/assets/js/107.22d301dd.js"><link rel="prefetch" href="/assets/js/108.6c47825f.js"><link rel="prefetch" href="/assets/js/109.1708c574.js"><link rel="prefetch" href="/assets/js/11.592cdc2a.js"><link rel="prefetch" href="/assets/js/110.2d46d322.js"><link rel="prefetch" href="/assets/js/111.cbe5a6ff.js"><link rel="prefetch" href="/assets/js/112.33018694.js"><link rel="prefetch" href="/assets/js/113.72f375e4.js"><link rel="prefetch" href="/assets/js/114.e1790ed2.js"><link rel="prefetch" href="/assets/js/115.3a87601b.js"><link rel="prefetch" href="/assets/js/116.1828bb8e.js"><link rel="prefetch" href="/assets/js/117.03b3f00e.js"><link rel="prefetch" href="/assets/js/118.8a4f6bdb.js"><link rel="prefetch" href="/assets/js/119.0f299958.js"><link rel="prefetch" href="/assets/js/12.b09bec9b.js"><link rel="prefetch" href="/assets/js/120.229a7239.js"><link rel="prefetch" href="/assets/js/121.0856b178.js"><link rel="prefetch" href="/assets/js/122.03092019.js"><link rel="prefetch" href="/assets/js/123.e0e4b129.js"><link rel="prefetch" href="/assets/js/124.f8a42db0.js"><link rel="prefetch" href="/assets/js/125.0862aea1.js"><link rel="prefetch" href="/assets/js/126.52f3119c.js"><link rel="prefetch" href="/assets/js/127.8c373660.js"><link rel="prefetch" href="/assets/js/128.090f0911.js"><link rel="prefetch" href="/assets/js/129.92f976d2.js"><link rel="prefetch" href="/assets/js/13.4331f76c.js"><link rel="prefetch" href="/assets/js/130.c9eca58e.js"><link rel="prefetch" href="/assets/js/131.b2242566.js"><link rel="prefetch" href="/assets/js/132.50a07acf.js"><link rel="prefetch" href="/assets/js/133.c3db34e6.js"><link rel="prefetch" href="/assets/js/134.8050ce59.js"><link rel="prefetch" href="/assets/js/135.10f4306e.js"><link rel="prefetch" href="/assets/js/136.d5386c97.js"><link rel="prefetch" href="/assets/js/137.db2d2aa8.js"><link rel="prefetch" href="/assets/js/138.dd8bfd91.js"><link rel="prefetch" href="/assets/js/139.63e56709.js"><link rel="prefetch" href="/assets/js/14.6fe0fd32.js"><link rel="prefetch" href="/assets/js/140.a7a847dd.js"><link rel="prefetch" href="/assets/js/141.9ba5b43c.js"><link rel="prefetch" href="/assets/js/142.d4265c8b.js"><link rel="prefetch" href="/assets/js/143.6b07b303.js"><link rel="prefetch" href="/assets/js/144.373055cf.js"><link rel="prefetch" href="/assets/js/145.51191dea.js"><link rel="prefetch" href="/assets/js/146.350dd4bd.js"><link rel="prefetch" href="/assets/js/147.2e9c6932.js"><link rel="prefetch" href="/assets/js/148.cd070aa3.js"><link rel="prefetch" href="/assets/js/149.d7fe566a.js"><link rel="prefetch" href="/assets/js/15.e115745c.js"><link rel="prefetch" href="/assets/js/150.b2c64e74.js"><link rel="prefetch" href="/assets/js/151.9ace5a55.js"><link rel="prefetch" href="/assets/js/152.78645782.js"><link rel="prefetch" href="/assets/js/153.5f7e1899.js"><link rel="prefetch" href="/assets/js/154.c1083a19.js"><link rel="prefetch" href="/assets/js/155.ea26da96.js"><link rel="prefetch" href="/assets/js/156.fcfb445e.js"><link rel="prefetch" href="/assets/js/157.b022c471.js"><link rel="prefetch" href="/assets/js/158.ba0860d6.js"><link rel="prefetch" href="/assets/js/159.ceec9149.js"><link rel="prefetch" href="/assets/js/16.021dce40.js"><link rel="prefetch" href="/assets/js/160.83984515.js"><link rel="prefetch" href="/assets/js/161.0be0f141.js"><link rel="prefetch" href="/assets/js/162.7c66380d.js"><link rel="prefetch" href="/assets/js/163.186e30ff.js"><link rel="prefetch" href="/assets/js/164.be1ab2e5.js"><link rel="prefetch" href="/assets/js/165.0892e7e4.js"><link rel="prefetch" href="/assets/js/166.082ff4c9.js"><link rel="prefetch" href="/assets/js/167.3402eab3.js"><link rel="prefetch" href="/assets/js/168.8fd5d90c.js"><link rel="prefetch" href="/assets/js/169.90d2a87c.js"><link rel="prefetch" href="/assets/js/17.e5241267.js"><link rel="prefetch" href="/assets/js/170.db9f599d.js"><link rel="prefetch" href="/assets/js/171.509cd545.js"><link rel="prefetch" href="/assets/js/172.331a87a4.js"><link rel="prefetch" href="/assets/js/173.b4a72733.js"><link rel="prefetch" href="/assets/js/174.4d03f546.js"><link rel="prefetch" href="/assets/js/175.8d9a9381.js"><link rel="prefetch" href="/assets/js/176.cae80760.js"><link rel="prefetch" href="/assets/js/178.b054be6f.js"><link rel="prefetch" href="/assets/js/179.593166a8.js"><link rel="prefetch" href="/assets/js/18.61342dc9.js"><link rel="prefetch" href="/assets/js/180.18d03076.js"><link rel="prefetch" href="/assets/js/181.e9f8e254.js"><link rel="prefetch" href="/assets/js/182.6f9481f8.js"><link rel="prefetch" href="/assets/js/183.0ba4f781.js"><link rel="prefetch" href="/assets/js/184.9ada5c38.js"><link rel="prefetch" href="/assets/js/185.0489d2bf.js"><link rel="prefetch" href="/assets/js/186.d2f3b526.js"><link rel="prefetch" href="/assets/js/187.0fb5b1a0.js"><link rel="prefetch" href="/assets/js/188.05f5d75e.js"><link rel="prefetch" href="/assets/js/189.f0742179.js"><link rel="prefetch" href="/assets/js/19.326ce65c.js"><link rel="prefetch" href="/assets/js/190.40fb93b3.js"><link rel="prefetch" href="/assets/js/191.143b4e88.js"><link rel="prefetch" href="/assets/js/192.b2996950.js"><link rel="prefetch" href="/assets/js/193.ffb9c1ca.js"><link rel="prefetch" href="/assets/js/194.9fa738a8.js"><link rel="prefetch" href="/assets/js/195.22d7313c.js"><link rel="prefetch" href="/assets/js/196.3898fcf6.js"><link rel="prefetch" href="/assets/js/197.2abd874d.js"><link rel="prefetch" href="/assets/js/198.ea48e779.js"><link rel="prefetch" href="/assets/js/199.85b93fd3.js"><link rel="prefetch" href="/assets/js/20.122d58cd.js"><link rel="prefetch" href="/assets/js/200.4a02c7b5.js"><link rel="prefetch" href="/assets/js/201.beac1e4b.js"><link rel="prefetch" href="/assets/js/202.15f8933b.js"><link rel="prefetch" href="/assets/js/203.c478e5ae.js"><link rel="prefetch" href="/assets/js/204.655752bb.js"><link rel="prefetch" href="/assets/js/205.d54be11f.js"><link rel="prefetch" href="/assets/js/206.143c2996.js"><link rel="prefetch" href="/assets/js/207.9924a494.js"><link rel="prefetch" href="/assets/js/208.26731fc2.js"><link rel="prefetch" href="/assets/js/209.7a232003.js"><link rel="prefetch" href="/assets/js/21.8c6d77e6.js"><link rel="prefetch" href="/assets/js/210.f672d383.js"><link rel="prefetch" href="/assets/js/211.0fdba82a.js"><link rel="prefetch" href="/assets/js/212.81b1f67d.js"><link rel="prefetch" href="/assets/js/213.d7e93bc1.js"><link rel="prefetch" href="/assets/js/214.12b1428c.js"><link rel="prefetch" href="/assets/js/215.28be339c.js"><link rel="prefetch" href="/assets/js/216.f19e5a3b.js"><link rel="prefetch" href="/assets/js/217.0111ad17.js"><link rel="prefetch" href="/assets/js/218.ab63af3e.js"><link rel="prefetch" href="/assets/js/219.9db2adc6.js"><link rel="prefetch" href="/assets/js/22.4111a1d4.js"><link rel="prefetch" href="/assets/js/220.9ad16e45.js"><link rel="prefetch" href="/assets/js/221.ec96ca19.js"><link rel="prefetch" href="/assets/js/222.a586d25a.js"><link rel="prefetch" href="/assets/js/223.2cd969cc.js"><link rel="prefetch" href="/assets/js/224.588396c4.js"><link rel="prefetch" href="/assets/js/225.ae484b21.js"><link rel="prefetch" href="/assets/js/226.50be263b.js"><link rel="prefetch" href="/assets/js/227.2e88865e.js"><link rel="prefetch" href="/assets/js/228.4bfd6de2.js"><link rel="prefetch" href="/assets/js/229.66e4eba0.js"><link rel="prefetch" href="/assets/js/23.959a5c07.js"><link rel="prefetch" href="/assets/js/230.bcf3ad4d.js"><link rel="prefetch" href="/assets/js/231.c6ed4b3d.js"><link rel="prefetch" href="/assets/js/232.dac7a055.js"><link rel="prefetch" href="/assets/js/233.6f12faa7.js"><link rel="prefetch" href="/assets/js/234.3747a100.js"><link rel="prefetch" href="/assets/js/235.d7c6009b.js"><link rel="prefetch" href="/assets/js/236.ac02f2af.js"><link rel="prefetch" href="/assets/js/237.f5d65067.js"><link rel="prefetch" href="/assets/js/238.bbcf60bd.js"><link rel="prefetch" href="/assets/js/239.a82524a1.js"><link rel="prefetch" href="/assets/js/24.1c081f52.js"><link rel="prefetch" href="/assets/js/240.8c324eef.js"><link rel="prefetch" href="/assets/js/241.fbeba9c6.js"><link rel="prefetch" href="/assets/js/242.29f5d081.js"><link rel="prefetch" href="/assets/js/243.8cd86df8.js"><link rel="prefetch" href="/assets/js/244.8b4c90d3.js"><link rel="prefetch" href="/assets/js/245.f93b7bcc.js"><link rel="prefetch" href="/assets/js/246.8d8d1088.js"><link rel="prefetch" href="/assets/js/247.48408170.js"><link rel="prefetch" href="/assets/js/248.721dd48c.js"><link rel="prefetch" href="/assets/js/249.0e0b6649.js"><link rel="prefetch" href="/assets/js/25.4be7b411.js"><link rel="prefetch" href="/assets/js/250.0d5147d0.js"><link rel="prefetch" href="/assets/js/251.3e74a304.js"><link rel="prefetch" href="/assets/js/252.285a8247.js"><link rel="prefetch" href="/assets/js/253.93f995cd.js"><link rel="prefetch" href="/assets/js/254.3e448ce6.js"><link rel="prefetch" href="/assets/js/255.8b2cb86f.js"><link rel="prefetch" href="/assets/js/256.bfd50591.js"><link rel="prefetch" href="/assets/js/257.eaa847c7.js"><link rel="prefetch" href="/assets/js/258.0bcacf47.js"><link rel="prefetch" href="/assets/js/259.e5a62ca8.js"><link rel="prefetch" href="/assets/js/26.0a64d072.js"><link rel="prefetch" href="/assets/js/260.1a026664.js"><link rel="prefetch" href="/assets/js/261.e05f8d18.js"><link rel="prefetch" href="/assets/js/262.d3e4b59f.js"><link rel="prefetch" href="/assets/js/263.70a5a849.js"><link rel="prefetch" href="/assets/js/264.47f3028d.js"><link rel="prefetch" href="/assets/js/265.b2a5747b.js"><link rel="prefetch" href="/assets/js/266.ad05b58e.js"><link rel="prefetch" href="/assets/js/267.87711581.js"><link rel="prefetch" href="/assets/js/268.05a4e1dc.js"><link rel="prefetch" href="/assets/js/269.0e266d36.js"><link rel="prefetch" href="/assets/js/27.1c8286aa.js"><link rel="prefetch" href="/assets/js/270.fa8efbb9.js"><link rel="prefetch" href="/assets/js/271.2b3c64b1.js"><link rel="prefetch" href="/assets/js/272.1e853082.js"><link rel="prefetch" href="/assets/js/273.c8cf7d77.js"><link rel="prefetch" href="/assets/js/274.e7cc18c0.js"><link rel="prefetch" href="/assets/js/275.640915e4.js"><link rel="prefetch" href="/assets/js/276.27717f5a.js"><link rel="prefetch" href="/assets/js/277.e6473d0e.js"><link rel="prefetch" href="/assets/js/278.105068f1.js"><link rel="prefetch" href="/assets/js/279.f7f2b094.js"><link rel="prefetch" href="/assets/js/28.6212f1f0.js"><link rel="prefetch" href="/assets/js/280.ef5413d6.js"><link rel="prefetch" href="/assets/js/281.eb901b92.js"><link rel="prefetch" href="/assets/js/282.7d17da2b.js"><link rel="prefetch" href="/assets/js/283.e2c53978.js"><link rel="prefetch" href="/assets/js/284.04abe618.js"><link rel="prefetch" href="/assets/js/285.7c790e3f.js"><link rel="prefetch" href="/assets/js/286.8119de09.js"><link rel="prefetch" href="/assets/js/287.02a1ec8a.js"><link rel="prefetch" href="/assets/js/288.3a91f551.js"><link rel="prefetch" href="/assets/js/289.a2f8456d.js"><link rel="prefetch" href="/assets/js/29.6e9be50c.js"><link rel="prefetch" href="/assets/js/290.7b0a0655.js"><link rel="prefetch" href="/assets/js/291.9cc4f1ba.js"><link rel="prefetch" href="/assets/js/292.e5281383.js"><link rel="prefetch" href="/assets/js/293.8d4c7718.js"><link rel="prefetch" href="/assets/js/294.32070d19.js"><link rel="prefetch" href="/assets/js/295.fc8e4c37.js"><link rel="prefetch" href="/assets/js/296.5cfd443e.js"><link rel="prefetch" href="/assets/js/297.9200e133.js"><link rel="prefetch" href="/assets/js/298.4d467f02.js"><link rel="prefetch" href="/assets/js/299.1dce0b23.js"><link rel="prefetch" href="/assets/js/3.090bc0dc.js"><link rel="prefetch" href="/assets/js/30.3959925e.js"><link rel="prefetch" href="/assets/js/300.b738f222.js"><link rel="prefetch" href="/assets/js/301.b3c2bdf3.js"><link rel="prefetch" href="/assets/js/302.d36a7925.js"><link rel="prefetch" href="/assets/js/303.152bfeef.js"><link rel="prefetch" href="/assets/js/304.cf893f59.js"><link rel="prefetch" href="/assets/js/305.e6a01f04.js"><link rel="prefetch" href="/assets/js/306.59cb802a.js"><link rel="prefetch" href="/assets/js/307.1c3a856d.js"><link rel="prefetch" href="/assets/js/308.6db0b68b.js"><link rel="prefetch" href="/assets/js/309.d332eccf.js"><link rel="prefetch" href="/assets/js/31.f3ebfc79.js"><link rel="prefetch" href="/assets/js/310.ef0b67e3.js"><link rel="prefetch" href="/assets/js/311.27d4ba92.js"><link rel="prefetch" href="/assets/js/312.f2d7c560.js"><link rel="prefetch" href="/assets/js/313.d453d8bd.js"><link rel="prefetch" href="/assets/js/314.88a8ffc0.js"><link rel="prefetch" href="/assets/js/315.323bde7a.js"><link rel="prefetch" href="/assets/js/316.e2588571.js"><link rel="prefetch" href="/assets/js/317.c72ceb5d.js"><link rel="prefetch" href="/assets/js/318.1aa5129d.js"><link rel="prefetch" href="/assets/js/319.53e740c8.js"><link rel="prefetch" href="/assets/js/32.f6989ef6.js"><link rel="prefetch" href="/assets/js/320.d06e0f1f.js"><link rel="prefetch" href="/assets/js/321.05d09440.js"><link rel="prefetch" href="/assets/js/322.070ef973.js"><link rel="prefetch" href="/assets/js/323.c4cb4c87.js"><link rel="prefetch" href="/assets/js/324.ce582ee4.js"><link rel="prefetch" href="/assets/js/325.cb786cf2.js"><link rel="prefetch" href="/assets/js/326.cb049404.js"><link rel="prefetch" href="/assets/js/327.80dbee1a.js"><link rel="prefetch" href="/assets/js/328.656ad288.js"><link rel="prefetch" href="/assets/js/329.c8de6e38.js"><link rel="prefetch" href="/assets/js/33.4600bd4e.js"><link rel="prefetch" href="/assets/js/330.1e328794.js"><link rel="prefetch" href="/assets/js/331.873ab169.js"><link rel="prefetch" href="/assets/js/332.6a582949.js"><link rel="prefetch" href="/assets/js/333.a4b22244.js"><link rel="prefetch" href="/assets/js/334.836dc5ac.js"><link rel="prefetch" href="/assets/js/335.c7634c05.js"><link rel="prefetch" href="/assets/js/336.5f5ad5cf.js"><link rel="prefetch" href="/assets/js/337.9556679e.js"><link rel="prefetch" href="/assets/js/338.a5a9f749.js"><link rel="prefetch" href="/assets/js/339.1cc9dee0.js"><link rel="prefetch" href="/assets/js/34.42ba791b.js"><link rel="prefetch" href="/assets/js/340.ee8a8769.js"><link rel="prefetch" href="/assets/js/341.388a655f.js"><link rel="prefetch" href="/assets/js/342.99a34d71.js"><link rel="prefetch" href="/assets/js/343.ff22c178.js"><link rel="prefetch" href="/assets/js/344.bce75d89.js"><link rel="prefetch" href="/assets/js/345.950ab84e.js"><link rel="prefetch" href="/assets/js/35.56cf79cb.js"><link rel="prefetch" href="/assets/js/36.336b9e19.js"><link rel="prefetch" href="/assets/js/37.d8fe0bc6.js"><link rel="prefetch" href="/assets/js/38.6be5bf71.js"><link rel="prefetch" href="/assets/js/39.b00bc18a.js"><link rel="prefetch" href="/assets/js/4.7fb4aca6.js"><link rel="prefetch" href="/assets/js/40.28f86cb8.js"><link rel="prefetch" href="/assets/js/41.eafc0abf.js"><link rel="prefetch" href="/assets/js/42.8cdbe081.js"><link rel="prefetch" href="/assets/js/43.27ce7008.js"><link rel="prefetch" href="/assets/js/44.7ac46ae6.js"><link rel="prefetch" href="/assets/js/45.db8a7a45.js"><link rel="prefetch" href="/assets/js/46.ed1080ce.js"><link rel="prefetch" href="/assets/js/47.c30696bf.js"><link rel="prefetch" href="/assets/js/48.d8abb210.js"><link rel="prefetch" href="/assets/js/49.917d9dca.js"><link rel="prefetch" href="/assets/js/5.f6b43c82.js"><link rel="prefetch" href="/assets/js/50.87e8beab.js"><link rel="prefetch" href="/assets/js/51.dfdd1812.js"><link rel="prefetch" href="/assets/js/52.6e9b186b.js"><link rel="prefetch" href="/assets/js/53.1bd07572.js"><link rel="prefetch" href="/assets/js/54.60d16065.js"><link rel="prefetch" href="/assets/js/55.76987a45.js"><link rel="prefetch" href="/assets/js/56.6f118fa4.js"><link rel="prefetch" href="/assets/js/57.cc028990.js"><link rel="prefetch" href="/assets/js/58.1cd103e7.js"><link rel="prefetch" href="/assets/js/59.0e22fb59.js"><link rel="prefetch" href="/assets/js/6.4e2330ba.js"><link rel="prefetch" href="/assets/js/60.92d0086e.js"><link rel="prefetch" href="/assets/js/61.aa06b5b7.js"><link rel="prefetch" href="/assets/js/62.53fc815e.js"><link rel="prefetch" href="/assets/js/63.ab687a0e.js"><link rel="prefetch" href="/assets/js/64.ad384a4f.js"><link rel="prefetch" href="/assets/js/65.914f0e87.js"><link rel="prefetch" href="/assets/js/66.c31a585c.js"><link rel="prefetch" href="/assets/js/67.2918f95e.js"><link rel="prefetch" href="/assets/js/68.9664b6dc.js"><link rel="prefetch" href="/assets/js/69.53b4ba6f.js"><link rel="prefetch" href="/assets/js/70.0adac07e.js"><link rel="prefetch" href="/assets/js/71.739234dc.js"><link rel="prefetch" href="/assets/js/72.fdde463e.js"><link rel="prefetch" href="/assets/js/73.413f1251.js"><link rel="prefetch" href="/assets/js/74.40072543.js"><link rel="prefetch" href="/assets/js/75.a42f2761.js"><link rel="prefetch" href="/assets/js/76.b55f7cab.js"><link rel="prefetch" href="/assets/js/77.bb0b809b.js"><link rel="prefetch" href="/assets/js/78.5f930aa9.js"><link rel="prefetch" href="/assets/js/79.c0673899.js"><link rel="prefetch" href="/assets/js/8.65b15a40.js"><link rel="prefetch" href="/assets/js/80.a4f58997.js"><link rel="prefetch" href="/assets/js/81.d924cdbc.js"><link rel="prefetch" href="/assets/js/82.70a5b632.js"><link rel="prefetch" href="/assets/js/83.2a28be3b.js"><link rel="prefetch" href="/assets/js/84.9825382e.js"><link rel="prefetch" href="/assets/js/85.c55ad33f.js"><link rel="prefetch" href="/assets/js/86.5673ee09.js"><link rel="prefetch" href="/assets/js/87.f7484d69.js"><link rel="prefetch" href="/assets/js/88.b2d57e5f.js"><link rel="prefetch" href="/assets/js/89.a6e72573.js"><link rel="prefetch" href="/assets/js/9.b8a27660.js"><link rel="prefetch" href="/assets/js/90.afccc5bf.js"><link rel="prefetch" href="/assets/js/91.9f6a195e.js"><link rel="prefetch" href="/assets/js/92.5999c7c2.js"><link rel="prefetch" href="/assets/js/93.15d1115c.js"><link rel="prefetch" href="/assets/js/94.cf1ae684.js"><link rel="prefetch" href="/assets/js/95.6f7a755d.js"><link rel="prefetch" href="/assets/js/96.6af6316e.js"><link rel="prefetch" href="/assets/js/97.31c41336.js"><link rel="prefetch" href="/assets/js/98.b3e7948e.js"><link rel="prefetch" href="/assets/js/99.f44722b7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.28ab0d71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">2020</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link router-link-active">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/fronttest/" class="nav-link">
  fronttest
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link router-link-active">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/fronttest/" class="nav-link">
  fronttest
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/jsstore/" aria-current="page" class="sidebar-link"> js库</a></li><li><a href="/jsstore/001D3.html" class="sidebar-link"> D3</a></li><li><a href="/jsstore/001aD3API.html" class="sidebar-link">d3jsapi1</a></li><li><a href="/jsstore/001bD3API.html" class="sidebar-link">d3jsapi2</a></li><li><a href="/jsstore/001eg1.html" aria-current="page" class="active sidebar-link">d3实例1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#d3实例" class="sidebar-link">d3实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#环形图实例" class="sidebar-link">环形图实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#柱状图实例" class="sidebar-link">柱状图实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#字节跳动实例" class="sidebar-link">字节跳动实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#曲线图实例" class="sidebar-link">曲线图实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#完成率实例" class="sidebar-link">完成率实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#散点图实例" class="sidebar-link">散点图实例</a></li><li class="sidebar-sub-header"><a href="/jsstore/001eg1.html#美国地图实例" class="sidebar-link">美国地图实例</a></li></ul></li></ul></li><li><a href="/jsstore/001eg2.html" class="sidebar-link">d3实例2</a></li><li><a href="/jsstore/001eg3.html" class="sidebar-link">d3实例3</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="d3实例"><a href="#d3实例" class="header-anchor">#</a> d3实例</h2> <table><thead><tr><th>api</th> <th>作用</th> <th>例子</th></tr></thead> <tbody><tr><td>d3.arc()</td> <td>生成一个弧。 您需要为弧设置内半径和外半径。 如果内半径为0，则结果将为饼图，否则结果将为圆环图</td> <td>d3.arc().outerRadius(radius - 10).innerRadius(0)</td></tr> <tr><td>d3.pie()</td> <td>生成饼图。 它从数据集中获取数据并计算饼图的每个楔形的起始角度和结束角度。</td> <td>-</td></tr></tbody></table> <h3 id="环形图实例"><a href="#环形图实例" class="header-anchor">#</a> 环形图实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
		<span class="token selector">div</span> <span class="token punctuation">{</span>
			<span class="token property">background</span><span class="token punctuation">:</span> #F2F4FF<span class="token punctuation">;</span>
			<span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
			<span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
			<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
			<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
			<span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
			<span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
			<span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
		<span class="token comment">// 数据准备</span>
		<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'下下等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">5</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'下等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">10</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'哈等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">10</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'和等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">10</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'中低等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">38</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'高等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">98</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'哟等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">11</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'中上等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">60</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'中等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">50</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			label<span class="token operator">:</span> <span class="token string">'上等'</span><span class="token punctuation">,</span>
			num<span class="token operator">:</span> <span class="token number">80</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> marge <span class="token operator">=</span> <span class="token punctuation">{</span>
			top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
			right<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
			bottom<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
			left<span class="token operator">:</span> <span class="token number">0</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> width <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
			height <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
		<span class="token comment">// 弧形生成器内、外半径</span>
		<span class="token keyword">let</span> innerRadius <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			outerRadius <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token string">'translate('</span> <span class="token operator">+</span> marge<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> marge<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 颜色比例尺</span>
		<span class="token keyword">let</span> colorScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>schemeCategory10<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 创建饼状图</span>
		<span class="token keyword">let</span> pie <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> d<span class="token punctuation">.</span>num
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 创建弧形生成器</span>
		<span class="token keyword">let</span> arc <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>outerRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> arc2 <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>outerRadius <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 饼状图生成器转换数据</span>
		<span class="token keyword">let</span> pieData <span class="token operator">=</span> <span class="token function">pie</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 开始绘制，先为每个扇形及其对应的文字建立一个分组&lt;g&gt;</span>
		<span class="token keyword">let</span> arcs <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.g'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'cursor'</span><span class="token punctuation">,</span> <span class="token string">'pointer'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token string">'translate('</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 绘制饼状图的各个扇形</span>
		arcs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
			<span class="token comment">//.each(d3.easeBounceInOut)</span>
			<span class="token punctuation">.</span><span class="token function">attrTween</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">let</span> interpolate <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>startAngle<span class="token punctuation">,</span> d<span class="token punctuation">.</span>endAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					d<span class="token punctuation">.</span>endAngle <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token function">arc</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				d<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token function">colorScale</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> d<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 绘制饼状图上的文字信息</span>
		arcs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token string">'translate('</span> <span class="token operator">+</span> arc<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// 文字不超过扇形能容纳的长度才将其显示</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getStrLen</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>label<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>outerRadius <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>endAngle <span class="token operator">-</span> d<span class="token punctuation">.</span>startAngle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>endAngle <span class="token operator">-</span> d<span class="token punctuation">.</span>startAngle<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">6.283185307179586</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 图注个数</span>
		<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> before <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token comment">// 图注文字</span>
		<span class="token keyword">let</span> text <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.text&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span> <span class="token comment">//返回是pie(data0)</span>
			<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//根据文字在是左边还是右边，在右边文字是start，文字默认都是start。</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span>startAngle <span class="token operator">+</span> d<span class="token punctuation">.</span>endAngle<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">?</span> <span class="token string">'start'</span> <span class="token operator">:</span> <span class="token string">'end'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> pos <span class="token operator">=</span> arc<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//centroid(d)计算弧中心</span>
				pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> outerRadius <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>startAngle <span class="token operator">+</span> d<span class="token punctuation">.</span>endAngle<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">?</span> <span class="token number">1.4</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">overRange</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>before <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> before <span class="token operator">=</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token punctuation">(</span><span class="token number">2.1</span> <span class="token operator">+</span> count <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将文字移动到外面去。</span>
					<span class="token comment">// 超出将count（图注数量）自加</span>
					count<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> count <span class="token operator">=</span> before <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					count <span class="token operator">=</span> before <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token string">'translate('</span> <span class="token operator">+</span> pos <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;dy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.3em&quot;</span><span class="token punctuation">)</span> <span class="token comment">//将文字向下平移.3em</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//设置文本</span>
				<span class="token comment">// 如果文本长度超过扇形长度，则才显示图注</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">overRange</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>endAngle <span class="token operator">-</span> d<span class="token punctuation">.</span>startAngle<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">6.283185307179586</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 重置</span>
		<span class="token comment">// 图注连线</span>
		<span class="token keyword">let</span> line <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.line&quot;</span><span class="token punctuation">)</span> <span class="token comment">//添加文字和弧之间的连线</span>
			<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span> <span class="token comment">//返回是pie(data0)</span>
			<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;polyline&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'points'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> pos1 <span class="token operator">=</span> arc<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span>
					pos2 <span class="token operator">=</span> arc<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span>
					pos3 <span class="token operator">=</span> arc<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 如果文本长度超过扇形长度，则才显示图注</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">overRange</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					pos1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token number">0</span><span class="token punctuation">,</span> pos1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					pos2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token punctuation">(</span><span class="token number">2.1</span> <span class="token operator">+</span> count <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token punctuation">(</span><span class="token number">2.1</span> <span class="token operator">+</span> count <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					pos3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> outerRadius <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>startAngle <span class="token operator">+</span> d<span class="token punctuation">.</span>endAngle<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">?</span> <span class="token number">1.4</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					pos3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*=</span> <span class="token punctuation">(</span><span class="token number">2.1</span> <span class="token operator">+</span> count <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					count<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						before <span class="token operator">=</span> pos2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token comment">//pos2是从圆弧出来到长直虚线的长度，pos3就是将pos2平移后得到的位置</span>
					<span class="token comment">//三点链接在一起就成了线段。</span>
					<span class="token keyword">return</span> <span class="token punctuation">[</span>pos1<span class="token punctuation">,</span> pos2<span class="token punctuation">,</span> pos3<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					before <span class="token operator">=</span> pos2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'stroke'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> d<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'stroke-width'</span><span class="token punctuation">,</span> <span class="token string">&quot;3px&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'stroke-dasharray'</span><span class="token punctuation">,</span> <span class="token string">&quot;5px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">let</span> label <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.label'</span><span class="token punctuation">)</span> <span class="token comment">//添加右上角的标签</span>
			<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> outerRadius <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		label<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span> <span class="token comment">//标签中的矩形</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">colorScale</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> outerRadius<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'rx'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token comment">//rx=ry 会出现圆角</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'ry'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		label<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span> <span class="token comment">//标签中的文字</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token number">65</span><span class="token punctuation">;</span> <span class="token comment">//因为rect宽度是50，所以把文字偏移15,在后面再将文字设置居中</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> outerRadius<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">15</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token string">&quot;font-size&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10px&quot;</span><span class="token punctuation">,</span>
				<span class="token string">&quot;text-anchor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;middle&quot;</span><span class="token punctuation">,</span>
				<span class="token string">'fill'</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
				<span class="token string">&quot;font-weight&quot;</span><span class="token operator">:</span> <span class="token number">600</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



		<span class="token comment">// 文字是否超出扇形区域(超出返回true，不超出返回false)</span>
		<span class="token keyword">function</span> <span class="token function">overRange</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 扇形长度（不是弧长，是从扇形左边的中间位置引出的一条水平线与右边相交的直线长度）</span>
			<span class="token comment">// 计算公式：扇形半径/2 * sin(弧度)</span>
			<span class="token keyword">let</span> length <span class="token operator">=</span> <span class="token punctuation">(</span>outerRadius <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>endAngle <span class="token operator">-</span> d<span class="token punctuation">.</span>startAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 字符串长度</span>
			<span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token function">getStrLen</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;=</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 悬浮提示框</span>
		<span class="token keyword">let</span> tooltip <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		arcs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> label<span class="token punctuation">;</span>
			d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				label <span class="token operator">=</span> d<span class="token punctuation">.</span>data<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">arc2</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 悬浮在直方图上时，显示提示框</span>
			tooltip<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span> d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>pageY <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		arcs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">arc</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 隐藏悬浮框</span>
			tooltip<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 获取字符串所占像素</span>
		<span class="token keyword">function</span> <span class="token function">getStrLen</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> val<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> length <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> length <span class="token operator">&lt;=</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					len <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					len <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> len <span class="token operator">*</span> <span class="token number">7.1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="/beifen/067.jpg"> <h3 id="柱状图实例"><a href="#柱状图实例" class="header-anchor">#</a> 柱状图实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
		
		<span class="token selector">body</span> <span class="token punctuation">{</span>
		  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Open Sans'</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">div#layout</span> <span class="token punctuation">{</span>
		  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">div#container</span> <span class="token punctuation">{</span>
		  <span class="token property">width</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>
		  <span class="token property">height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
		  <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
		  <span class="token property">background-color</span><span class="token punctuation">:</span> #2F4A6D<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">svg</span> <span class="token punctuation">{</span>
		  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">.bar</span> <span class="token punctuation">{</span>
		  <span class="token property">fill</span><span class="token punctuation">:</span> #80cbc4<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
		  <span class="token property">fill</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">path</span> <span class="token punctuation">{</span>
		  <span class="token property">stroke</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">line</span> <span class="token punctuation">{</span>
		  <span class="token property">stroke</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">line#limit</span> <span class="token punctuation">{</span>
		  <span class="token property">stroke</span><span class="token punctuation">:</span> #FED966<span class="token punctuation">;</span>
		  <span class="token property">stroke-width</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
		  <span class="token property">stroke-dasharray</span><span class="token punctuation">:</span> 3 6<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">.grid path</span> <span class="token punctuation">{</span>
		  <span class="token property">stroke-width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">.grid .tick line</span> <span class="token punctuation">{</span>
		  <span class="token property">stroke</span><span class="token punctuation">:</span> #9FAAAE<span class="token punctuation">;</span>
		  <span class="token property">stroke-opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text.divergence</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
		  <span class="token property">fill</span><span class="token punctuation">:</span> #2F4A6D<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text.value</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text.title</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
		  <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text.label</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
		  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token selector">text.source</span> <span class="token punctuation">{</span>
		  <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>layout<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- &lt;h2&gt;Bar chart example&lt;/h2&gt; --&gt;</span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>container<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token punctuation">/&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">const</span> sample <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Rust'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">78.9</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#000000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Kotlin'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">75.1</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#00a2ee'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Python'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">68.0</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#fbcb39'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">67.0</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#007bc8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Go'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">65.6</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#65cedb'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Swift'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">65.1</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#ff6e52'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">61.9</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#f9de3f'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'C#'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">60.4</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#5d2f8e'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'F#'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">59.6</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#008fc9'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      language<span class="token operator">:</span> <span class="token string">'Clojure'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">59.6</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'#507dca'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> svgContainer <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> margin <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> margin<span class="token punctuation">;</span>
<span class="token keyword">const</span> height <span class="token operator">=</span> <span class="token number">600</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> margin<span class="token punctuation">;</span>

<span class="token keyword">const</span> chart <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleBand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span>sample<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> yScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">makeYLines</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> d3<span class="token punctuation">.</span><span class="token function">axisLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>yScale<span class="token punctuation">)</span>

chart<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

chart<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>yScale<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

chart<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'grid'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">makeYLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">tickSize</span><span class="token punctuation">(</span><span class="token operator">-</span>width<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">tickFormat</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
     <span class="token punctuation">)</span>

<span class="token keyword">const</span> barGroups <span class="token operator">=</span> chart<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>sample<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>

barGroups
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">yScale</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> height <span class="token operator">-</span> <span class="token function">yScale</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> xScale<span class="token punctuation">.</span><span class="token function">bandwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">actual<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.value'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

      d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>language<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> xScale<span class="token punctuation">.</span><span class="token function">bandwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>

      <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">yScale</span><span class="token punctuation">(</span>actual<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

            line <span class="token operator">=</span> chart<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'limit'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x1'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y1'</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x2'</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y2'</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
  
      barGroups<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'divergence'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>language<span class="token punctuation">)</span> <span class="token operator">+</span> xScale<span class="token punctuation">.</span><span class="token function">bandwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">yScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> divergence <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>value <span class="token operator">-</span> actual<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            
            <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">''</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>divergence <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> text <span class="token operator">+=</span> <span class="token string">'+'</span>
            text <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>divergence<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span>

            <span class="token keyword">return</span> idx <span class="token operator">!==</span> i <span class="token operator">?</span> text <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.value'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> xScale<span class="token punctuation">.</span><span class="token function">bandwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      
      chart<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'#limit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      chart<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.divergence'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>

barGroups 
      <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>language<span class="token punctuation">)</span> <span class="token operator">+</span> xScale<span class="token punctuation">.</span><span class="token function">bandwidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">yScale</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    
    svg
      <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'label'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> margin<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> margin <span class="token operator">/</span> <span class="token number">2.4</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token string">'rotate(-90)'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Love meter (%)'</span><span class="token punctuation">)</span>

    svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'label'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> margin<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> height <span class="token operator">+</span> margin <span class="token operator">*</span> <span class="token number">1.7</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Languages'</span><span class="token punctuation">)</span>

    svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> margin<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Most loved programming languages in 2018'</span><span class="token punctuation">)</span>

    svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'source'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> width <span class="token operator">-</span> margin <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> height <span class="token operator">+</span> margin <span class="token operator">*</span> <span class="token number">1.7</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'start'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Source: Stack Overflow, 2018'</span><span class="token punctuation">)</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="/beifen/068.jpg"> <h3 id="字节跳动实例"><a href="#字节跳动实例" class="header-anchor">#</a> 字节跳动实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

<span class="token selector">text</span> <span class="token punctuation">{</span>
  <span class="token property">font</span><span class="token punctuation">:</span> bold 48px monospace<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.enter</span> <span class="token punctuation">{</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.update</span> <span class="token punctuation">{</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.exit</span> <span class="token punctuation">{</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> brown<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>960<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v4.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">var</span> alphabet <span class="token operator">=</span> <span class="token string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    width <span class="token operator">=</span> <span class="token operator">+</span>svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token operator">+</span>svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(32,&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">750</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// JOIN new data with old elements.</span>
  <span class="token keyword">var</span> text <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// EXIT old elements not present in new data.</span>
  text<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;exit&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill-opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1e-6</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// UPDATE old elements present in new data.</span>
  text<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill-opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ENTER new elements present in new data.</span>
  text<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;enter&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;dy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.35em&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i <span class="token operator">*</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill-opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1e-6</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill-opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// The initial display.</span>
<span class="token function">update</span><span class="token punctuation">(</span>alphabet<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Grab a random sample of letters from the alphabet, in alphabetical order.</span>
d3<span class="token punctuation">.</span><span class="token function">interval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">update</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>alphabet<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="/beifen/069.jpg"> <img src="/beifen/070.jpg"> <h3 id="曲线图实例"><a href="#曲线图实例" class="header-anchor">#</a> 曲线图实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">body</span> <span class="token punctuation">{</span> <span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">bottom</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>my_dataviz<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    

<span class="token comment">// set the dimensions and margins of the graph</span>
<span class="token keyword">var</span> margin <span class="token operator">=</span> <span class="token punctuation">{</span>top<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    width <span class="token operator">=</span> <span class="token number">460</span> <span class="token operator">-</span> margin<span class="token punctuation">.</span>left <span class="token operator">-</span> margin<span class="token punctuation">.</span>right<span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token number">400</span> <span class="token operator">-</span> margin<span class="token punctuation">.</span>top <span class="token operator">-</span> margin<span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>

<span class="token comment">// append the svg object to the body of the page</span>
<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#my_dataviz&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width <span class="token operator">+</span> margin<span class="token punctuation">.</span>left <span class="token operator">+</span> margin<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height <span class="token operator">+</span> margin<span class="token punctuation">.</span>top <span class="token operator">+</span> margin<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> margin<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> margin<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Read the data</span>
d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;https://raw.githubusercontent.com/jwilber/random_data/master/tweets.csv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// Add X scale</span>
  <span class="token keyword">var</span> xs <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> width <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(0,&quot;</span> <span class="token operator">+</span> height <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  

  <span class="token comment">// Add Y scale</span>
  <span class="token keyword">var</span> ys <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span> height<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span> 
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>ys<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// define line generator</span>
  <span class="token keyword">var</span> line <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token keyword">return</span> <span class="token function">xs</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// set the x values for the line generator</span>
    <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">ys</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>tweets<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// set the y values for the line generator </span>
    <span class="token punctuation">.</span><span class="token function">curve</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>curveMonotoneX<span class="token punctuation">)</span>

  <span class="token keyword">var</span> line2 <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token keyword">return</span> <span class="token function">xs</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// set the x values for the line generator</span>
    <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">ys</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>tweets <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// set the y values for the line generator </span>
    <span class="token punctuation">.</span><span class="token function">curve</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>curveMonotoneX<span class="token punctuation">)</span>
 
  svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coral&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span>
  
  svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coral&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> line2<span class="token punctuation">)</span>
  
  
  
<span class="token comment">//   This allows to find the closest X index of the mouse:</span>
  <span class="token keyword">var</span> bisect <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">bisector</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>

<span class="token comment">//   // Create the circle that travels along the curve of chart</span>
  <span class="token keyword">var</span> focus <span class="token operator">=</span> svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'circle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token number">8.5</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> focus2 <span class="token operator">=</span> svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'circle'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token number">8.5</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">//   // Create the text that travels along the curve of chart</span>
  <span class="token keyword">var</span> focusText <span class="token operator">=</span> svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span> 
      <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;text-anchor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;alignment-baseline&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;middle&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//   // Create a rect on top of the svg area: this rectangle recovers mouse position</span>
  svg
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;pointer-events&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> mouseover<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> mousemove<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> mouseout<span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// What happens when the mouse move -&gt; show the annotations at the right positions.</span>
  <span class="token keyword">function</span> <span class="token function">mouseover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    focus<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    focus2<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    focusText<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">mousemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// recover coordinate we need</span>
    <span class="token keyword">var</span> x0 <span class="token operator">=</span> xs<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">mouse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">bisect</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> x0<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    selectedData <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    focus
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token function">xs</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token function">ys</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>tweets<span class="token punctuation">)</span><span class="token punctuation">)</span>
    focus2
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token function">xs</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token function">ys</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span> selectedData<span class="token punctuation">.</span>tweets<span class="token punctuation">)</span><span class="token punctuation">)</span>
    focusText
      <span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;x:&quot;</span> <span class="token operator">+</span> selectedData<span class="token punctuation">.</span>day <span class="token operator">+</span> <span class="token string">&quot;  -  &quot;</span> <span class="token operator">+</span> <span class="token string">&quot;y:&quot;</span> <span class="token operator">+</span> selectedData<span class="token punctuation">.</span>tweets<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token function">xs</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token function">ys</span><span class="token punctuation">(</span>selectedData<span class="token punctuation">.</span>tweets<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">mouseout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    focus<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    focusText<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


<span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-csv extra-class"><pre class="language-text"><code>day,tweets,retweets,favorites
1,1,2,5
2,6,11,3
3,3,8,1
4,5,14,6
5,10,29,16
6,4,22,10
7,3,14,1
8,5,18,7
9,1,30,22
10,4,16,15
</code></pre></div><img src="/beifen/071.jpg"> <h3 id="完成率实例"><a href="#完成率实例" class="header-anchor">#</a> 完成率实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">text</span> <span class="token punctuation">{</span>
			<span class="token property">font-family</span><span class="token punctuation">:</span> Georgia<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
      <span class="token property">fill</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.gold</span> <span class="token punctuation">{</span>
      <span class="token property">fill</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.blue</span> <span class="token punctuation">{</span>
      <span class="token property">fill</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token selector">.red</span> <span class="token punctuation">{</span>
      <span class="token property">fill</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>
    pie <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span> <span class="token comment">// http://tauday.com/tau-manifesto</span>

<span class="token comment">// An arc function with all values bound except the endAngle. So, to compute an</span>
<span class="token comment">// SVG path string for a given angle, we pass an object with an endAngle</span>
<span class="token comment">// property to the `arc` function, and it will return the corresponding string.</span>


<span class="token keyword">var</span> arc <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">startAngle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the SVG container, and apply a transform such that the origin is the</span>
<span class="token comment">// center of the canvas. This way, we don't need to position arcs individually.</span>
<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">var</span> rings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">&quot;gold&quot;</span><span class="token punctuation">,</span> percent<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
             <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> percent<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
             <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> percent<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> d3Rings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
  
<span class="token keyword">var</span> <span class="token function-variable function">convertPercentToAngle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">percent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span> percent <span class="token operator">/</span> <span class="token number">100</span> <span class="token punctuation">)</span> <span class="token operator">*</span> pie <span class="token punctuation">}</span><span class="token punctuation">;</span>    
  
<span class="token keyword">var</span> <span class="token function-variable function">createRings</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
  
  rings<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ring<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    	<span class="token keyword">var</span> d3Ring <span class="token operator">=</span> svg  
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token number">100</span> <span class="token operator">*</span> index <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">50</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>ring<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// background</span>
    d3Ring
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token punctuation">{</span>endAngle<span class="token operator">:</span> pie<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#ddd&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> arc<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
    <span class="token comment">// foreground</span>
    <span class="token keyword">var</span> foreground <span class="token operator">=</span> d3Ring
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token punctuation">{</span>endAngle<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> ring<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> arc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// text</span>
    d3Ring
  	<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
  	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">22</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> 
    <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>ring<span class="token punctuation">.</span>percent <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> ring<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	
    
    
    
    <span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token function">convertPercentToAngle</span><span class="token punctuation">(</span>ring<span class="token punctuation">.</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    foreground
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span> <span class="token operator">*</span> index<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arcTween<span class="token punctuation">,</span> angle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    d3Rings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>d3Ring<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token function">createRings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">arcTween</span><span class="token punctuation">(</span><span class="token parameter">transition<span class="token punctuation">,</span> newAngle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  transition<span class="token punctuation">.</span><span class="token function">attrTween</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">var</span> interpolate <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>endAngle<span class="token punctuation">,</span> newAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      d<span class="token punctuation">.</span>endAngle <span class="token operator">=</span> <span class="token function">interpolate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">arc</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><img src="/beifen/072.jpg"> <h3 id="散点图实例"><a href="#散点图实例" class="header-anchor">#</a> 散点图实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Scatterplot bivariate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token selector">.axis path,
	.axis line</span> <span class="token punctuation">{</span>
		<span class="token property">fill</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
		<span class="token property">stroke</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
		<span class="token property">shape-rendering</span><span class="token punctuation">:</span> crispEdges<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">.dot</span> <span class="token punctuation">{</span>
		<span class="token property">stroke</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
		<span class="token comment">// Adapted from</span>
		<span class="token comment">// https://bl.ocks.org/mbostock/3887118</span>

		<span class="token keyword">const</span> w <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> w<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> yScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>h<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> yAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>yScale<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> svg <span class="token operator">=</span> d3
		<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> w <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> h <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(&quot;</span> <span class="token operator">+</span> <span class="token number">80</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> <span class="token number">50</span> <span class="token operator">+</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// margins</span>

		svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;dy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.35em&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-weight&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;text-anchor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;middle&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Gas mileage vs Horsepower&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;a.csv&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
			CityMpg<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>CityMpg<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Classification<span class="token operator">:</span> d<span class="token punctuation">.</span>Classification<span class="token punctuation">,</span>
			Driveline<span class="token operator">:</span> d<span class="token punctuation">.</span>Driveline<span class="token punctuation">,</span>
			EngineType<span class="token operator">:</span> d<span class="token punctuation">.</span>EngineType<span class="token punctuation">,</span>
			FuelType<span class="token operator">:</span> d<span class="token punctuation">.</span>FuelType<span class="token punctuation">,</span>
			Height<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">,</span>
			HighwayMpg<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>HighwayMpg<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Horsepower<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Horsepower<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Hybrid<span class="token operator">:</span> d<span class="token punctuation">.</span>Hybrid<span class="token punctuation">,</span>
			<span class="token constant">ID</span><span class="token operator">:</span> d<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">,</span>
			Length<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Make<span class="token operator">:</span> d<span class="token punctuation">.</span>Make<span class="token punctuation">,</span>
			ModelYear<span class="token operator">:</span> d<span class="token punctuation">.</span>ModelYear<span class="token punctuation">,</span>
			ForwardGears<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>ForwardGears<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Torque<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Torque<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Transmission<span class="token operator">:</span> d<span class="token punctuation">.</span>Transmission<span class="token punctuation">,</span>
			Width<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Width<span class="token punctuation">)</span><span class="token punctuation">,</span>
			Year<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Year<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cars</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			
			<span class="token comment">// Rescale based on data</span>
			<span class="token keyword">const</span> maxHorsepower <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>cars<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">car</span> <span class="token operator">=&gt;</span> car<span class="token punctuation">.</span>Horsepower<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			xScale<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> maxHorsepower<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">const</span> maxMpg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>cars<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">car</span> <span class="token operator">=&gt;</span> car<span class="token punctuation">.</span>HighwayMpg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			yScale<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> maxMpg<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


			<span class="token comment">// X axis path+ticks</span>
			svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;x axis&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(0, &quot;</span> <span class="token operator">+</span> h <span class="token operator">+</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>xAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// X axis legend</span>
			svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;label&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> w<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> h<span class="token operator">+</span><span class="token number">40</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;italic&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;text-anchor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Horsepower (bhp)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Y axis path+ticks</span>
			svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y axis&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>yAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Y axis label</span>
			svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;label&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;italic&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;text-anchor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;MPG&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Data points</span>
			<span class="token comment">// Note you might see ghost lines, that's an optical illusion.</span>
			svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.dot&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>cars<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">xScale</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Horsepower<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">yScale</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>HighwayMpg<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">;</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-csv extra-class"><pre class="language-text"><code>CityMpg,Classification,Driveline,EngineType,FuelType,Height,HighwayMpg,Horsepower,Hybrid,ID,Length,Make,ModelYear,ForwardGears,Torque,Transmission,Width,Year
18,Automatic transmission,All-wheel drive,Audi 3.2L 6 cylinder 250hp 236ft-lbs,Gasoline,140,25,250,False,2009 Audi A3 3.2,143,Audi,2009 Audi A3,6,236,6 Speed Automatic Select Shift,202,2009
22,Automatic transmission,Front-wheel drive,Audi 2.0L 4 cylinder 200 hp 207 ft-lbs Turbo,Gasoline,140,28,200,False,2009 Audi A3 2.0 T AT,143,Audi,2009 Audi A3,6,207,6 Speed Automatic Select Shift,202,2009
21,Manual transmission,Front-wheel drive,Audi 2.0L 4 cylinder 200 hp 207 ft-lbs Turbo,Gasoline,140,30,200,False,2009 Audi A3 2.0 T,143,Audi,2009 Audi A3,6,207,6 Speed Manual,202,2009
21,Automatic transmission,All-wheel drive,Audi 2.0L 4 cylinder 200 hp 207 ft-lbs Turbo,Gasoline,140,28,200,False,2009 Audi A3 2.0 T Quattro,143,Audi,2009 Audi A3,6,207,6 Speed Automatic Select Shift,202,2009
21,Automatic transmission,All-wheel drive,Audi 2.0L 4 cylinder 200 hp 207 ft-lbs Turbo,Gasoline,140,28,200,False,2009 Audi A3 2.0 T Quattro,143,Audi,2009 Audi A3,6,207,6 Speed Automatic Select Shift,202,2009
16,Manual transmission,All-wheel drive,Audi 3.2L 6 cylinder 265hp 243 ft-lbs,Gasoline,91,27,265,False,2009 Audi A5 3.2,17,Audi,2009 Audi A5,6,243,6 Speed Manual,62,2009
17,Automatic transmission,All-wheel drive,Audi 3.2L 6 cylinder 265hp 243 ft-lbs,Gasoline,91,26,265,False,2009 Audi A5 3.2 AT,17,Audi,2009 Audi A5,6,243,6 Speed Automatic Select Shift,62,2009
13,Automatic transmission,All-wheel drive,Audi 4.2L 8 cylinder 350 hp 325 ft-lbs,Gasoline,201,18,350,False,2009 Audi Q7 4.2,221,Audi,2009 Audi Q7,6,325,6 Speed Automatic Select Shift,191,2009
14,Automatic transmission,All-wheel drive,Audi 3.6L 6 cylinder 280hp 266 ft-lbs,Gasoline,201,20,280,False,2009 Audi Q7 3.6,221,Audi,2009 Audi Q7,6,266,6 Speed Automatic Select Shift,191,2009
22,Manual transmission,All-wheel drive,Audi 2.0L 4 cylinder 211 hp 258 ft-lbs Turbo,Gasoline,147,30,211,False,2009 Audi A4 Sedan 2.0 T Quattro,96,Audi,2009 Audi A4 Sedan,6,258,6 Speed Manual,34,2009
21,Automatic transmission,All-wheel drive,Audi 2.0L 4 cylinder 211 hp 258 ft-lbs Turbo,Gasoline,147,27,211,False,2009 Audi A4 Sedan 2.0 T Quattro AT,96,Audi,2009 Audi A4 Sedan,6,258,6 Speed Automatic Select Shift,34,2009
17,Automatic transmission,All-wheel drive,Audi 3.2L 6 cylinder 265hp 243 ft-lbs,Gasoline,147,26,265,False,2009 Audi A4 Sedan 3.2,96,Audi,2009 Audi A4 Sedan,6,243,6 Speed Automatic Select Shift,34,2009
20,Automatic transmission,Front-wheel drive,Acura 3.5L 6 Cylinder 280 hp 254 ft-lbs,Gasoline,172,29,280,False,2012 Acura TL,63,Acura,2012 Acura TL,6,254,6 Speed Automatic Select Shift,87,2012
18,Automatic transmission,All-wheel drive,Acura 3.7L 6 Cylinder 305 hp 273 ft-lbs,Gasoline,172,26,305,False,2012 Acura TL SH-AWD,63,Acura,2012 Acura TL,6,273,6 Speed Automatic Select Shift,87,2012
12,Automatic transmission,All-wheel drive,BMW 4.4L 8 cylinder 555hp 500 ft-lbs Turbo,Gasoline,226,17,555,False,2010 BMW X5 M SUV,243,BMW,2010 BMW X5,6,500,6 Speed Automatic Select Shift,201,2010
12,Automatic transmission,All-wheel drive,BMW 4.4L 8 cylinder 555hp 500 ft-lbs Turbo,Gasoline,226,17,555,False,2011 BMW X5 M SUV,243,BMW,2011 BMW X5,6,500,6 Speed Automatic Select Shift,201,2011
12,Automatic transmission,All-wheel drive,BMW 4.4L 8 cylinder 555hp 500 ft-lbs Turbo,Gasoline,148,17,555,False,2010 BMW X6 M,12,BMW,2010 BMW X6,6,500,6 Speed Automatic Select Shift,191,2010
12,Automatic transmission,All-wheel drive,BMW 4.4L 8 cylinder 555hp 500 ft-lbs Turbo,Gasoline,148,17,555,False,2011 BMW X6 M,12,BMW,2011 BMW X6,6,500,6 Speed Automatic Select Shift,191,2011
18,Manual transmission,Rear-wheel drive,Chevrolet 2.9L 4 Cylinder 185 hp 190 ft-lbs,Gasoline,112,25,185,False,2012 Chevrolet Colorado Work Truck,22,Chevrolet,2012 Chevrolet Colorado,5,190,5 Speed Manual,181,2012
18,Manual transmission,Rear-wheel drive,Chevrolet 2.9L 4 Cylinder 185 hp 190 ft-lbs,Gasoline,112,25,185,False,2012 Chevrolet Colorado Extended Cab Work Truck,140,Chevrolet,2012 Chevrolet Colorado,5,190,5 Speed Manual,181,2012
18,Automatic transmission,Rear-wheel drive,Chevrolet 2.9L 4 Cylinder 185 hp 190 ft-lbs,Gasoline,120,25,185,False,2012 Chevrolet Colorado Crew Cab 1LT,140,Chevrolet,2012 Chevrolet Colorado,4,190,4 Speed Automatic,181,2012
18,Manual transmission,Rear-wheel drive,Chevrolet 2.9L 4 Cylinder 185 hp 190 ft-lbs,Gasoline,112,25,185,False,2011 Chevrolet Colorado Work Truck,22,Chevrolet,2011 Chevrolet Colorado,5,190,5 Speed Manual,181,2011
18,Manual transmission,Rear-wheel drive,Chevrolet 2.9L 4 Cylinder 185 hp 190 ft-lbs,Gasoline,112,25,185,False,2011 Chevrolet Colorado Extended Cab Work Truck,140,Chevrolet,2011 Chevrolet Colorado,5,190,5 Speed Manual,181,2011

20,Automatic transmission,Rear-wheel drive,Hyundai 2.0L 4 Cylinder 210 hp 223 ft-lbs Turbo,Gasoline,104,30,210,False,2011 Hyundai Genesis Coupe 2.0T Premium,22,Hyundai,2011 Hyundai Genesis Coupe,5,223,5 Speed Automatic Select Shift,72,2011
17,Automatic transmission,Rear-wheel drive,Hyundai 3.8L 6 Cylinder 306 hp 266 ft-lbs,Gasoline,104,27,306,False,2011 Hyundai Genesis Coupe 3.8 Grand Touring,22,Hyundai,2011 Hyundai Genesis Coupe,6,266,6 Speed Automatic Select Shift,72,2011



</code></pre></div><img src="/beifen/073.jpg"> <h3 id="美国地图实例"><a href="#美国地图实例" class="header-anchor">#</a> 美国地图实例</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

<span class="token selector">.counties</span> <span class="token punctuation">{</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.states</span> <span class="token punctuation">{</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">stroke</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">stroke-linejoin</span><span class="token punctuation">:</span> round<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>960<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- &lt;script src=&quot;https://d3js.org/d3-scale-chromatic.v1.min.js&quot;&gt;&lt;/script&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://d3js.org/topojson.v2.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    width <span class="token operator">=</span> <span class="token operator">+</span>svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token operator">+</span>svg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">var</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">geoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">rangeRound</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">860</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>schemeBlues<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(0,40)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      d <span class="token operator">=</span> color<span class="token punctuation">.</span><span class="token function">invertExtent</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> d<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">x</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">x</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">x</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;caption&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#000&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;text-anchor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-weight&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Unemployment rate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">g</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">tickSize</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">tickFormat</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i <span class="token operator">?</span> x <span class="token operator">:</span> x <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">tickValues</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.domain&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  d3<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">&quot;https://d3js.org/us-10m.v1.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  d3<span class="token punctuation">.</span><span class="token function">tsv</span><span class="token punctuation">(</span><span class="token string">&quot;./data.tsv&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token comment">//</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>ready<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">ready</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>us<span class="token punctuation">,</span> unemployment<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  unemployment<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    data<span class="token punctuation">[</span>d<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">.</span>rate<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;counties&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>topojson<span class="token punctuation">.</span><span class="token function">feature</span><span class="token punctuation">(</span>us<span class="token punctuation">,</span> us<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>counties<span class="token punctuation">)</span><span class="token punctuation">.</span>features<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>rate <span class="token operator">=</span> data<span class="token punctuation">[</span>d<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>rate <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span>topojson<span class="token punctuation">.</span><span class="token function">mesh</span><span class="token punctuation">(</span>us<span class="token punctuation">,</span> us<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>states<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">!==</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;states&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-tsv extra-class"><pre class="language-text"><code>id	rate
01001	5.1
01003	4.9
01005	8.6
01007	6.2
01009	5.1
01011	7.1
01013	6.7
01015	6.1
01017	5.0
01019	5.0
01021	5.2
</code></pre></div><img src="/beifen/074.jpg"> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jsstore/001bD3API.html" class="prev">
        d3jsapi2
      </a></span> <span class="next"><a href="/jsstore/001eg2.html">
        d3实例2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f10cc161.js" defer></script><script src="/assets/js/2.662cea8a.js" defer></script><script src="/assets/js/177.cd6927eb.js" defer></script><script src="/assets/js/7.19ce3b94.js" defer></script>
  </body>
</html>
