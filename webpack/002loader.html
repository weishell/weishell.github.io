<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>loader | web</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="welcome">
    
    <link rel="preload" href="/assets/css/0.styles.8ee7aa31.css" as="style"><link rel="preload" href="/assets/js/app.723af4b8.js" as="script"><link rel="preload" href="/assets/js/2.1a953b48.js" as="script"><link rel="preload" href="/assets/js/383.4930b603.js" as="script"><link rel="preload" href="/assets/js/10.174ca6d2.js" as="script"><link rel="prefetch" href="/assets/js/100.44c5de48.js"><link rel="prefetch" href="/assets/js/101.25b5303b.js"><link rel="prefetch" href="/assets/js/102.ec5c2990.js"><link rel="prefetch" href="/assets/js/103.24c3667f.js"><link rel="prefetch" href="/assets/js/104.534cd464.js"><link rel="prefetch" href="/assets/js/105.f3e28ee5.js"><link rel="prefetch" href="/assets/js/106.a51cc69e.js"><link rel="prefetch" href="/assets/js/107.1f1aecb1.js"><link rel="prefetch" href="/assets/js/108.98f59831.js"><link rel="prefetch" href="/assets/js/109.7dc23bc6.js"><link rel="prefetch" href="/assets/js/11.572c9dff.js"><link rel="prefetch" href="/assets/js/110.c706ab89.js"><link rel="prefetch" href="/assets/js/111.4a1432ba.js"><link rel="prefetch" href="/assets/js/112.939c31ab.js"><link rel="prefetch" href="/assets/js/113.90d44e96.js"><link rel="prefetch" href="/assets/js/114.e5c3521f.js"><link rel="prefetch" href="/assets/js/115.63d299d7.js"><link rel="prefetch" href="/assets/js/116.520954f9.js"><link rel="prefetch" href="/assets/js/117.415aaf2d.js"><link rel="prefetch" href="/assets/js/118.e087cb94.js"><link rel="prefetch" href="/assets/js/119.ce95d5ee.js"><link rel="prefetch" href="/assets/js/12.5d2b7202.js"><link rel="prefetch" href="/assets/js/120.920a298d.js"><link rel="prefetch" href="/assets/js/121.64d85adb.js"><link rel="prefetch" href="/assets/js/122.05baa0ac.js"><link rel="prefetch" href="/assets/js/123.f89f3624.js"><link rel="prefetch" href="/assets/js/124.631d5196.js"><link rel="prefetch" href="/assets/js/125.8d54b41c.js"><link rel="prefetch" href="/assets/js/126.0e3ba958.js"><link rel="prefetch" href="/assets/js/127.975ea276.js"><link rel="prefetch" href="/assets/js/128.618446a2.js"><link rel="prefetch" href="/assets/js/129.ea7fb480.js"><link rel="prefetch" href="/assets/js/13.980612a9.js"><link rel="prefetch" href="/assets/js/130.f6073d4b.js"><link rel="prefetch" href="/assets/js/131.e317c602.js"><link rel="prefetch" href="/assets/js/132.b445e2cc.js"><link rel="prefetch" href="/assets/js/133.6d29499e.js"><link rel="prefetch" href="/assets/js/134.75382d92.js"><link rel="prefetch" href="/assets/js/135.b25c62fc.js"><link rel="prefetch" href="/assets/js/136.60b716a3.js"><link rel="prefetch" href="/assets/js/137.5f96043f.js"><link rel="prefetch" href="/assets/js/138.52aa59f9.js"><link rel="prefetch" href="/assets/js/139.d3282c9a.js"><link rel="prefetch" href="/assets/js/14.c561889f.js"><link rel="prefetch" href="/assets/js/140.d1c21594.js"><link rel="prefetch" href="/assets/js/141.5f35f512.js"><link rel="prefetch" href="/assets/js/142.01fd7eac.js"><link rel="prefetch" href="/assets/js/143.5f73fc7d.js"><link rel="prefetch" href="/assets/js/144.4fabc128.js"><link rel="prefetch" href="/assets/js/145.4c2e5b28.js"><link rel="prefetch" href="/assets/js/146.7ba4367c.js"><link rel="prefetch" href="/assets/js/147.39e2cdce.js"><link rel="prefetch" href="/assets/js/148.a9cbda46.js"><link rel="prefetch" href="/assets/js/149.6a5b3707.js"><link rel="prefetch" href="/assets/js/15.977544a1.js"><link rel="prefetch" href="/assets/js/150.2013929c.js"><link rel="prefetch" href="/assets/js/151.6321f692.js"><link rel="prefetch" href="/assets/js/152.af7ee793.js"><link rel="prefetch" href="/assets/js/153.7e55d908.js"><link rel="prefetch" href="/assets/js/154.5e71a6a8.js"><link rel="prefetch" href="/assets/js/155.789f418c.js"><link rel="prefetch" href="/assets/js/156.04740528.js"><link rel="prefetch" href="/assets/js/157.f655ed66.js"><link rel="prefetch" href="/assets/js/158.24285765.js"><link rel="prefetch" href="/assets/js/159.8983fd5c.js"><link rel="prefetch" href="/assets/js/16.23c8640b.js"><link rel="prefetch" href="/assets/js/160.efcdcb65.js"><link rel="prefetch" href="/assets/js/161.a20916c1.js"><link rel="prefetch" href="/assets/js/162.5abb0685.js"><link rel="prefetch" href="/assets/js/163.b1d92289.js"><link rel="prefetch" href="/assets/js/164.4a530493.js"><link rel="prefetch" href="/assets/js/165.9aafd7bd.js"><link rel="prefetch" href="/assets/js/166.dddf88b5.js"><link rel="prefetch" href="/assets/js/167.7b40496d.js"><link rel="prefetch" href="/assets/js/168.6626efc1.js"><link rel="prefetch" href="/assets/js/169.4e05c213.js"><link rel="prefetch" href="/assets/js/17.ac01d803.js"><link rel="prefetch" href="/assets/js/170.c8b46d13.js"><link rel="prefetch" href="/assets/js/171.bda5dc99.js"><link rel="prefetch" href="/assets/js/172.2d090345.js"><link rel="prefetch" href="/assets/js/173.ab6cafeb.js"><link rel="prefetch" href="/assets/js/174.da5f1ca5.js"><link rel="prefetch" href="/assets/js/175.3dd176f8.js"><link rel="prefetch" href="/assets/js/176.f53f9b9f.js"><link rel="prefetch" href="/assets/js/177.6871f027.js"><link rel="prefetch" href="/assets/js/178.d7bbf39d.js"><link rel="prefetch" href="/assets/js/179.32270ad7.js"><link rel="prefetch" href="/assets/js/18.ee4a73b3.js"><link rel="prefetch" href="/assets/js/180.902d79e5.js"><link rel="prefetch" href="/assets/js/181.57a42318.js"><link rel="prefetch" href="/assets/js/182.4a761b29.js"><link rel="prefetch" href="/assets/js/183.c68690ed.js"><link rel="prefetch" href="/assets/js/184.94b7c2a5.js"><link rel="prefetch" href="/assets/js/185.df1e37ce.js"><link rel="prefetch" href="/assets/js/186.0556feb3.js"><link rel="prefetch" href="/assets/js/187.b6401e8f.js"><link rel="prefetch" href="/assets/js/188.35fea9fe.js"><link rel="prefetch" href="/assets/js/189.e824b299.js"><link rel="prefetch" href="/assets/js/19.349b3d2f.js"><link rel="prefetch" href="/assets/js/190.dc56684a.js"><link rel="prefetch" href="/assets/js/191.c4be8bf5.js"><link rel="prefetch" href="/assets/js/192.de495931.js"><link rel="prefetch" href="/assets/js/193.55e233a0.js"><link rel="prefetch" href="/assets/js/194.dd3501dd.js"><link rel="prefetch" href="/assets/js/195.f869d9d1.js"><link rel="prefetch" href="/assets/js/196.1dec756b.js"><link rel="prefetch" href="/assets/js/197.b7013cec.js"><link rel="prefetch" href="/assets/js/198.f2037dc7.js"><link rel="prefetch" href="/assets/js/199.16f61477.js"><link rel="prefetch" href="/assets/js/20.c56c3f99.js"><link rel="prefetch" href="/assets/js/200.27cb97b6.js"><link rel="prefetch" href="/assets/js/201.5a138732.js"><link rel="prefetch" href="/assets/js/202.57789129.js"><link rel="prefetch" href="/assets/js/203.7cab272d.js"><link rel="prefetch" href="/assets/js/204.3a29cc32.js"><link rel="prefetch" href="/assets/js/205.3bd9b07d.js"><link rel="prefetch" href="/assets/js/206.39f41a4b.js"><link rel="prefetch" href="/assets/js/207.a59bd345.js"><link rel="prefetch" href="/assets/js/208.83426465.js"><link rel="prefetch" href="/assets/js/209.4648bf68.js"><link rel="prefetch" href="/assets/js/21.036f6efb.js"><link rel="prefetch" href="/assets/js/210.b4a18033.js"><link rel="prefetch" href="/assets/js/211.2f59dcf6.js"><link rel="prefetch" href="/assets/js/212.b99f42d8.js"><link rel="prefetch" href="/assets/js/213.60ec2e7b.js"><link rel="prefetch" href="/assets/js/214.338e82ed.js"><link rel="prefetch" href="/assets/js/215.5d4e34c0.js"><link rel="prefetch" href="/assets/js/216.11cb2ae3.js"><link rel="prefetch" href="/assets/js/217.811b797f.js"><link rel="prefetch" href="/assets/js/218.dee266ad.js"><link rel="prefetch" href="/assets/js/219.b5812024.js"><link rel="prefetch" href="/assets/js/22.30ea717c.js"><link rel="prefetch" href="/assets/js/220.a5c50331.js"><link rel="prefetch" href="/assets/js/221.bb9c094c.js"><link rel="prefetch" href="/assets/js/222.663d4833.js"><link rel="prefetch" href="/assets/js/223.f9fbe530.js"><link rel="prefetch" href="/assets/js/224.71c695e7.js"><link rel="prefetch" href="/assets/js/225.43a375d9.js"><link rel="prefetch" href="/assets/js/226.70e48c22.js"><link rel="prefetch" href="/assets/js/227.1e809b39.js"><link rel="prefetch" href="/assets/js/228.04248725.js"><link rel="prefetch" href="/assets/js/229.b34fb624.js"><link rel="prefetch" href="/assets/js/23.215d8d4b.js"><link rel="prefetch" href="/assets/js/230.537209a1.js"><link rel="prefetch" href="/assets/js/231.58928055.js"><link rel="prefetch" href="/assets/js/232.0f44746a.js"><link rel="prefetch" href="/assets/js/233.151f1407.js"><link rel="prefetch" href="/assets/js/234.6168f5f5.js"><link rel="prefetch" href="/assets/js/235.8cdd44b9.js"><link rel="prefetch" href="/assets/js/236.4347a7e3.js"><link rel="prefetch" href="/assets/js/237.64289124.js"><link rel="prefetch" href="/assets/js/238.dfbe3e0d.js"><link rel="prefetch" href="/assets/js/239.978a61ec.js"><link rel="prefetch" href="/assets/js/24.dff159f7.js"><link rel="prefetch" href="/assets/js/240.a9e82117.js"><link rel="prefetch" href="/assets/js/241.4127d88f.js"><link rel="prefetch" href="/assets/js/242.7a3b827a.js"><link rel="prefetch" href="/assets/js/243.7da48c3e.js"><link rel="prefetch" href="/assets/js/244.6af960f7.js"><link rel="prefetch" href="/assets/js/245.703567cb.js"><link rel="prefetch" href="/assets/js/246.6510a3b5.js"><link rel="prefetch" href="/assets/js/247.a19257c4.js"><link rel="prefetch" href="/assets/js/248.8e726c8c.js"><link rel="prefetch" href="/assets/js/249.7e88c5c6.js"><link rel="prefetch" href="/assets/js/25.09e99b33.js"><link rel="prefetch" href="/assets/js/250.247001f4.js"><link rel="prefetch" href="/assets/js/251.1d90b916.js"><link rel="prefetch" href="/assets/js/252.e4b5e40e.js"><link rel="prefetch" href="/assets/js/253.d06e9389.js"><link rel="prefetch" href="/assets/js/254.168491ef.js"><link rel="prefetch" href="/assets/js/255.c69d6454.js"><link rel="prefetch" href="/assets/js/256.934cbcf9.js"><link rel="prefetch" href="/assets/js/257.5970e168.js"><link rel="prefetch" href="/assets/js/258.5251417a.js"><link rel="prefetch" href="/assets/js/259.c8a9cd1b.js"><link rel="prefetch" href="/assets/js/26.f92284da.js"><link rel="prefetch" href="/assets/js/260.b4b87eec.js"><link rel="prefetch" href="/assets/js/261.d0675044.js"><link rel="prefetch" href="/assets/js/262.ae07077e.js"><link rel="prefetch" href="/assets/js/263.f6d945e6.js"><link rel="prefetch" href="/assets/js/264.4af93020.js"><link rel="prefetch" href="/assets/js/265.1b3a868d.js"><link rel="prefetch" href="/assets/js/266.3184b16a.js"><link rel="prefetch" href="/assets/js/267.02496da2.js"><link rel="prefetch" href="/assets/js/268.79544146.js"><link rel="prefetch" href="/assets/js/269.901e3781.js"><link rel="prefetch" href="/assets/js/27.d5f9f9ed.js"><link rel="prefetch" href="/assets/js/270.49323469.js"><link rel="prefetch" href="/assets/js/271.2d28d9d1.js"><link rel="prefetch" href="/assets/js/272.fbdea9a6.js"><link rel="prefetch" href="/assets/js/273.18d924c5.js"><link rel="prefetch" href="/assets/js/274.07a7c6d6.js"><link rel="prefetch" href="/assets/js/275.13cf2d2f.js"><link rel="prefetch" href="/assets/js/276.79bb770e.js"><link rel="prefetch" href="/assets/js/277.37b2b318.js"><link rel="prefetch" href="/assets/js/278.c999f1b2.js"><link rel="prefetch" href="/assets/js/279.d0280f7e.js"><link rel="prefetch" href="/assets/js/28.c4baf426.js"><link rel="prefetch" href="/assets/js/280.f401125e.js"><link rel="prefetch" href="/assets/js/281.b50f215b.js"><link rel="prefetch" href="/assets/js/282.49a56e42.js"><link rel="prefetch" href="/assets/js/283.b81e0800.js"><link rel="prefetch" href="/assets/js/284.f39f0dce.js"><link rel="prefetch" href="/assets/js/285.74aa05a6.js"><link rel="prefetch" href="/assets/js/286.f3e6a83a.js"><link rel="prefetch" href="/assets/js/287.6e9e1868.js"><link rel="prefetch" href="/assets/js/288.333fd2a2.js"><link rel="prefetch" href="/assets/js/289.bfe91319.js"><link rel="prefetch" href="/assets/js/29.f74a6e32.js"><link rel="prefetch" href="/assets/js/290.53f1a8d3.js"><link rel="prefetch" href="/assets/js/291.cddad13d.js"><link rel="prefetch" href="/assets/js/292.2c78986e.js"><link rel="prefetch" href="/assets/js/293.448d48bc.js"><link rel="prefetch" href="/assets/js/294.79b29b77.js"><link rel="prefetch" href="/assets/js/295.383accee.js"><link rel="prefetch" href="/assets/js/296.a8055b81.js"><link rel="prefetch" href="/assets/js/297.21d82960.js"><link rel="prefetch" href="/assets/js/298.32e54f39.js"><link rel="prefetch" href="/assets/js/299.133a7812.js"><link rel="prefetch" href="/assets/js/3.dc6e325d.js"><link rel="prefetch" href="/assets/js/30.43bca04a.js"><link rel="prefetch" href="/assets/js/300.6cb3ab94.js"><link rel="prefetch" href="/assets/js/301.611e60b2.js"><link rel="prefetch" href="/assets/js/302.76fd9507.js"><link rel="prefetch" href="/assets/js/303.f8e1b214.js"><link rel="prefetch" href="/assets/js/304.e24739bb.js"><link rel="prefetch" href="/assets/js/305.9948c317.js"><link rel="prefetch" href="/assets/js/306.a40109a0.js"><link rel="prefetch" href="/assets/js/307.6a0a4d0e.js"><link rel="prefetch" href="/assets/js/308.d764d252.js"><link rel="prefetch" href="/assets/js/309.fd98df26.js"><link rel="prefetch" href="/assets/js/31.878c6154.js"><link rel="prefetch" href="/assets/js/310.349d75c5.js"><link rel="prefetch" href="/assets/js/311.60835540.js"><link rel="prefetch" href="/assets/js/312.b68ba3bb.js"><link rel="prefetch" href="/assets/js/313.4ed6cb4c.js"><link rel="prefetch" href="/assets/js/314.43d2a6f3.js"><link rel="prefetch" href="/assets/js/315.990a49c5.js"><link rel="prefetch" href="/assets/js/316.f05f135c.js"><link rel="prefetch" href="/assets/js/317.f19d1ea4.js"><link rel="prefetch" href="/assets/js/318.f0d72a0c.js"><link rel="prefetch" href="/assets/js/319.d60d3aa7.js"><link rel="prefetch" href="/assets/js/32.e139d46f.js"><link rel="prefetch" href="/assets/js/320.c0ae74ba.js"><link rel="prefetch" href="/assets/js/321.379641a6.js"><link rel="prefetch" href="/assets/js/322.0bc63bd3.js"><link rel="prefetch" href="/assets/js/323.ace44fca.js"><link rel="prefetch" href="/assets/js/324.9cb1aabe.js"><link rel="prefetch" href="/assets/js/325.dd145b77.js"><link rel="prefetch" href="/assets/js/326.913c0b4e.js"><link rel="prefetch" href="/assets/js/327.6889f9ac.js"><link rel="prefetch" href="/assets/js/328.d54d5d3f.js"><link rel="prefetch" href="/assets/js/329.17aa991f.js"><link rel="prefetch" href="/assets/js/33.03cfda3d.js"><link rel="prefetch" href="/assets/js/330.745b7b85.js"><link rel="prefetch" href="/assets/js/331.de1a7233.js"><link rel="prefetch" href="/assets/js/332.5851baf9.js"><link rel="prefetch" href="/assets/js/333.a8943068.js"><link rel="prefetch" href="/assets/js/334.31164f46.js"><link rel="prefetch" href="/assets/js/335.61c54178.js"><link rel="prefetch" href="/assets/js/336.be60dc46.js"><link rel="prefetch" href="/assets/js/337.c05c9540.js"><link rel="prefetch" href="/assets/js/338.51a51596.js"><link rel="prefetch" href="/assets/js/339.02429d1e.js"><link rel="prefetch" href="/assets/js/34.5cd3b4ed.js"><link rel="prefetch" href="/assets/js/340.374669de.js"><link rel="prefetch" href="/assets/js/341.9805690b.js"><link rel="prefetch" href="/assets/js/342.80b79d1a.js"><link rel="prefetch" href="/assets/js/343.edfb327e.js"><link rel="prefetch" href="/assets/js/344.5c6b4fb6.js"><link rel="prefetch" href="/assets/js/345.a3d4c73b.js"><link rel="prefetch" href="/assets/js/346.6ca98d66.js"><link rel="prefetch" href="/assets/js/347.a92c53e5.js"><link rel="prefetch" href="/assets/js/348.bcd1ad56.js"><link rel="prefetch" href="/assets/js/349.1f3ce756.js"><link rel="prefetch" href="/assets/js/35.65f31b57.js"><link rel="prefetch" href="/assets/js/350.6b54869e.js"><link rel="prefetch" href="/assets/js/351.db454056.js"><link rel="prefetch" href="/assets/js/352.38d5d12e.js"><link rel="prefetch" href="/assets/js/353.66504a46.js"><link rel="prefetch" href="/assets/js/354.89145b4f.js"><link rel="prefetch" href="/assets/js/355.f8d337cf.js"><link rel="prefetch" href="/assets/js/356.7f01926f.js"><link rel="prefetch" href="/assets/js/357.bddb9f92.js"><link rel="prefetch" href="/assets/js/358.7d980530.js"><link rel="prefetch" href="/assets/js/359.74ed8d7b.js"><link rel="prefetch" href="/assets/js/36.2bca375f.js"><link rel="prefetch" href="/assets/js/360.31e3fe97.js"><link rel="prefetch" href="/assets/js/361.d4da85cf.js"><link rel="prefetch" href="/assets/js/362.df38f577.js"><link rel="prefetch" href="/assets/js/363.c7aacab0.js"><link rel="prefetch" href="/assets/js/364.357db0ec.js"><link rel="prefetch" href="/assets/js/365.e39dd4d6.js"><link rel="prefetch" href="/assets/js/366.be4d705b.js"><link rel="prefetch" href="/assets/js/367.5027f4e5.js"><link rel="prefetch" href="/assets/js/368.84f650ee.js"><link rel="prefetch" href="/assets/js/369.ca24a683.js"><link rel="prefetch" href="/assets/js/37.b190d4e3.js"><link rel="prefetch" href="/assets/js/370.d9d67062.js"><link rel="prefetch" href="/assets/js/371.e3696511.js"><link rel="prefetch" href="/assets/js/372.e2cc586b.js"><link rel="prefetch" href="/assets/js/373.2cd7aa59.js"><link rel="prefetch" href="/assets/js/374.78a425b9.js"><link rel="prefetch" href="/assets/js/375.4d054647.js"><link rel="prefetch" href="/assets/js/376.4446d436.js"><link rel="prefetch" href="/assets/js/377.0c255d7c.js"><link rel="prefetch" href="/assets/js/378.26bbaf21.js"><link rel="prefetch" href="/assets/js/379.3867e7e1.js"><link rel="prefetch" href="/assets/js/38.1bf99f7f.js"><link rel="prefetch" href="/assets/js/380.e40ca91a.js"><link rel="prefetch" href="/assets/js/381.6a8d77f0.js"><link rel="prefetch" href="/assets/js/382.bffc4238.js"><link rel="prefetch" href="/assets/js/384.b3c735f9.js"><link rel="prefetch" href="/assets/js/385.d294ce78.js"><link rel="prefetch" href="/assets/js/386.f4b75056.js"><link rel="prefetch" href="/assets/js/387.b14f8032.js"><link rel="prefetch" href="/assets/js/388.cfcdbcd3.js"><link rel="prefetch" href="/assets/js/389.50295d4b.js"><link rel="prefetch" href="/assets/js/39.52e6ed18.js"><link rel="prefetch" href="/assets/js/390.ce1d1860.js"><link rel="prefetch" href="/assets/js/391.24c1ed73.js"><link rel="prefetch" href="/assets/js/392.c03d5650.js"><link rel="prefetch" href="/assets/js/393.02cf475f.js"><link rel="prefetch" href="/assets/js/394.597d5c1c.js"><link rel="prefetch" href="/assets/js/395.e7e286e0.js"><link rel="prefetch" href="/assets/js/396.e9578588.js"><link rel="prefetch" href="/assets/js/397.090e352b.js"><link rel="prefetch" href="/assets/js/398.2190968c.js"><link rel="prefetch" href="/assets/js/399.cdd10b4b.js"><link rel="prefetch" href="/assets/js/4.3616097b.js"><link rel="prefetch" href="/assets/js/40.c9276079.js"><link rel="prefetch" href="/assets/js/400.28d0d6ae.js"><link rel="prefetch" href="/assets/js/401.89b1c615.js"><link rel="prefetch" href="/assets/js/402.9900507a.js"><link rel="prefetch" href="/assets/js/403.608a0f7a.js"><link rel="prefetch" href="/assets/js/404.51da312c.js"><link rel="prefetch" href="/assets/js/405.133fbe44.js"><link rel="prefetch" href="/assets/js/406.91f66fba.js"><link rel="prefetch" href="/assets/js/407.b0a595e8.js"><link rel="prefetch" href="/assets/js/408.dc312127.js"><link rel="prefetch" href="/assets/js/409.715bd867.js"><link rel="prefetch" href="/assets/js/41.43b52e06.js"><link rel="prefetch" href="/assets/js/410.26b6ff8e.js"><link rel="prefetch" href="/assets/js/411.4efba280.js"><link rel="prefetch" href="/assets/js/412.2ca3f092.js"><link rel="prefetch" href="/assets/js/413.1ab0de7c.js"><link rel="prefetch" href="/assets/js/414.63bccae4.js"><link rel="prefetch" href="/assets/js/415.1b4c258a.js"><link rel="prefetch" href="/assets/js/416.9b81a3a5.js"><link rel="prefetch" href="/assets/js/417.c5ce4f8a.js"><link rel="prefetch" href="/assets/js/418.d7f9476b.js"><link rel="prefetch" href="/assets/js/419.950ae404.js"><link rel="prefetch" href="/assets/js/42.a12c2b2c.js"><link rel="prefetch" href="/assets/js/420.7b0de39c.js"><link rel="prefetch" href="/assets/js/421.3952763d.js"><link rel="prefetch" href="/assets/js/422.b6d99ebe.js"><link rel="prefetch" href="/assets/js/423.119a98d7.js"><link rel="prefetch" href="/assets/js/424.e4a155cd.js"><link rel="prefetch" href="/assets/js/425.5dcae149.js"><link rel="prefetch" href="/assets/js/426.d0cffd49.js"><link rel="prefetch" href="/assets/js/427.4dcc2b7c.js"><link rel="prefetch" href="/assets/js/428.bc9e0acd.js"><link rel="prefetch" href="/assets/js/429.9575c577.js"><link rel="prefetch" href="/assets/js/43.8e16ab43.js"><link rel="prefetch" href="/assets/js/430.d0e52076.js"><link rel="prefetch" href="/assets/js/44.fcb64509.js"><link rel="prefetch" href="/assets/js/45.9454995c.js"><link rel="prefetch" href="/assets/js/46.de66483e.js"><link rel="prefetch" href="/assets/js/47.4d5fc0e4.js"><link rel="prefetch" href="/assets/js/48.ce19e589.js"><link rel="prefetch" href="/assets/js/49.1e6bab4e.js"><link rel="prefetch" href="/assets/js/5.9e9f7af7.js"><link rel="prefetch" href="/assets/js/50.cf1dddb3.js"><link rel="prefetch" href="/assets/js/51.b1604e39.js"><link rel="prefetch" href="/assets/js/52.8863a951.js"><link rel="prefetch" href="/assets/js/53.9c98edba.js"><link rel="prefetch" href="/assets/js/54.5ef9c0e1.js"><link rel="prefetch" href="/assets/js/55.cc7f3d4b.js"><link rel="prefetch" href="/assets/js/56.f4694cf3.js"><link rel="prefetch" href="/assets/js/57.45f02d71.js"><link rel="prefetch" href="/assets/js/58.e5707c0d.js"><link rel="prefetch" href="/assets/js/59.4a3101b7.js"><link rel="prefetch" href="/assets/js/6.c827cd18.js"><link rel="prefetch" href="/assets/js/60.fa873844.js"><link rel="prefetch" href="/assets/js/61.8444131d.js"><link rel="prefetch" href="/assets/js/62.1470e003.js"><link rel="prefetch" href="/assets/js/63.0082dece.js"><link rel="prefetch" href="/assets/js/64.87fb13b9.js"><link rel="prefetch" href="/assets/js/65.13eafe5a.js"><link rel="prefetch" href="/assets/js/66.924782a8.js"><link rel="prefetch" href="/assets/js/67.05e6b3db.js"><link rel="prefetch" href="/assets/js/68.1c1fc084.js"><link rel="prefetch" href="/assets/js/69.4c5b4151.js"><link rel="prefetch" href="/assets/js/7.ce088a3f.js"><link rel="prefetch" href="/assets/js/70.971b5146.js"><link rel="prefetch" href="/assets/js/71.5346437a.js"><link rel="prefetch" href="/assets/js/72.def2bf25.js"><link rel="prefetch" href="/assets/js/73.932ebd1f.js"><link rel="prefetch" href="/assets/js/74.17b803ed.js"><link rel="prefetch" href="/assets/js/75.039531fc.js"><link rel="prefetch" href="/assets/js/76.7ddf4f6f.js"><link rel="prefetch" href="/assets/js/77.079b67cb.js"><link rel="prefetch" href="/assets/js/78.3f96455d.js"><link rel="prefetch" href="/assets/js/79.38ce1d68.js"><link rel="prefetch" href="/assets/js/8.6ac852a3.js"><link rel="prefetch" href="/assets/js/80.6a043fef.js"><link rel="prefetch" href="/assets/js/81.4ab4b733.js"><link rel="prefetch" href="/assets/js/82.f7e499b6.js"><link rel="prefetch" href="/assets/js/83.c5f26873.js"><link rel="prefetch" href="/assets/js/84.e2c64743.js"><link rel="prefetch" href="/assets/js/85.058dda12.js"><link rel="prefetch" href="/assets/js/86.393a717e.js"><link rel="prefetch" href="/assets/js/87.fb09cdfb.js"><link rel="prefetch" href="/assets/js/88.a7d1dcfb.js"><link rel="prefetch" href="/assets/js/89.e940d8ff.js"><link rel="prefetch" href="/assets/js/9.22b17ec8.js"><link rel="prefetch" href="/assets/js/90.8f603046.js"><link rel="prefetch" href="/assets/js/91.036bf147.js"><link rel="prefetch" href="/assets/js/92.006eec70.js"><link rel="prefetch" href="/assets/js/93.0c02336b.js"><link rel="prefetch" href="/assets/js/94.7ef923ae.js"><link rel="prefetch" href="/assets/js/95.ef2a1681.js"><link rel="prefetch" href="/assets/js/96.8ea97afe.js"><link rel="prefetch" href="/assets/js/97.006c4ed1.js"><link rel="prefetch" href="/assets/js/98.3ae0af2e.js"><link rel="prefetch" href="/assets/js/99.247b7f94.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ee7aa31.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link router-link-active">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link router-link-active">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/webpack/" aria-current="page" class="sidebar-link"> webpack</a></li><li><a href="/webpack/002loader.html" aria-current="page" class="active sidebar-link"> loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/002loader.html#loader" class="sidebar-link">loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/002loader.html#file-loader" class="sidebar-link">file-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#url-loader" class="sidebar-link">url-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#asset-module-type" class="sidebar-link">asset module type</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#css文件loader" class="sidebar-link">css文件loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#css前缀补充postcss" class="sidebar-link">css前缀补充postcss</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#postcss-preset-env" class="sidebar-link">postcss-preset-env</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#vue-style-loader" class="sidebar-link">vue-style-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#css-loader" class="sidebar-link">css-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#字体文件打包" class="sidebar-link">字体文件打包</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#编写一个loader" class="sidebar-link">编写一个loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#resolveloader配置简化自定义loader配置路径" class="sidebar-link">resolveLoader配置简化自定义loader配置路径</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#less文件loader处理" class="sidebar-link">less文件loader处理</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#eslint-loader-w4" class="sidebar-link">eslint-loader（w4）</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#babel-loader" class="sidebar-link">babel-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#vue-loader" class="sidebar-link">vue-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#ts-loader" class="sidebar-link">ts-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#loader代码合并配置" class="sidebar-link">loader代码合并配置</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#oneof之loader" class="sidebar-link">oneOf之loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#include-exclude之loader" class="sidebar-link">Include/Exclude之loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#webpack开发一个-loader" class="sidebar-link">webpack开发一个 loader</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#webpack-loader分类" class="sidebar-link">webpack loader分类</a></li><li class="sidebar-sub-header"><a href="/webpack/002loader.html#手写loader" class="sidebar-link">手写loader</a></li></ul></li></ul></li><li><a href="/webpack/003plugins.html" class="sidebar-link"> plugins</a></li><li><a href="/webpack/004entry.html" class="sidebar-link"> Entry&amp;&amp;Output</a></li><li><a href="/webpack/006webpackdevserver.html" class="sidebar-link"> webpackdevserver</a></li><li><a href="/webpack/007hotmodule.html" class="sidebar-link"> 模块热更新</a></li><li><a href="/webpack/008babel.html" class="sidebar-link"> babel转换ES6</a></li><li><a href="/webpack/009treeshaking.html" class="sidebar-link"> treeshaking</a></li><li><a href="/webpack/010mode.html" class="sidebar-link"> development/production</a></li><li><a href="/webpack/011codesplitting.html" class="sidebar-link"> 代码分割</a></li><li><a href="/webpack/012lazyloading.html" class="sidebar-link"> 懒加载和预加载</a></li><li><a href="/webpack/013csssplit.html" class="sidebar-link"> css代码分割</a></li><li><a href="/webpack/014caching.html" class="sidebar-link"> 浏览器缓存</a></li><li><a href="/webpack/015shimming.html" class="sidebar-link"> shimming与环境变量</a></li><li><a href="/webpack/016library.html" class="sidebar-link"> 库打包的相关配置</a></li><li><a href="/webpack/017PWA.html" class="sidebar-link"> PWA</a></li><li><a href="/webpack/018TS.html" class="sidebar-link"> typescript的打包配置</a></li><li><a href="/webpack/019optimization.html" class="sidebar-link">webpack的optimization配置</a></li><li><a href="/webpack/020webpackdisttime.html" class="sidebar-link"> 优化webpack</a></li><li><a href="/webpack/021morepage.html" class="sidebar-link"> 多页面打包配置</a></li><li><a href="/webpack/022webppackjquery.html" class="sidebar-link"> webpack打包jquery项目</a></li><li><a href="/webpack/023bundler.html" class="sidebar-link"> bundler源码编写</a></li><li><a href="/webpack/024webpackfx.html" class="sidebar-link">webpack复习</a></li><li><a href="/webpack/026mode.html" class="sidebar-link">mode</a></li><li><a href="/webpack/027jsj.html" class="sidebar-link">webpack脚手架配置</a></li><li><a href="/webpack/028stats.html" class="sidebar-link">stats</a></li><li><a href="/webpack/050vite.html" class="sidebar-link">vite</a></li><li><a href="/webpack/100parcel.html" class="sidebar-link">parcel</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h2> <p>loader 本身仅仅只是一个函数，接收模块代码的内容，然后返回代码内容转化后的结果。</p> <p>webpack不能识别非js文件，需要借助loader打包, <strong>loader不需要手动引入</strong> ，webpack会自动去匹配寻找使用的loader，而插件则需要手动引入。</p> <p><strong>loader可以单独写在rules里，也可以用use包裹，如果是使用到多个loader，use应该为数组的形式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader1&quot;</span><span class="token punctuation">,</span><span class="token comment">//单个loader</span>
<span class="token punctuation">}</span>


<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token comment">//可以用use包裹loader</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token comment">// 多个loader可以写成数组，如果有配置项，对应的loader可写成对象形式</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//开启css模块化打包</span>
          <span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
      <span class="token string">'sass-loader'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>如何可以自定义文件的输出路径和文件名呢？
<ul><li>方式1：修改output，添加<code>assetModuleFilename</code>属性；(asset module type模式下生效)</li> <li>方式2.1：在Rule中，添加一个generator属性，并且设置<code>filename</code>；(asset module type)</li> <li>方式2.2：对应的loader的options配置中设置<code>outputPath</code>或者直接在<code>name</code>属性上加目录</li></ul></li></ul></div> <h4 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h4> <ul><li><p>pre： 前置 loader</p></li> <li><p>normal： 普通 loader</p></li> <li><p>inline： 内联 loader</p></li> <li><p>post： 后置 loader</p></li> <li><p>执行顺序:4 类 loader 的执行优级为：pre &gt; normal &gt; inline &gt; post 。</p></li> <li><p>相同优先级的 loader 执行顺序为：从右到左，从下到上。</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 此时loader执行顺序：loader3 - loader2 - loader1</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader2&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader3&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 此时loader执行顺序：loader1 - loader2 - loader3</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 没有enforce就是normal</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader2&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;loader3&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">'post'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="inline-loader的前缀"><a href="#inline-loader的前缀" class="header-anchor">#</a> inline loader的前缀</h4> <p>inline loader 可以通过添加不同前缀，跳过其他类型 loader。</p> <ul><li>! 跳过 normal loader。</li> <li>-! 跳过 pre 和 normal loader。</li> <li>!! 跳过 pre、 normal 和 post loader。</li></ul> <blockquote><p>用法：import Styles from 'style-loader!css-loader!./styles.css';</p></blockquote> <ul><li><p>含义：</p> <ol><li>使用 css-loader 和 style-loader 处理 styles.css 文件</li> <li>通过 ! 将资源中的 loader 分开</li> <li>inline loader 可以通过添加不同前缀，跳过其他类型 loader</li></ol></li> <li><p>! 跳过 normal loader</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'!style-loader!css-loader!./styles.css'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>-! 跳过 pre 和 normal loader</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'-!style-loader!css-loader!./styles.css'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>!!跳过 pre、 normal 和 post loader</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'!!style-loader!css-loader!./styles.css'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h3> <p>文件加载器将文件上的<code>import/require（）解析为url</code>，并将文件发送到输出目录。</p> <ul><li>支持import/require 引入的路径，或者是例如background:url(xx)引入方式，但是如果是在js中用字符串的src直接写入，无效</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> zzhnImage <span class="token keyword">from</span> <span class="token string">'../img/zznh.png'</span><span class="token punctuation">;</span>
imgEl<span class="token punctuation">.</span>src <span class="token operator">=</span> zzhnImage<span class="token punctuation">;</span>
<span class="token comment">//imgEl.src='../img/xxx.png' //这种写法，首先打包后找不到对应的目录，第二是文件根本就不会报打包到dist包中。</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>cnpm i file-loader -D
</code></pre></div><p>打包jpg文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> 
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="file-loader额外配置"><a href="#file-loader额外配置" class="header-anchor">#</a> file-loader额外配置</h4> <ul><li>name
<ul><li>[ext]： 处理文件的扩展名； <strong>这里不包括点</strong></li> <li>[name]：处理文件的名称；</li> <li>[hash]：文件的内容，使用MD4的散列函数处理，生成的一个128位的hash值（32个十六进制）；</li> <li>[contentHash]：在file-loader中和[hash]结果是一致的（在webpack的一些其他地方不一样，后面会讲到）；</li> <li>[hash:<code>&lt;length&gt;</code>]：截图hash的长度，默认32个字符太长了；</li> <li>[path]：文件相对于webpack配置文件的路径；</li></ul></li> <li>outputPath:来设置输出的文件夹</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|woff2?)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// outputPath: &quot;font&quot;,</span>
             <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;font/[name]_[hash:6].[ext]&quot;</span>
           <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>options中有些参数不仅可以写字符串，也可以写成函数形式进行处理</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">resourcePath<span class="token punctuation">,</span> resourceQuery</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// `resourcePath` - `/absolute/path/to/file.js`</span>
            <span class="token comment">// `resourceQuery` - `?foo=bar`</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token string">'[path][name].[ext]'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token string">'[contenthash].[ext]'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="url-loader"><a href="#url-loader" class="header-anchor">#</a> url-loader</h3> <ul><li>url-loader功能包含file-loader的基本功能，同时有一个options属性limit来限制大小，如果文件小于limit则会直接以base64打包到js里，如果大于则会生成新文件。</li> <li>配置的文件夹可以单独设置outputPath，也可以在name上体现name:'img/[name].[ext]'</li> <li>outputPath:'img/',中的img/可以直接写成img</li></ul> <div class="language- extra-class"><pre class="language-text"><code>cnpm i url-loader --save-dev
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> 
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./index.js'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|gif|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
					<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">outputPath</span><span class="token operator">:</span><span class="token string">'img/'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">2048</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'zip'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="asset-module-type"><a href="#asset-module-type" class="header-anchor">#</a> asset module type</h3> <ul><li>在webpack5之前，加载这些资源需要使用一些loader，比如raw-loader 、url-loader、file-loader；</li> <li>在webpack5中，可以直接使用资源模块类型（asset module type），来替代上面的这些loader；</li></ul> <p>资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：</p> <ul><li>asset/resource 发送一个单独的文件并导出 URL。相当于file-loader</li> <li>asset/inline 导出一个资源的 data URI。之前通过使用 url-loader 实现；</li> <li>asset/source 导出资源的源代码。之前通过使用 raw-loader 实现；</li> <li>asset 在导出一个 data URI 和发送一个单独的文件之间自动选择。相当于url-loader, 将文件转化成 Webpack 能识别的资源，同时小于某个大小的资源会处理成 data URI 形式</li></ul> <blockquote><p>如果没有配置文件夹，又需要的话可以在output中进行配置assetModuleFilename</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&quot;imgs/[name]_[hash:6][ext]&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
			 <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpe?g|png|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;img/[name]_[hash:6][ext]&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">1024</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>转base64优缺点</p> <ul><li>优点：减少请求数量</li> <li>缺点：体积变得更大(小图片还好，大图片可能体积变得大1/3左右)</li></ul></div> <p>开发中可能还存在一些其他资源，如音视频等，也可以使用asset一起处理了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/main.js&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/js/main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将 js 文件输出到 static/js 目录中</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动将上次打包目录资源清空</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|webp)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 小于10kb的图片会被base64处理</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 将图片文件输出到 static/imgs 目录中</span>
          <span class="token comment">// 将图片文件命名 [hash:8][ext][query]</span>
          <span class="token comment">// [hash:8]: hash值取8位</span>
          <span class="token comment">// [ext]: 使用之前的文件扩展名</span>
          <span class="token comment">// [query]: 添加之前的query参数</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/imgs/[hash:8][ext][query]&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|woff2?|map4|map3|avi)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;static/media/[hash:8][ext][query]&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>新版本中没去处理eot、ttf、woff等文件，直接放在打包目录了，没报错,<code>好像是asset默认做了对应的处理！</code></p></blockquote> <h3 id="css文件loader"><a href="#css文件loader" class="header-anchor">#</a> css文件loader</h3> <p>使用scss需要配置</p> <div class="language- extra-class"><pre class="language-text"><code>npm install sass-loader node-sass --save-dev
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>npm install style-loader css-loader  --save-dev
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
</code></pre></div><ul><li>借助webpack的<code>~</code>前缀,* css loader 会把非根路径的url解析为相对路径，加<code>~</code>前缀才解析为模块路径。</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~@/assets/image/background.png'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
</code></pre></div><div class="language-scss extra-class"><pre class="language-scss"><code>&lt;style lang=<span class="token string">&quot;scss&quot;</span>&gt;
    <span class="token keyword">@import</span> <span class="token string">'~@/assets/style/index'</span>
&lt;/style&gt;
</code></pre></div><blockquote><p>vite中可以不需要加~</p></blockquote> <h3 id="css前缀补充postcss"><a href="#css前缀补充postcss" class="header-anchor">#</a> css前缀补充postcss</h3> <p>PostCSS是一个通过JavaScript来转换样式的工具；这个工具可以帮助我们进行一些CSS的转换和适配，比如自动添加浏览器前缀、css样式的重置；</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm install postcss postcss-cli -D
</code></pre></div><blockquote><p>postcss-cli在命令行操作的时候需要，如果是在工程中可以省略</p></blockquote> <p>因为需要添加前缀，所以要安装autoprefixer：</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm install autoprefixer -D
</code></pre></div><p>直接使用使用postcss工具，并且制定使用autoprefixer</p> <div class="language- extra-class"><pre class="language-text"><code>npx postcss --use autoprefixer -o end.css ./src/css/style.css

// --use 插件 -o 输出文件名 输入文件名
</code></pre></div><p>真实开发中必然不会直接使用命令行工具来对css进行处理，而是可以借助于构建工具：在webpack中使用postcss就是使用postcss-loader来处理的；</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm install postcss-loader -D
</code></pre></div><blockquote><p>注意：因为postcss需要有对应的插件才会起效果，所以我们需要配置它的plugin；</p></blockquote> <img src="/beifen/416.png"> <p>当然，也可以将这些配置信息放到一个单独的文件中进行管理：在根目录下创建postcss.config.js,<code>webpack会自动先去读取rules，发现规则中没有postcss的plugins，就会查看根目录下是否有postcss.config.js。</code></p> <img src="/beifen/417.png"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> 
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./index.js'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
					 <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token literal-property property">importLoaders</span><span class="token operator">:</span><span class="token number">1</span>	   
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'postcss-loader'</span><span class="token punctuation">}</span>
				<span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'sass-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			  <span class="token punctuation">]</span>
	

		<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'zip'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;defaults&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;not ie &lt; 11&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;iOS 7&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;last 3 iOS versions&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="postcss-preset-env"><a href="#postcss-preset-env" class="header-anchor">#</a> postcss-preset-env</h3> <p>事实上，在配置postcss-loader时，配置插件并不需要使用autoprefixer。可以使用另外一个插件：<code>postcss-preset-env</code>,更为强大和优势</p> <p>postcss-preset-env也是一个postcss的插件；它可以帮助我们将一些现代的CSS特性，转成大多数浏览器认识的CSS，并且会根据目标浏览器或者运行时环境添加所需的polyfill；也包括会自动帮助我们添加autoprefixer（所以相当于已经内置了autoprefixer）；</p> <div class="language- extra-class"><pre class="language-text"><code>npm install postcss-preset-env -D
</code></pre></div><ol><li>可以在webpack中配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
							<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token punctuation">]</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="2"><li>在单独文件postcss.config.js配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'postcss-preset-env'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>还可以在package.json中配置</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;defaults&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;not ie &lt; 11&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;last 3 versions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&gt; 0.2%&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;iOS 7&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;last 3 iOS versions&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="vue-style-loader"><a href="#vue-style-loader" class="header-anchor">#</a> vue-style-loader</h3> <p>vue-style-loader 跟 style-loader 基本用法跟功能是一样的，都是往 dom 里面插入一个 style 标签去让样式生效的，但是 vue-style-loader 支持 vue 中的 ssr（服务端渲染），所以如果需要支持服务端渲染的 vue 项目，就需要用到 vue-style-loader了，如果一般的 vue 项目的话，推荐使用 style-loader，毕竟 style-loader 支持的功能还是丰富些，比如可以懒注入、可以指定位置插入标签等等。</p> <h3 id="css-loader"><a href="#css-loader" class="header-anchor">#</a> css-loader</h3> <p>查询参数 importLoaders，用于配置「css-loader 作用于 @import 的资源之前」有多少个 loader。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			  <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//开启css模块化打包</span>
              <span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
			  <span class="token comment">// 0 =&gt; no loaders (default); 1 =&gt; postcss-loader; 2 =&gt; postcss-loader, sass-loader</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>modules:true进行css模块化打包;可以避免css全局污染;
<strong>import style from'./index.scss'</strong></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>css预编译处理器的loader应该先postcss-loader执行，否则无法给sass/less/stylus等里的css代码加上兼容性前缀</p></div> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 用来匹配 .css 结尾的文件</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// use 数组里面 Loader 执行顺序是从右到左</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 能解决大多数样式兼容性问题</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 能解决大多数样式兼容性问题</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.styl$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                  <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 能解决大多数样式兼容性问题</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;stylus-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>可以在 package.json 文件中添加 browserslist 来控制样式的兼容性做到什么程度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// 其他省略</span>
  <span class="token string-property property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ie &gt;= 8&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// 其他省略</span>
  <span class="token string-property property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;last 2 version&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="字体文件打包"><a href="#字体文件打包" class="header-anchor">#</a> 字体文件打包</h3> <p>借助file-loader即可</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="编写一个loader"><a href="#编写一个loader" class="header-anchor">#</a> 编写一个loader</h3> <p>1一个同步loader</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'lee'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2一个异步loader</p> <p><strong>注意异步loader需要引入async()</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> result <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'dell'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="resolveloader配置简化自定义loader配置路径"><a href="#resolveloader配置简化自定义loader配置路径" class="header-anchor">#</a> resolveLoader配置简化自定义loader配置路径</h3> <p>这组选项与 <a href="/webpack/020webpackdisttime.html#resolve模块解析">resolve</a> 对象的属性集合相同， 但仅用于解析 webpack 的 loader 包。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mainFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'loader'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">,</span> <span class="token string">'./loaders'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'replaceLoader'</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'replaceLoaderAsync'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'lee'</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">loader</p> <p>当需要包装源代码，捕获，国际化等都可以使用自定义loader</p></div> <h3 id="less文件loader处理"><a href="#less文件loader处理" class="header-anchor">#</a> less文件loader处理</h3> <p>可以使用less工具来完成它的编译转换：</p> <p>Less工具处理</p> <div class="language- extra-class"><pre class="language-text"><code>npm install less -D
</code></pre></div><p>less安装包内自带lessc，可以去编译less成css，但是手动太麻烦</p> <div class="language- extra-class"><pre class="language-text"><code>npx lessc ./src/css/title.less title.css
</code></pre></div><h4 id="less-loader"><a href="#less-loader" class="header-anchor">#</a> less-loader</h4> <p>配置后自动使用less工具转换less到css</p> <div class="language- extra-class"><pre class="language-text"><code>npm install less-loader -D
</code></pre></div><img src="/beifen/415.png"> <h3 id="eslint-loader-w4"><a href="#eslint-loader-w4" class="header-anchor">#</a> eslint-loader（w4）</h3> <p>在webpack5中，被eslint-webpack-plugin插件取代</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'eslint-loader'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 编译前检查</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 不检测的文件</span>
    <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定检查的目录</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 这里的配置项参数将会被传递到 eslint 的 CLIEngine </span>
        <span class="token literal-property property">formatter</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-friendly-formatter'</span><span class="token punctuation">)</span> <span class="token comment">// 指定错误报告的格式规范</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h3> <p>Babel：JavaScript 编译器。</p> <p>主要用于将 ES6 语法编写的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p> <ol><li>配置文件
配置文件由很多种写法：</li></ol> <ul><li>babel.config.*：新建文件，位于项目根目录(（可以直接作用于Monorepos项目的子包，更加推荐）)
<ul><li>babel.config.js</li> <li>babel.config.json</li></ul></li> <li>.babelrc.*：新建文件，位于项目根目录
<ul><li>.babelrc</li> <li>.babelrc.js</li> <li>.babelrc.json</li></ul></li></ul> <p>package.json 中 babel：不需要创建文件，在原有文件基础上写，Babel 会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p> <ol start="2"><li>具体配置
以 babel.config.js 配置文件为例：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 预设</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="presets-预设"><a href="#presets-预设" class="header-anchor">#</a> presets 预设</h4> <p>简单理解：就是一组 Babel 插件, 扩展 Babel 功能</p> <ul><li>@babel/preset-env: 一个智能预设，允许您使用最新的 JavaScript。</li> <li>@babel/preset-react：一个用来编译 React jsx 语法的预设</li> <li>@babel/preset-typescript：一个用来编译 TypeScript 语法的预设</li></ul> <ol start="3"><li>在 Webpack 中使用</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i babel-loader @babel/core @babel/preset-env -D
</code></pre></div><ul><li>babel.config.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>webpack.config.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ESLintWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 排除node_modules代码不编译</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
		<span class="token comment">// 只有一个loader，可以不用use，然后它的配置options也可以写在同层</span>
		<span class="token comment">// 也可以单独抽离出去</span>
		<span class="token comment">// options:{</span>
		<span class="token comment">// 	presets: [&quot;@babel/preset-env&quot;]</span>
		<span class="token comment">// }</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vue-loader"><a href="#vue-loader" class="header-anchor">#</a> vue-loader</h3> <ul><li>解析.vue文件依赖vue-loader和@vue/compiler-sfc解析模板中的template。</li> <li>同时配置VueLoaderPlugin插件</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>cnpm i vue-loader -D
cnpm <span class="token function">install</span> @vue/compiler-sfc -D //必须添加@vue/compiler-sfc来对template进行解析
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>VueLoaderPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/dist/index'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'vue-loader'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-loader"><a href="#ts-loader" class="header-anchor">#</a> ts-loader</h3> <p>配置项目将ts编译成js</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm i typescript ts-loader -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code> <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;ts-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="loader代码合并配置"><a href="#loader代码合并配置" class="header-anchor">#</a> loader代码合并配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取处理样式的Loaders</span>
<span class="token keyword">const</span> <span class="token function-variable function">getStyleLoaders</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">preProcessor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
    <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 能解决大多数样式兼容性问题</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    preProcessor<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 用来匹配 .css 结尾的文件</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// use 数组里面 Loader 执行顺序是从右到左</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span><span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span><span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.styl$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span><span class="token string">&quot;stylus-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="oneof之loader"><a href="#oneof之loader" class="header-anchor">#</a> oneOf之loader</h3> <p>打包时每个文件都会经过所有 loader 处理，虽然因为 test 正则原因实际没有处理上，但是都要过一遍。比较慢。oneOf顾名思义就是只能匹配上一个 loader, 剩下的就不匹配了。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">oneOf</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 用来匹配 .css 结尾的文件</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token comment">// use 数组里面 Loader 执行顺序是从右到左</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.styl$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stylus-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 排除node_modules代码不编译</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="include-exclude之loader"><a href="#include-exclude之loader" class="header-anchor">#</a> Include/Exclude之loader</h3> <p>开发时需要使用第三方的库或插件，所有文件都下载到 node_modules 中了。而这些文件是不需要编译可以直接使用的。</p> <p>所以在对 js 文件处理时，要排除 node_modules 下面的文件。</p> <ul><li>include：包含，只处理 xxx 文件</li> <li>exclude：排除，除了 xxx 文件以外其他文件都处理</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ESLintWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token comment">// exclude: /node_modules/, // 排除node_modules代码不编译</span>
		<span class="token literal-property property">include</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 也可以用包含二者只用一个</span>
		<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ESLintWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定检查文件的根目录</span>
      <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 默认值 可省略</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpack开发一个-loader"><a href="#webpack开发一个-loader" class="header-anchor">#</a> webpack开发一个 loader</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
content 源文件的内容
map SourceMap 数据
meta 数据，可以是任何内容
 */</span>

<span class="token comment">// loaders/loader1.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loader1</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>使用和正常loader一致</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 也可以用包含二者只用一个</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;./loader/loader.js&quot;</span><span class="token punctuation">,</span><span class="token comment">//书写的loader假设放在loader文件夹下</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="webpack-loader分类"><a href="#webpack-loader分类" class="header-anchor">#</a> webpack loader分类</h3> <h4 id="同步-loader"><a href="#同步-loader" class="header-anchor">#</a> 同步 loader</h4> <p>两种模式：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>this.callback 方法则更灵活，因为它允许传递多个参数，而不仅仅是 content。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 传递map，让source-map不中断</span>
  <span class="token comment">// 传递meta，让下一个loader接收到其他参数</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 当调用 callback() 函数时，总是返回 undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="异步-loader"><a href="#异步-loader" class="header-anchor">#</a> 异步 loader</h4> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 进行异步操作</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注意： 同步loader中不能写异步代码，否则会报错</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>由于同步计算过于耗时，在 Node.js 这样的单线程环境下进行此操作并不是好的方案，我们建议尽可能地使你的 loader 异步化。但如果计算量很小，同步 loader 也是可以的。</p></blockquote> <h4 id="raw-loader"><a href="#raw-loader" class="header-anchor">#</a> raw loader</h4> <p>raw loader 需要在exports对象中添加raw属性为true</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//raw loaders接收到的content是Buffer数据</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&lt;Buffer 63 6f 6e 73 6f 6c 65 2e 6c 6f 67 28 27 68 65 6c 6c 6f 20 6d 61 69 6e 27 29&gt;</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 开启 Raw Loader</span>
</code></pre></div><h4 id="pitching-loader"><a href="#pitching-loader" class="header-anchor">#</a> Pitching Loader</h4> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 多了个配置pitch，可以利用它做熔断机制</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;do somethings&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>webpack 会先从左到右执行 loader 链中的每个 loader 上的 pitch 方法（如果有），然后再从右到左执行 loader 链中的每个 loader 上的普通 loader 方法。</p> <img src="/beifen/559.png"> <p>在这个过程中如果任何 pitch 有返回值，则 loader 链被阻断。webpack 会跳过后面所有的的 pitch 和 loader，<code>直接进入上一个 loader</code>。</p> <img src="/beifen/560.png"> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;normal loader 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;pitch loader 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;result&quot;</span><span class="token punctuation">;</span><span class="token comment">//就此熔断，返回上一个loader</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="loader部分api"><a href="#loader部分api" class="header-anchor">#</a> loader部分api</h4> <table><thead><tr><th>方法名</th> <th>含义</th> <th>用法</th></tr></thead> <tbody><tr><td>this.async</td> <td>异步回调 loader。返回 this.callback</td> <td>const callback = this.async()</td></tr> <tr><td>this.callback</td> <td>可以同步或者异步调用的并返回多个结果的函数</td> <td>this.callback(err, content, sourceMap?, meta?)</td></tr> <tr><td>this.getOptions(schema)</td> <td>获取 loader 的 options</td> <td>this.getOptions(schema)</td></tr> <tr><td>this.emitFile</td> <td>产生一个文件</td> <td>this.emitFile(name, content, sourceMap)</td></tr> <tr><td>this.utils.contextify</td> <td>返回一个相对路径</td> <td>this.utils.contextify(context, request)</td></tr> <tr><td>this.utils.absolutify</td> <td>返回一个绝对路径</td> <td>this.utils.absolutify(context, request)</td></tr></tbody></table> <h3 id="手写loader"><a href="#手写loader" class="header-anchor">#</a> 手写loader</h3> <ol><li>需求：清除console.log</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// loaders/clean-log-loader.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">cleanLogLoader</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 将console.log替换为空</span>
  <span class="token keyword">return</span> content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">console\.log\(.*\);?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>需求：添加banner</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./schema.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取loader的options，同时对options内容进行校验</span>
  <span class="token comment">// schema是options的校验规则（符合 JSON schema 规则）</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> prefix <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    /*
    * Author: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    */
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> \n </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>schema.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additionalProperties&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://www.cnblogs.com/terencezhou/p/10474617.html" target="_blank" rel="noopener noreferrer">JSON Schema<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="3"><li>需求：手写 babel-loader</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i @babel/core @babel/preset-env -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./schema.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用异步loader</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用babel对js代码进行编译</span>
  babel<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;array&quot;</span><span class="token comment">//数组，可考虑进一步扩展</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additionalProperties&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webpack配置</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;./loaders/babel-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//预设</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="4"><li>需求：file-loader,作用：将文件原封不动输出出去</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i loader-utils -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fileLoader</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 根据文件内容生产一个新的文件名称</span>
  <span class="token keyword">const</span> filename <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">interpolateName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;[hash].[ext]&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    content<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 输出文件</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 暴露出去，给js引用。</span>
  <span class="token comment">// 记得加上''</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// loader 解决的是二进制的内容</span>
<span class="token comment">// 图片是 Buffer 数据</span>
fileLoader<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> fileLoader<span class="token punctuation">;</span>
</code></pre></div><p>webpack配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;./loaders/file-loader.js&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;javascript/auto&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 解决图片重复打包问题,webpack5默认会去处理图片字体等文件，如果不需要这里需要配置type javascript/auto</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="5"><li>需求:style-loader,作用：动态创建 style 标签，插入 js 中的样式代码，使样式生效。</li></ol> <ul><li>直接使用style-loader，只能处理样式、不能处理样式中引入的其他资源</li> <li>使用css loader 借助css-loader解决样式中引入的其他资源的问题(解决依赖)，此时style-loader接收css-loader的返回值。但是css-loader暴露了一段js代码，style-loader需要执行js代码，得到返回值，再动态创建style标签，插入到页面上——不好操作</li> <li>借助pitch获取返回处理请求，利用行内loader解决</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">styleLoader</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

styleLoader<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">remainingRequest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
    remainingRequest: C:\Users\86176\Desktop\source\node_modules\css-loader\dist\cjs.js!C:\Users\86176\Desktop\source\src\css\index.css
      这里是inline loader用法，代表后面还有一个css-loader等待处理

    最终我们需要将remainingRequest中的路径转化成相对路径，webpack才能处理
      希望得到：../../node_modules/css-loader/dist/cjs.js!./index.css

    所以：需要将绝对路径转化成相对路径
    要求：
      1. 必须是相对路径
      2. 相对路径必须以 ./ 或 ../ 开头
      3. 相对路径的路径分隔符必须是 / ，不能是 \
  */</span>
  <span class="token keyword">const</span> relativeRequest <span class="token operator">=</span> remainingRequest
    <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">part</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 将路径转化为相对路径</span>
      <span class="token keyword">const</span> relativePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">contextify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">,</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> relativePath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/*
    !!${relativeRequest} 
      relativeRequest：../../node_modules/css-loader/dist/cjs.js!./index.css
      relativeRequest是inline loader用法，代表要处理的index.css资源, 使用css-loader处理
      !!代表禁用所有配置的loader，只使用inline loader。（也就是外面我们style-loader和css-loader）,它们被禁用了，只是用我们指定的inline loader，也就是css-loader

    import style from &quot;!!${relativeRequest}&quot;
      引入css-loader处理后的css文件
      为什么需要css-loader处理css文件，不是我们直接读取css文件使用呢？
      因为可能存在@import导入css语法，这些语法就要通过css-loader解析才能变成一个css文件，否则我们引入的css资源会缺少
    const styleEl = document.createElement('style')
      动态创建style标签
    styleEl.innerHTML = style
      将style标签内容设置为处理后的css代码
    document.head.appendChild(styleEl)
      添加到head中生效
  */</span>
  <span class="token keyword">const</span> script <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    import style from &quot;!!</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativeRequest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;
    const styleEl = document.createElement('style')
    styleEl.innerHTML = style
    document.head.appendChild(styleEl)
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token comment">// style-loader是第一个loader, 由于return导致熔断，所以其他loader不执行了（不管是normal还是pitch）</span>
  <span class="token keyword">return</span> script<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> styleLoader<span class="token punctuation">;</span>
</code></pre></div><!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">5/1/2023, 9:10:04 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webpack/" class="prev router-link-active">
         webpack
      </a></span> <span class="next"><a href="/webpack/003plugins.html">
         plugins
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.723af4b8.js" defer></script><script src="/assets/js/2.1a953b48.js" defer></script><script src="/assets/js/383.4930b603.js" defer></script><script src="/assets/js/10.174ca6d2.js" defer></script>
  </body>
</html>
