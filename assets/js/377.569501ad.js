(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{856:function(t,a,e){"use strict";e.r(a);var s=e(31),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"babel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" babel")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cnpm i --save-dev babel-loader @babel/core @babel/preset-env\n")])])]),e("p",[t._v("在webpack配置中配置规则")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\ttest"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\texclude"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tloader"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel-loader"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\toptions"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tpresets"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t\t\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("这种语法转换有局限性，因为低版本对于某些转换后的js还是不认识，如map,promise等")]),t._v(" "),e("h2",{attrs:{id:"polyfill"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#polyfill"}},[t._v("#")]),t._v(" polyfill")]),t._v(" "),e("p",[t._v("Polyfill是一个js库，主要抚平不同浏览器之间对js实现的差异。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cnpm i --save @babel/polyfill\n")])])]),e("p",[t._v("在原先的业务代码前加上"),e("code",[t._v("import '@babel/polyfill';")]),t._v("不过在最新版本的webpack中只要配置了"),e("code",[t._v("useBuiltIns:'usage'")]),t._v(", "),e("code",[t._v("import '@babel/polyfill';")]),t._v("会自动被引入")]),t._v(" "),e("p",[t._v("而且可以采用合适的方法来减少体积")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n\t\t\ttest: /\\.js$/,\n\t\t\texclude:/node_modules/,\n\t\t\tloader:"babel-loader",\n\t\t\toptions:{\n\t\t\t\tpresets:[["@babel/preset-env",\n\t\t\t\t\t{\n\t\t\t\t\t\ttargets: {\n\t\t\t\t\t\tchrome: "67",//目标浏览器版本\n\t\t\t\t\t\t\n\t\t\t\t\t  },\n\t\t\t\t\tuseBuiltIns:\'usage\',//使用了哪些ES6语法然后只转换用到的ES6\n\t\t\t\t\t}\n\t\t\t\t]]\n\t\t\t}\n\t\t},\t\n')])])]),e("h2",{attrs:{id:"另外一种方法-不污染全局"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#另外一种方法-不污染全局"}},[t._v("#")]),t._v(" 另外一种方法 不污染全局")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cnpm install --save-dev @babel/plugin-transform-runtime\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cnpm install --save @babel/runtime\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cnpm install --save @babel/runtime-corejs2\n//如果设置corejs为2时需要安装\n")])])]),e("h2",{attrs:{id:"babelrc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babelrc"}},[t._v("#")]),t._v(" .babelrc")]),t._v(" "),e("p",[t._v("可把options里的配置单独抽出来放在.babelrc 中")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n\t\t\ttest: /\\.js$/,\n\t\t\texclude:/node_modules/,\n\t\t\tloader:"babel-loader",\n\t\t\t\n\t\t},\t\n')])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n\t"plugins": [["@babel/plugin-transform-runtime",{\n\t\t "corejs": 2,\n\t\t"helpers": true,\n\t\t"regenerator": true,\n\t\t"useESModules": false\n\t}]]\n} \n\n')])])])])}),[],!1,null,null,null);a.default=n.exports}}]);