(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{449:function(t,s,a){"use strict";a.r(s);var n=a(16),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"cesium官方案例学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium官方案例学习"}},[t._v("#")]),t._v(" cesium官方案例学习")]),t._v(" "),s("h3",{attrs:{id:"cesium之构建viewer类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium之构建viewer类"}},[t._v("#")]),t._v(" cesium之构建viewer类")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" viewer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cesiumContainer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("infoBox")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 信息提示框")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("selectionIndicator")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 选中实体的指示器")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("shadows")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开启阴影")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("shouldAnimate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动画效果")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("orderIndependentTranslucency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//顺序无关透明,默认true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("terrain")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Terrain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromWorldTerrain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//地形")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"orderindependenttranslucency"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orderindependenttranslucency"}},[t._v("#")]),t._v(" orderIndependentTranslucency")]),t._v(" "),s("p",[t._v("orderIndependentTranslucency（顺序无关透明）是 Cesium 中一个重要的图形渲染特性，它允许在渲染半透明物体时，不受物体绘制顺序的影响，从而能够更真实地表现复杂的半透明效果。")]),t._v(" "),s("p",[t._v("orderIndependentTranslucency 技术通过一种称为“顺序无关透明”（OIT）的算法来解决这个问题。该算法能够在渲染半透明物体时，不考虑它们的绘制顺序，而是根据它们的深度信息和透明度信息进行正确的叠加和遮挡处理。这样，无论半透明物体的渲染顺序如何，最终得到的渲染结果都是一致的。")]),t._v(" "),s("h4",{attrs:{id:"trackedentity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trackedentity"}},[t._v("#")]),t._v(" trackedEntity")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trackedEntity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取或设置摄像机当前正在跟踪的Entity实例。")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-scene类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-scene类"}},[t._v("#")]),t._v(" cesium Scene类")]),t._v(" "),s("p",[t._v("Cesium.Scene是Cesium中所有3D图形对象的容器（HTML canvas），通常不是直接创建的，而是通过Viewer或CesiumWidget内部隐式创建的。")]),t._v(" "),s("h4",{attrs:{id:"scene-pick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scene-pick"}},[t._v("#")]),t._v(" scene.pick")]),t._v(" "),s("p",[t._v("它允许根据屏幕坐标（通常是鼠标点击或触摸事件的位置）来选择场景中的对象。这个方法返回一个 "),s("code",[t._v("Cesium.Entity、Cesium.Primitive")]),t._v(" 或其他可以在场景中被拾取的对象，如果在该位置没有找到任何对象，则返回 undefined。")]),t._v(" "),s("h4",{attrs:{id:"scene-picktranslucentdepth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scene-picktranslucentdepth"}},[t._v("#")]),t._v(" scene.pickTranslucentDepth")]),t._v(" "),s("p",[t._v("用于控制是否允许通过半透明对象进行拾取（picking）操作。拾取操作通常涉及用户通过鼠标或其他输入设备选择场景中的对象。")]),t._v(" "),s("p",[t._v("当 scene.pickTranslucentDepth 设置为 true 时，CesiumJS 将允许用户通过半透明（translucent）的对象来拾取被遮挡的对象。这意味着，即使一个对象被另一个半透明对象部分或完全覆盖，用户仍然可以选中被覆盖的对象。")]),t._v(" "),s("p",[t._v("默认情况下，scene.pickTranslucentDepth 是 false，这意呀着拾取操作将仅限于最顶层的可见对象，即不会被半透明对象后面的对象所干扰。")]),t._v(" "),s("h3",{attrs:{id:"cesium-camera类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-camera类"}},[t._v("#")]),t._v(" cesium Camera类")]),t._v(" "),s("p",[t._v("相机由位置、方向和视图截头体定义。")]),t._v(" "),s("h4",{attrs:{id:"flyto-将相机从当前位置飞到新位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flyto-将相机从当前位置飞到新位置"}},[t._v("#")]),t._v(" flyTo 将相机从当前位置飞到新位置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("flyTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//飞行时间")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" duration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//摄像机在世界坐标或自顶向下视图中可见的矩形中的最终位置（必须）")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("destination")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cartesian3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Rectangle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方向：两种配置方案")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("orientation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//表示相机视线的方向")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("direction")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cartesian3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一个单位向量，表示相机上方的方向")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("up")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cartesian3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//另外一种设置偏航 俯仰 旋转角度(需要转为弧度制)")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// orientation: {  ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// \theading: Cesium.Math.toRadians(175.0),  ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// \tpitch: Cesium.Math.toRadians(-35.0),  ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// \troll: 0.0  ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// },")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 控制如何在飞行持续时间内插值时间的缓动动画")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("easingFunction")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EasingFunction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("QUADRATIC_IN_OUT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium3dtileset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium3dtileset"}},[t._v("#")]),t._v(" Cesium3DTileset")]),t._v(" "),s("p",[t._v("是Cesium中用于加载和渲染3D瓦片集的主要类")]),t._v(" "),s("h4",{attrs:{id:"customshader-试验属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#customshader-试验属性"}},[t._v("#")]),t._v(" customShader [试验属性]")]),t._v(" "),s("p",[t._v("应用于图块集中所有图块的自定义着色器。仅用于使用模型的内容。将自定义着色器与Cesium3DTileStyle一起使用可能会导致未定义的行为。")]),t._v(" "),s("h4",{attrs:{id:"modelmatrix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modelmatrix"}},[t._v("#")]),t._v(" modelMatrix")]),t._v(" "),s("p",[t._v("一个4x4转换矩阵，用于转换整个图集。这个矩阵包含平移变换，用于将瓦片集移动到新的位置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" translation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cartesian3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.398521324920626")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.7823052871729486")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.7015244410592609")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("modelMatrix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Matrix4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromTranslation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("translation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"fromurl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fromurl"}},[t._v("#")]),t._v(" fromurl")]),t._v(" "),s("p",[t._v("通过给定的路径下载数据瓦片集")]),t._v(" "),s("blockquote",[s("p",[t._v("Cesium.Cesium3DTileset.fromUrl(url, options)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tileset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8002/tilesets/Seattle/tileset.json"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("primitives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"fromionassetid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fromionassetid"}},[t._v("#")]),t._v(" fromIonAssetId")]),t._v(" "),s("blockquote",[s("p",[t._v("Cesium.Cesium3DTileset.fromIonAssetId(assetId, options)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用于流式传输大量异构3D地理空间数据集。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" terrainTileset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromIonAssetId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2389063")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nviewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("primitives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("terrainTileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"cesium3dtileset的一些配置项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium3dtileset的一些配置项"}},[t._v("#")]),t._v(" Cesium3DTileset的一些配置项")]),t._v(" "),s("blockquote",[s("p",[t._v("Cesium3DTileset.ConstructorOptions")])]),t._v(" "),s("ul",[s("li",[t._v("maximumScreenSpaceError:简称"),s("code",[t._v("MSSE")]),t._v("定义了瓦片在屏幕上渲染时的最大允许误差。这个误差是基于屏幕像素来衡量的，它决定了瓦片被细分（即加载更高LOD级别的瓦片）的精度。当MSSE值较大时，Cesium会尝试加载较少、更粗略的瓦片来减少内存使用和渲染时间，从而可能提高性能。相反，"),s("code",[t._v("当MSSE值较小时，Cesium会加载更多、更详细的瓦片来确保更高的视觉质量，但这可能会增加内存使用和渲染时间。")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" buildingsTileset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromIonAssetId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2389064")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    \n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("maximumScreenSpaceError")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-cesium3dtilestyle类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-cesium3dtilestyle类"}},[t._v("#")]),t._v(" cesium Cesium3DTileStyle类")]),t._v(" "),s("p",[t._v("应用于Cesium3DTileset的样式。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("tileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileStyle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("color")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("conditions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${Height} >= 100'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color(\"purple\", 0.5)'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${Height} >= 50'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color(\"red\")'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'true'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color(\"blue\")'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("show")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${Height} > 0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("description")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"Building id ${id} has height ${Height}.\"'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" buildingStyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileStyle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("conditions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${HGT} !== undefined && ${HGT} < 5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('#f5fd2d')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${HGT} !== undefined && ${HGT} >= 5 && ${HGT} < 10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('#d3a34a')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${HGT} !== undefined && ${HGT} >= 10 && ${HGT} < 15"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('#947e75')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${HGT} !== undefined && ${HGT} >= 15 && ${HGT} < 20"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('#565a9f')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${HGT} !== undefined && ${HGT} > 20"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('#223bc3')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"color('white')\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-cesium3dtilefeature类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-cesium3dtilefeature类"}},[t._v("#")]),t._v(" cesium Cesium3DTileFeature类")]),t._v(" "),s("p",[t._v("Cesium3DTileset的一个功能。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检测是否是Cesium3DTile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" featurePicked "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" feature "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileFeature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" featurePicked "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" feature "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileFeature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检测是否有HGT属性")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isBuildingFeature "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" featurePicked "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" feature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HGT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" feature "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("movement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("endPosition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" featurePicked "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" feature "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cesium3DTileFeature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isTerrainFeature "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  featurePicked "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" feature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"substrates"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isTerrainFeature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取feature中的name属性值")]),t._v("\n\tfeature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取特征的所有属性ID ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" propertyIds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" feature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPropertyIds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-terrain类-地形"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-terrain类-地形"}},[t._v("#")]),t._v(" cesium Terrain类 地形")]),t._v(" "),s("p",[t._v("用于管理地形提供程序的异步操作的助手。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Terrain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("terrainProviderPromise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" viewer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cesiumContainer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("terrain")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Terrain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CesiumTerrainProvider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://myTestTerrain.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Handle loading events")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" terrain "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Terrain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CesiumTerrainProvider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://myTestTerrain.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nscene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTerrain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("terrain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nterrain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("provider")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enableLighting "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  terrain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errorEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Encountered an error while loading terrain tiles! ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nterrain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errorEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Encountered an error while creating terrain! ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-entity实体类的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-entity实体类的方法"}},[t._v("#")]),t._v(" cesium Entity实体类的方法")]),t._v(" "),s("h4",{attrs:{id:"添加实体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加实体"}},[t._v("#")]),t._v(" 添加实体")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hpr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HeadingPitchRoll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("heading"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pitch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" roll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" orientation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transforms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("headingPitchRollQuaternion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    hpr\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义了实体的位置。position变量是一个Cesium的Cartesian3对象，用于描述实体在三维空间中的位置。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("position")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//定义了实体的方向。orientation变量是一个Cesium的Quaternion对象，用于描述实体的旋转。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("orientation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" orientation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uri")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模型在屏幕上显示时的最小像素尺寸")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("minimumPixelSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义了模型可以缩放的最大比例。如果模型被缩放到超过这个比例，它将不再继续放大。")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("maximumScale")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// color: XXX,")]),t._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// colorBlendMode: XXX,")]),t._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// colorBlendAmount: XXX,")]),t._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// silhouetteColor:XXX,")]),t._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// silhouetteSize: XXX,")]),t._v("\n\t\t\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"移除全部实体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除全部实体"}},[t._v("#")]),t._v(" 移除全部实体")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entities"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"实体model的属性和方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实体model的属性和方法"}},[t._v("#")]),t._v(" 实体model的属性和方法")]),t._v(" "),s("ol",[s("li",[t._v("entity为某个通过url添加的模型，可以修改模型的color"),s("code",[t._v("颜色")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getColor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("colorName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alpha")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//colorName:颜色名称如 YELLOW GREEN")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("colorName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromAlpha")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alpha"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nentity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getColor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alpha"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("修改模型colorBlendMode"),s("code",[t._v("颜色混合模式")]),t._v(" ,定义用于在目标颜色和基元的源颜色之间混合的不同模式。")])]),t._v(" "),s("ul",[s("li",[t._v("HIGHLIGHT：当内部材料的透明度（alpha）小于1.0时，在其上方显示外部材料颜色（blendingColor）。这种模式通常用于高亮显示某些部分。")]),t._v(" "),s("li",[t._v("MIX：对内部材料和外部材料进行平均值混合。这意味着两种颜色的RGB值将按照一定比例进行混合，生成新的颜色。")]),t._v(" "),s("li",[t._v("REPLACE：用外部材料颜色完全替换内部材料颜色。这是一种简单的替换模式，不考虑内部材料的颜色。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colorBlendMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" colorBlendMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("当colorBlendMode为 "),s("strong",[t._v("MIX")]),t._v(" 时才生效的属性，用于确定颜色强度的值。0.0的值会导致模型呈现的颜色，而1.0的值会导致纯色，中间的任何值都会导致两者的混合。 ( Default Value: 0.5 )")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colorBlendAmount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("设置模型的轮廓颜色"),s("code",[t._v("silhouetteColor")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("silhouetteColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getColor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  viewModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("silhouetteAlpha\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("设置轮廓的大小(像素)"),s("code",[t._v("silhouetteSize")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("silhouetteSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-screenspaceeventhandler类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-screenspaceeventhandler类"}},[t._v("#")]),t._v(" cesium ScreenSpaceEventHandler类")]),t._v(" "),s("p",[t._v("处理用户输入事件。可以添加自定义函数以在用户输入输入时执行。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ScreenSpaceEventHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-light类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-light类"}},[t._v("#")]),t._v(" cesium Light类")]),t._v(" "),s("p",[t._v("光源。这种类型描述了一个接口，通常不直接实例化。颜色和强度一起产生高动态范围的光色。强度也可以单独用于在不改变色调的情况下使光变暗或变亮。")]),t._v(" "),s("ul",[s("li",[t._v("color")]),t._v(" "),s("li",[t._v("intensity：number,光的强度")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" scene "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整光照强度")]),t._v("\nscene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("light"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intensity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-lightingmodel光照模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-lightingmodel光照模型"}},[t._v("#")]),t._v(" cesium LightingModel光照模型")]),t._v(" "),s("p",[t._v("Cesium.LightingModel 是 CesiumJS 中用于定义着色器光照模型的一个枚举类型。")]),t._v(" "),s("p",[t._v("Cesium.LightingModel 主要包括以下几种类型：")]),t._v(" "),s("ol",[s("li",[t._v("Cesium.LightingModel.PBR（基于物理的渲染）：\n"),s("ul",[s("li",[t._v("基于物理的光照模型，提供更真实的光照和材质效果。")]),t._v(" "),s("li",[t._v("适用于需要高度真实感的场景，如建筑、车辆、人物等复杂模型的渲染。")])])]),t._v(" "),s("li",[t._v("Cesium.LightingModel.UNLIT（无光照）：\n"),s("ul",[s("li",[t._v("不应用任何光照效果，物体的颜色完全由材质决定。")]),t._v(" "),s("li",[t._v("适用于不需要光照效果的场景，或者作为自定义光照效果的起点。")])])])]),t._v(" "),s("h3",{attrs:{id:"cesium-cartesian3类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-cartesian3类"}},[t._v("#")]),t._v(" cesium Cartesian3类")]),t._v(" "),s("h4",{attrs:{id:"通过单个经纬度创建笛卡尔坐标-cartesian3-fromdegrees"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过单个经纬度创建笛卡尔坐标-cartesian3-fromdegrees"}},[t._v("#")]),t._v(" 通过单个经纬度创建笛卡尔坐标 Cartesian3.fromDegrees")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" position "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cartesian3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromDegrees")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123.0744619")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("44.0503706")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    height\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"通过笛卡尔坐标直接创建一个cartesian3对象-cartesian3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过笛卡尔坐标直接创建一个cartesian3对象-cartesian3"}},[t._v("#")]),t._v(" 通过笛卡尔坐标直接创建一个Cartesian3对象 Cartesian3")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cartesian3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4397999.822774582")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4404502.67774069")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1397782.4709840622")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"分量差-cartesian3-subtract-left-right-result"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分量差-cartesian3-subtract-left-right-result"}},[t._v("#")]),t._v(" 分量差 Cartesian3.subtract(left, right, result)")]),t._v(" "),s("p",[t._v("计算两个笛卡尔的分量差。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("left")]),t._v(" "),s("td",[t._v("Cartesian3")]),t._v(" "),s("td",[t._v("第一个笛卡尔。")])]),t._v(" "),s("tr",[s("td",[t._v("right")]),t._v(" "),s("td",[t._v("Cartesian3")]),t._v(" "),s("td",[t._v("第二个笛卡尔。")])]),t._v(" "),s("tr",[s("td",[t._v("result")]),t._v(" "),s("td",[t._v("Cartesian3")]),t._v(" "),s("td",[t._v("存储结果的对象。")])])])]),t._v(" "),s("h3",{attrs:{id:"cesium-headingpitchroll类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-headingpitchroll类"}},[t._v("#")]),t._v(" cesium HeadingPitchRoll类")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" heading "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRadians")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//偏航角")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pitch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRadians")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//俯仰角")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" roll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRadians")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//翻滚角")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hpr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HeadingPitchRoll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("heading"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pitch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" roll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" orientation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transforms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("headingPitchRollQuaternion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    hpr\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium全局属性和方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium全局属性和方法"}},[t._v("#")]),t._v(" cesium全局属性和方法")]),t._v(" "),s("h4",{attrs:{id:"cesium-defined"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-defined"}},[t._v("#")]),t._v(" Cesium.defined")]),t._v(" "),s("p",[t._v("如果定义了对象，则返回true，否则返回false。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" aa"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//false")]),t._v("\n")])])]),s("h4",{attrs:{id:"cesium-defaultvalue-a-b"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-defaultvalue-a-b"}},[t._v("#")]),t._v(" Cesium.defaultValue(a, b)")]),t._v(" "),s("p",[t._v("第一个参数a是要检查的值，第二个参数b是当a为undefined或null时要返回的默认值。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" propertyType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tproperty"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("componentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tproperty"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-transforms类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-transforms类"}},[t._v("#")]),t._v(" cesium Transforms类")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" orientation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transforms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("headingPitchRollQuaternion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        hpr\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-juliandate类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-juliandate类"}},[t._v("#")]),t._v(" cesium JulianDate类")]),t._v(" "),s("p",[t._v("表示天文儒略日期")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 viewer.clock.currentTime 设置为一个特定的时间点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这个时间点是通过 ISO 8601 格式的字符串来指定的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ISO 8601 是一种国际标准的时间表示方法，它包括了日期和时间，以及可选的时区信息。")]),t._v("\nviewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTime "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("JulianDate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromIso8601")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("  \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-11-09T07:27:37.016064475348684937Z"')]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-glsl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-glsl"}},[t._v("#")]),t._v(" cesium glsl")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("中文")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("attribute")]),t._v(" "),s("td",[t._v("属性")]),t._v(" "),s("td",[t._v("主要是顶点着色器用来从缓冲(Buffer)中获取数据")])]),t._v(" "),s("tr",[s("td",[t._v("uniform")]),t._v(" "),s("td",[t._v("统一值")]),t._v(" "),s("td",[t._v("在每一次渲染中全局有效且不变的值")])]),t._v(" "),s("tr",[s("td",[t._v("texture")]),t._v(" "),s("td",[t._v("纹理")]),t._v(" "),s("td",[t._v("一个数据序列，大多数情况下可以理解为图像数据")])]),t._v(" "),s("tr",[s("td",[t._v("varying")]),t._v(" "),s("td",[t._v("可变量")]),t._v(" "),s("td",[t._v("顶点着色器向片元着色器传值的方式，并且会以插值的形式传递")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("函数名(参数)")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("pow(x,y)")]),t._v(" "),s("td",[t._v("x的y次方。如果x小于0，结果是未定义的。同样，如果x=0并且y<=0，结果也是未定义的。")])]),t._v(" "),s("tr",[s("td",[t._v("sqrt(x)")]),t._v(" "),s("td",[t._v("计算x的开方。如果x小于0，结果是未定义的。")])]),t._v(" "),s("tr",[s("td",[t._v("fract(x)")]),t._v(" "),s("td",[t._v("返回x-floor(x)，即返回x的小数部分")])]),t._v(" "),s("tr",[s("td",[t._v("step(edge, x)")]),t._v(" "),s("td",[t._v("如果x < edge，返回0.0，否则返回1.0")])]),t._v(" "),s("tr",[s("td",[t._v("smoothstep(edge0, edge1, x)")]),t._v(" "),s("td",[t._v("如果x <= edge0，返回0.0 ；如果x >= edge1 返回1.0；如果edge0 < x < edge1，则执行0~1之间的平滑埃尔米特差值。如果edge0 >= edge1，结果是未定义的。")])]),t._v(" "),s("tr",[s("td",[t._v("distance(a,b)")]),t._v(" "),s("td",[t._v("计算a,b两点间的距离，二维三维都可以")])])])]),t._v(" "),s("p",[t._v("cesium所需的材质shader具体来说就是需要写一个 "),s("code",[t._v("czm_getMaterial")]),t._v(" 函数。然后这个函数返回一个"),s("code",[t._v("czm_material")]),t._v("类型的结构体(结构体可以类比为JS中的对象)。这个结构体最好通过 "),s("code",[t._v("czm_getDefaultMaterial")]),t._v(" 函数获得，再在此基础上修改。")]),t._v(" "),s("p",[t._v("可以在这个函数上方声明一些uniform来从JS中获取一些数据，比如这个最简单的示例就从JS中获取颜色值，并赋予 czm_material 类型的结构体的diffuse属性。")]),t._v(" "),s("div",{staticClass:"language-glsl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-glsl"}},[s("code",[t._v("czm_material "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("czm_getMaterial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("czm_materialInput materialInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("czm_getDefaultMaterial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("materialInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("czm_materialInput 结构体说明")])]),t._v(" "),s("p",[s("code",[t._v("czm_materialInput")]),t._v(" 类型的结构体是 "),s("code",[t._v("czm_getMaterial")]),t._v(" 函数的参数，cesium会在几何体的片元着色器中调用 "),s("code",[t._v("czm_getMaterial")]),t._v(" ，并将参数传递给该函数。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("s")]),t._v(" "),s("td",[t._v("float")]),t._v(" "),s("td",[t._v("一维纹理坐标")])]),t._v(" "),s("tr",[s("td",[t._v("st")]),t._v(" "),s("td",[t._v("vec2")]),t._v(" "),s("td",[t._v("二维纹理坐标")])]),t._v(" "),s("tr",[s("td",[t._v("str")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("三维纹理坐标")])]),t._v(" "),s("tr",[s("td",[t._v("normalEC")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("眼坐标系中的未扰动表面法线")])]),t._v(" "),s("tr",[s("td",[t._v("tangentToEyeMatrix")]),t._v(" "),s("td",[t._v("mat3")]),t._v(" "),s("td",[t._v("将切线空间法线转换为眼空间的矩阵")])]),t._v(" "),s("tr",[s("td",[t._v("positionToEyeEC")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("从片段到眼睛的向量（在眼坐标系中）。其大小为片段到眼睛的距离（以米为单位）")])])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("czm_material")]),t._v(" 结构体说明:保存可用于照明的材质信息。由所有 czm_getMaterial 函数返回。")])]),t._v(" "),s("p",[t._v("可以了解到该结构体不仅仅保存着材质信息，并且该结构体还可以被用于光照(cesium使用的冯氏光照模型第二个参数就是该结构体)。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("diffuse")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("向各个方向均匀散射的入射光，默认值vec3(0.0)。（漫反射颜色）")])]),t._v(" "),s("tr",[s("td",[t._v("specular")]),t._v(" "),s("td",[t._v("float")]),t._v(" "),s("td",[t._v("沿单个方向反射的入射光的强度，默认值0.0。（镜面高光强度）")])]),t._v(" "),s("tr",[s("td",[t._v("shininess")]),t._v(" "),s("td",[t._v("float")]),t._v(" "),s("td",[t._v("镜面反射的清晰度。值越高，创建的镜面高光越小、越聚焦。默认值1.0")])]),t._v(" "),s("tr",[s("td",[t._v("normal")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("表面的法线在眼睛坐标中。它用于法线贴图等效果。默认值为曲面的未修改法线。（就是normalEC）")])]),t._v(" "),s("tr",[s("td",[t._v("emission")]),t._v(" "),s("td",[t._v("vec3")]),t._v(" "),s("td",[t._v("材质在所有方向上均匀发射的光。默认值为 vec3(0.0)，它不发光。")])]),t._v(" "),s("tr",[s("td",[t._v("alpha")]),t._v(" "),s("td",[t._v("float")]),t._v(" "),s("td",[t._v("此材质的不透明度。0.0 是完全透明的；1.0 是完全不透明的。默认值1.0")])])])]),t._v(" "),s("ul",[s("li",[t._v("渐变：渐变的产生大多需要借助纹理坐标，在webgl中，cesium纹理坐标设置大多都是完全覆盖面的。假如绘制了一个正方形，那左下角为纹理坐标的原点，右上角坐标则为(1，1)。不管实际上物体是正方形还是长方形还是什么形状，纹理坐标右上角就是(1，1)。利用好这一点就可以产生渐变效果了")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shaderSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n\tuniform vec4 color;\n \n\tczm_material czm_getMaterial(czm_materialInput materialInput)\n\t{\n\t\tvec4 outColor = color;\n\t\tczm_material material = czm_getDefaultMaterial(materialInput);\n\t\n\t\tvec2 st = materialInput.st;\n\t\toutColor.r = st.s;\n\t\t// outColor.r = st.t;\n\t\n\t\tmaterial.diffuse = czm_gammaCorrect(outColor.rgb);\n\t\tmaterial.alpha = outColor.a;\n\t\treturn material;\n\t}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("p",[t._v("因为纹理坐标都是0-1的，而rgba四个值也都是0-1之间的，如果想要在横坐标生成3个渐变效果，是不是应该需要3个0-1之间的值，这怎么得到呢。很简单，只需要将st的s乘以3，那么s就在0-3之间波动了，这时候再取其小数部分，因为小数部分就是在 [0 - 1) 之间的，这样就得到三个0-1了。可以将需要生成的数量通过uniform来传递(不要忘记在js中传递uniform值)。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shaderSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n\tuniform vec4 color;\nuniform float gradationNumber;\n \nczm_material czm_getMaterial(czm_materialInput materialInput) {\n\tvec4 outColor = color;\n\tczm_material material = czm_getDefaultMaterial(materialInput);\n \n\tvec2 st = materialInput.st;\n\t// outColor.r = st.s;\n\t// outColor.r = st.t;\n\t// outColor.a = st.s;\n\t// outColor.a = st.t;\n\toutColor.a = fract(st.s * gradationNumber);\n \n\tmaterial.diffuse = czm_gammaCorrect(outColor.rgb);\n\tmaterial.alpha = outColor.a;\n\treturn material;\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("让线动起来:cesium中的材质动画离不开cesium的一个自动uniform，那就是czm_frameNumber，这个uniform表示当前处于cesium的第几帧绘制，从0开始，每次绘制cesium都会将其递增1。")])]),t._v(" "),s("p",[t._v("现在假设cesium帧率为60，那么使用 czm_frameNumber / 60.0 。这样得到的结果如果只看整数部分那就是每秒钟递增1，只看小数部分那就是一直在 [0，1) 之间循环，循环时间为1秒。那假如我们将这个结果赋予alpha值，是不是就是物体透明的不断地从0-1变化，循环时间为1秒。那怎么通过这个让线动起来呢，我们知道纹理坐标的值也是0-1之间的，那如果我们将这个值赋予作为线的位置呢(我们之前线的位置为0.5)，让我们试试看吧。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 流动线材质属性\n */")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Property"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defined"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createPropertyDescriptor "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cesium"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LineFlowMaterialProperty")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//。。。。。。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nMaterial"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialProperty "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LineFlowMaterialProperty"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nMaterial"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LineFlowMaterialType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nMaterial"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n  czm_material czm_getMaterial(czm_materialInput materialInput){\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\t//...\n\treturn material\n  }\n  ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nMaterial"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_materialCache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addMaterial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fabric")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uniforms")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//......")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LineFlowMaterialSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("getType和getValue方法需要定义不可缺失，否则无法呈现")])]),t._v(" "),s("h3",{attrs:{id:"cesium-customshader自定义着色器类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-customshader自定义着色器类"}},[t._v("#")]),t._v(" cesium CustomShader自定义着色器类")]),t._v(" "),s("Img",{attrs:{src:"/beifen/768.png"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" emptyFragmentShader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unlitShader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CustomShader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lightingModel")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LightingModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNLIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fragmentShaderText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" emptyFragmentShader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("fragmentShaderText")]),t._v("：作为GLSL代码字符串的自定义片段着色器。它必须包含一个名为片段主的GLSL函数。有关预期签名的示例，请参阅示例。如果未指定，自定义片段着色器步骤将在计算片段着色器中跳过。\n"),s("ul",[s("li",[s("code",[t._v("FragmentInput")]),t._v(": 这是一个结构体（或类似结构体的类型），它包含了从顶点着色器传递到片段着色器的各种数据。这些数据通常包括"),s("code",[t._v("顶点位置、法线、纹理坐标")]),t._v("等，以及CesiumJS自动注入的一些额外信息，如"),s("code",[t._v("颜色、光照")]),t._v("信息等。")]),t._v(" "),s("li",[s("code",[t._v("fsInput")]),t._v(": 这是传递给 fragmentMain 函数的 FragmentInput 类型变量的名称。可以通过 fsInput 访问传递给片段着色器的所有数据。")]),t._v(" "),s("li",[s("code",[t._v("inout")]),t._v(": 这是GLSL中的一个关键字，用于指定函数参数是输入-输出参数。这意味着可以在函数内部"),s("code",[t._v("修改")]),t._v("这个参数的值，并且修改后的值将在函数返回后保留。这对于着色器来说非常有用，可以根据计算的结果更新材质属性。")]),t._v(" "),s("li",[s("code",[t._v("czm_modelMaterial")]),t._v(": 这是CesiumJS定义的一个结构体类型，用于表示材质的属性。它包含了多个字段，如"),s("code",[t._v("漫反射颜色（diffuse）、镜面反射颜色（specular）、光泽度（shininess）、透明度（alpha）")]),t._v("等。")]),t._v(" "),s("li",[s("code",[t._v("material")]),t._v(": 这是传递给 fragmentMain 函数的 czm_modelMaterial 类型变量的名称（带有 inout 修饰符）。可以通过 material 访问和修改材质的属性。")])])])]),t._v(" "),s("h4",{attrs:{id:"cesium-fragmentmain函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-fragmentmain函数"}},[t._v("#")]),t._v(" cesium fragmentMain函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" customShaderColor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CustomShader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fragmentShaderText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n\t{\n\t\tmaterial.diffuse = fsInput.metadata.color.rgb;\n\t\tfloat transparency = 1.0 - fsInput.metadata.color.a;\n\n\t\t// To mimic light scattering, use exponential decay\n\t\tfloat thickness = fsInput.voxel.travelDistance * 16.0;\n\t\tmaterial.alpha = 1.0 - pow(transparency, thickness);\n\t}")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" customShaderWhite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CustomShader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fragmentShaderText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n\t{\n\t\tmaterial.diffuse = vec3(1.0);\n\t\tmaterial.alpha = 1.0;\n\t}")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPrimitive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customShader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" modelMatrix")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("primitives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" voxelPrimitive "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" viewer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("primitives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("VoxelPrimitive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("provider")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("customShader")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" customShader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("modelMatrix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" modelMatrix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// createPrimitive自定义函数，非官方函数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" primitive "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPrimitive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tprovider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tcustomShaderColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tmodelMatrix\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("normalize 函数用于归一化向量")]),t._v(" "),s("li",[t._v("max 函数用于取两个值中的较大值")]),t._v(" "),s("li",[t._v("dot 函数用于计算两个向量的点积（在点积运算中，第一个向量投影到第二个向量上（这里，向量的顺序是不重要的，点积运算是可交换的），然后通过除以它们的标量长度来“标准化”。这样，这个分数一定是小于等于1的，可以简单地转化成一个角度值。）")]),t._v(" "),s("li",[t._v("int tileIndex = fsInput.voxel.tileIndex 和 int sampleIndex = fsInput.voxel.sampleIndex：获取体素的瓦片索引和采样索引。int 表示整数类型。")]),t._v(" "),s("li",[t._v("mix(cellColor, vec3(1.0), 0.5) 函数将计算得到的体素颜色和白色进行混合")]),t._v(" "),s("li",[t._v("Cesium.UniformType.INT（整数类型）")])]),t._v(" "),s("img",{attrs:{src:"/beifen/752.png"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" customShader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CustomShader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fragmentShaderText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n        {\n\t\t  // 归一化\n          vec3 voxelNormal = normalize(czm_normal * fsInput.voxel.surfaceNormal);\n          float diffuse = max(0.0, dot(voxelNormal, czm_lightDirectionEC));\n          float lighting = 0.5 + 0.5 * diffuse;\n\n          int tileIndex = fsInput.voxel.tileIndex;\n          int sampleIndex = fsInput.voxel.sampleIndex;\n\t\t  //根据元数据的颜色和光照强度计算体素颜色。\n          vec3 cellColor = fsInput.metadata.color.rgb * lighting;\n          if (tileIndex == u_selectedTile && sampleIndex == u_selectedSample) {\n            material.diffuse = mix(cellColor, vec3(1.0), 0.5);\n            material.alpha = fsInput.metadata.color.a;\n          } else {\n            material.diffuse = cellColor;\n            material.alpha = fsInput.metadata.color.a;\n          }\n        }")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uniforms")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("u_selectedTile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UniformType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("u_selectedSample")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UniformType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h4",{attrs:{id:"cesium-fsinput属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-fsinput属性"}},[t._v("#")]),t._v(" cesium fsInput属性")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源码中的fsInput")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// FragmentInput and initializeInputStruct() are dynamically generated in JS, ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// see CustomShaderPipelineStage.js")]),t._v("\nFragmentInput fsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeInputStruct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attributes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("featureIds "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" featureIds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 数组")]),t._v("\nfsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 元数据")]),t._v("\nfsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadataClass "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metadataClass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nfsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadataStatistics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metadataStatistics"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fragmentMain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fsInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-自定义样式材质方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-自定义样式材质方案"}},[t._v("#")]),t._v(" cesium 自定义样式材质方案")]),t._v(" "),s("img",{attrs:{src:"/beifen/753.png"}}),t._v(" "),s("img",{attrs:{src:"/beifen/769.png"}}),t._v(" "),s("img",{attrs:{src:"/beifen/770.png"}}),t._v(" "),s("img",{attrs:{src:"/beifen/771.png"}}),t._v(" "),s("h3",{attrs:{id:"cesium-material类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-material类"}},[t._v("#")]),t._v(" cesium Material类")]),t._v(" "),s("p",[t._v("材质通过漫反射、高光、法线、发射和alpha分量的组合来定义表面外观。这些值使用名为Fabric的JSON模式指定，该模式在幕后被解析和组装成glsl着色器代码。")]),t._v(" "),s("h3",{attrs:{id:"cesium-czm-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-czm-属性"}},[t._v("#")]),t._v(" cesium czm_属性")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[t._v("struct czm_modelMaterial "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    vec4 baseColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 diffuse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    float alpha"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 specular"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    float roughness"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 normalEC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    float occlusion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 emissive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n#ifdef "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USE_SPECULAR")]),t._v("\n    float specularWeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n#endif\n#ifdef "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USE_ANISOTROPY")]),t._v("\n    vec3 anisotropicT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 anisotropicB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    float anisotropyStrength"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n#endif\n#ifdef "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USE_CLEARCOAT")]),t._v("\n    float clearcoatFactor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    float clearcoatRoughness"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    vec3 clearcoatNormal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Add clearcoatF0 when KHR_materials_ior is implemented")]),t._v("\n#endif\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",[s("li",[t._v("czm_modelMaterial：结构体定义了一个用于3D模型材质的属性集合，这些属性通常用于计算机图形学中，以模拟物体表面的外观和光照效果。\n"),s("ul",[s("li",[t._v("baseColor (vec4): 基础颜色，使用四维向量（vec4）表示，其中前三个分量（RGB）代表颜色，第四个分量（A）代表透明度（Alpha）。这个属性定义了材质的基本颜色。")]),t._v(" "),s("li",[s("code",[t._v("diffuse")]),t._v(" (vec3): 漫反射颜色，使用三维向量（vec3）表示，仅包含RGB三个分量。漫反射是光线照射到粗糙表面后向各个方向散射的现象，这个属性定义了材质在漫反射作用下的颜色。")]),t._v(" "),s("li",[s("code",[t._v("alpha")]),t._v(" (float): 透明度，使用浮点数（float）表示。这个属性进一步控制材质的透明度，虽然baseColor的第四个分量也包含了透明度信息，但这里的alpha可能用于其他目的，如单独的透明度控制或特殊效果。")]),t._v(" "),s("li",[s("code",[t._v("specular")]),t._v(" (vec3): 镜面反射颜色，使用三维向量（vec3）表示。镜面反射是光线照射到光滑表面后按照特定角度反射的现象，这个属性定义了材质在镜面反射作用下的颜色。")]),t._v(" "),s("li",[t._v("roughness (float): 粗糙度，使用浮点数（float）表示。这个属性决定了材质表面的粗糙程度，影响镜面反射的效果。粗糙度越高，反射越分散，镜面效果越弱。")]),t._v(" "),s("li",[t._v("normalEC (vec3): 切空间法线，使用三维向量（vec3）表示，并且是在眼坐标系（Eye Coordinate System）下的。这个属性用于定义材质表面的微观几何结构，影响光照和阴影的计算。")]),t._v(" "),s("li",[t._v("occlusion (float): 环境光遮蔽（AO, Ambient Occlusion），使用浮点数（float）表示。这个属性模拟了由于物体表面几何形状造成的光线无法到达的区域，增强模型的深度和真实感。")]),t._v(" "),s("li",[t._v("emissive (vec3): 自发光颜色，使用三维向量（vec3）表示。这个属性定义了材质自身发光的颜色，不受环境光照影响，常用于模拟光源或发光物体。")])])])]),t._v(" "),s("h3",{attrs:{id:"cesium-color类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-color类"}},[t._v("#")]),t._v(" cesium Color类")]),t._v(" "),s("p",[t._v("使用红色、绿色、蓝色和alpha值指定，范围从0（无强度）到1.0（全强度）。")]),t._v(" "),s("h4",{attrs:{id:"color-fromalpha基本颜色设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#color-fromalpha基本颜色设置"}},[t._v("#")]),t._v(" Color.fromAlpha基本颜色设置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GREEN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置颜色方式")]),t._v("\n")])])]),s("h4",{attrs:{id:"添加透明度设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加透明度设置"}},[t._v("#")]),t._v(" 添加透明度设置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("colorName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromAlpha")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alpha"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"设置自定义值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置自定义值"}},[t._v("#")]),t._v(" 设置自定义值")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不传参的话默认(1,1,1,1)")]),t._v("\n")])])]),s("h4",{attrs:{id:"color-clone-克隆"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#color-clone-克隆"}},[t._v("#")]),t._v(" Color.clone 克隆")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 把feature的color克隆给highlighted.originalColor")]),t._v("\nCesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" highlighted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("originalColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-math类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-math类"}},[t._v("#")]),t._v(" cesium Math类")]),t._v(" "),s("ol",[s("li",[t._v("Math.toRadians：角度转弧度")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" heading "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRadians")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("135")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"cesium-easingfunction缓动动画"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-easingfunction缓动动画"}},[t._v("#")]),t._v(" cesium EasingFunction缓动动画")]),t._v(" "),s("p",[t._v("简化与TweenCollection一起使用的函数。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Cesium.EasingFunction.QUADRATIC_IN_OUT")]),t._v(":开始时加速，结束时减速，形成一个平滑的过渡效果")])]),t._v(" "),s("h3",{attrs:{id:"cesium-uniformtype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cesium-uniformtype"}},[t._v("#")]),t._v(" cesium UniformType")]),t._v(" "),s("p",[t._v("基本GLSL统一类型的枚举。这些可以与CustomShader一起使用来声明用户定义的Uniform。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("FLOAT")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A single floating point value.")])]),t._v(" "),s("tr",[s("td",[t._v("VEC2")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 2 floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("VEC3")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 3 floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("VEC4")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 4 floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("INT")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A single integer value")])]),t._v(" "),s("tr",[s("td",[t._v("INT_VEC2")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 2 integer values.")])]),t._v(" "),s("tr",[s("td",[t._v("INT_VEC3")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 3 integer values.")])]),t._v(" "),s("tr",[s("td",[t._v("INT_VEC4")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 4 integer values.")])]),t._v(" "),s("tr",[s("td",[t._v("BOOL")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A single boolean value.")])]),t._v(" "),s("tr",[s("td",[t._v("BOOL_VEC2")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 2 boolean values.")])]),t._v(" "),s("tr",[s("td",[t._v("BOOL_VEC3")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 3 boolean values.")])]),t._v(" "),s("tr",[s("td",[t._v("BOOL_VEC4")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A vector of 4 boolean values.")])]),t._v(" "),s("tr",[s("td",[t._v("MAT2")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A 2x2 matrix of floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("MAT3")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A 3x3 matrix of floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("MAT4")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A 3x3 matrix of floating point values.")])]),t._v(" "),s("tr",[s("td",[t._v("SAMPLER_2D")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("A 2D sampled texture.")])]),t._v(" "),s("tr",[s("td",[t._v("SAMPLER_CUBE")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOTHING_SELECTED")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" selectFeatureShader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CustomShader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uniforms")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("u_selectedFeature")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UniformType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOTHING_SELECTED")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lightingModel")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cesium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LightingModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PBR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fragmentShaderText")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n\tconst int NOTHING_SELECTED = 12;\n\tvoid fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n\t\tint featureId = fsInput.featureIds.featureId_0;\n\t\tif (u_selectedFeature < NOTHING_SELECTED && featureId == u_selectedFeature) {\n\t\t  material.specular = vec3(1.00, 0.85, 0.57);\n\t\t  material.roughness = 0.1;\n\t\t}\n\t}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\ntileset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("customShader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectFeatureShader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可动态修改uniform ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uniform变量在着色器代码中是只读的，但可以在JavaScript代码中使用setUniform方法来修改它们的值。")]),t._v("\nselectFeatureShader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUniform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u_selectedFeature"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pickedObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("featureId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("Gotop")],1)}),[],!1,null,null,null);s.default=e.exports}}]);