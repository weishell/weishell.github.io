(window.webpackJsonp=window.webpackJsonp||[]).push([[329],{737:function(s,t,r){"use strict";r.r(t);var a=r(16),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"项目中遇到的问题定位思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目中遇到的问题定位思路"}},[s._v("#")]),s._v(" 项目中遇到的问题定位思路")]),s._v(" "),t("h3",{attrs:{id:"内存溢出【控制台加代码定位】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存溢出【控制台加代码定位】"}},[s._v("#")]),s._v(" 内存溢出【控制台加代码定位】")]),s._v(" "),t("p",[s._v("在项目中，本地一切正常，但是部署到线上后，会持续的内存升高，而且呈现出有规律的递增，最后发现在network中，某个页面接口持续调用，里面的js也持续请求。代码中的某些配置没有配置好，导致了出现https://xxx.xxx.com/undefined 这种请求，似乎是因为没有准确匹配到对应的接口后反复请求，最后内存溢出。")]),s._v(" "),t("p",[s._v("因为代码有了新功能引入，console控制台又没有报错，memary持续升高，最后发现network中的异常。")]),s._v(" "),t("p",[s._v("总结：定位问题需要多方面考虑，如果代码层没有太大变动，或一时半会无法确定，也可以从console=>network=>performance=>memory去尝试寻求突破")]),s._v(" "),t("h3",{attrs:{id:"秒传失效-【环境-难发现】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#秒传失效-【环境-难发现】"}},[s._v("#")]),s._v(" 秒传失效 ---- 【环境，难发现】")]),s._v(" "),t("p",[s._v("spark-md5秒传发现对视频类的文件速度还可以，对文本类速度很慢，一开始以为是是spark-md5自身的原因，因为mac电脑似乎正常，始终无法理解，最后回去用自己的电脑尝试了一下，发现是公司的网络限制的原因，实际的视频类的也降速了4倍左右，只是没其他的那么明显，才导致感觉视频类没影响，而是影响了文本")]),s._v(" "),t("h3",{attrs:{id:"报错场景【细心比对】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#报错场景【细心比对】"}},[s._v("#")]),s._v(" 报错场景【细心比对】")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("path问题\n自身代码问题：对比案例，注释到最简单场景，发现问题迎刃而解，然后逐步释放，定位问题。")])]),s._v(" "),t("li",[t("p",[s._v("版本问题\n做协同功能，用了slate+stale-yjs+yjs+@hocuspocus/server+@hocuspocus/provider,因为slate升版本很快，所以一开始报错猜测是版本不兼容stale-yjs可能，因为这个版本两年多没更新了，最后发现需要把@hocuspocus/server+@hocuspocus/provider降到某个版本，问题就解决了，所以需要不断试错的过程，版本好也要尝试去适配，不一定是最新的就是正确的。")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);