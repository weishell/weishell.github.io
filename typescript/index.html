<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 基础 | fnms</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="welcome">
    
    <link rel="preload" href="/assets/css/0.styles.a12b5ee2.css" as="style"><link rel="preload" href="/assets/js/app.9c05b5f4.js" as="script"><link rel="preload" href="/assets/js/2.a4772d56.js" as="script"><link rel="preload" href="/assets/js/335.7f791afb.js" as="script"><link rel="preload" href="/assets/js/11.f266fedf.js" as="script"><link rel="preload" href="/assets/js/10.f6649cbd.js" as="script"><link rel="prefetch" href="/assets/js/100.e72f472c.js"><link rel="prefetch" href="/assets/js/101.4eedb4f4.js"><link rel="prefetch" href="/assets/js/102.f554dff9.js"><link rel="prefetch" href="/assets/js/103.bfdd1910.js"><link rel="prefetch" href="/assets/js/104.fc91e212.js"><link rel="prefetch" href="/assets/js/105.7e71d8ee.js"><link rel="prefetch" href="/assets/js/106.2f7c1f7c.js"><link rel="prefetch" href="/assets/js/107.0b7d5d8f.js"><link rel="prefetch" href="/assets/js/108.1368cad1.js"><link rel="prefetch" href="/assets/js/109.bcf7d39e.js"><link rel="prefetch" href="/assets/js/110.a817a1bc.js"><link rel="prefetch" href="/assets/js/111.9cf67784.js"><link rel="prefetch" href="/assets/js/112.c6e6aa72.js"><link rel="prefetch" href="/assets/js/113.56ec5894.js"><link rel="prefetch" href="/assets/js/114.212af8cc.js"><link rel="prefetch" href="/assets/js/115.c726e274.js"><link rel="prefetch" href="/assets/js/116.3964f25a.js"><link rel="prefetch" href="/assets/js/117.0a41f5a1.js"><link rel="prefetch" href="/assets/js/118.3f35ea27.js"><link rel="prefetch" href="/assets/js/119.4ce86a5f.js"><link rel="prefetch" href="/assets/js/12.5279759b.js"><link rel="prefetch" href="/assets/js/120.afd07cf8.js"><link rel="prefetch" href="/assets/js/121.0fead2ad.js"><link rel="prefetch" href="/assets/js/122.7e102e2a.js"><link rel="prefetch" href="/assets/js/123.c338614a.js"><link rel="prefetch" href="/assets/js/124.ebb52629.js"><link rel="prefetch" href="/assets/js/125.3ecd6277.js"><link rel="prefetch" href="/assets/js/126.1f723707.js"><link rel="prefetch" href="/assets/js/127.4dcbda4a.js"><link rel="prefetch" href="/assets/js/128.d7c3d39f.js"><link rel="prefetch" href="/assets/js/129.c9e79874.js"><link rel="prefetch" href="/assets/js/13.d42e4df1.js"><link rel="prefetch" href="/assets/js/130.13c630ab.js"><link rel="prefetch" href="/assets/js/131.56929ebf.js"><link rel="prefetch" href="/assets/js/132.2881f1bf.js"><link rel="prefetch" href="/assets/js/133.cfb45ef2.js"><link rel="prefetch" href="/assets/js/134.db6bdf21.js"><link rel="prefetch" href="/assets/js/135.6788276c.js"><link rel="prefetch" href="/assets/js/136.baf79d7c.js"><link rel="prefetch" href="/assets/js/137.1a81a523.js"><link rel="prefetch" href="/assets/js/138.4400f7a7.js"><link rel="prefetch" href="/assets/js/139.89af4809.js"><link rel="prefetch" href="/assets/js/14.0d5ab2d7.js"><link rel="prefetch" href="/assets/js/140.815f35cf.js"><link rel="prefetch" href="/assets/js/141.b3a70718.js"><link rel="prefetch" href="/assets/js/142.a5680dbd.js"><link rel="prefetch" href="/assets/js/143.7dbef394.js"><link rel="prefetch" href="/assets/js/144.833766ce.js"><link rel="prefetch" href="/assets/js/145.5217651e.js"><link rel="prefetch" href="/assets/js/146.1f749c67.js"><link rel="prefetch" href="/assets/js/147.fcb83d55.js"><link rel="prefetch" href="/assets/js/148.af51aadf.js"><link rel="prefetch" href="/assets/js/149.3ca08044.js"><link rel="prefetch" href="/assets/js/15.ad533ccb.js"><link rel="prefetch" href="/assets/js/150.91a5f7b5.js"><link rel="prefetch" href="/assets/js/151.15d9a6f7.js"><link rel="prefetch" href="/assets/js/152.3d1daedc.js"><link rel="prefetch" href="/assets/js/153.6e4ae83d.js"><link rel="prefetch" href="/assets/js/154.d5a7fb0d.js"><link rel="prefetch" href="/assets/js/155.e464a018.js"><link rel="prefetch" href="/assets/js/156.8c8f7833.js"><link rel="prefetch" href="/assets/js/157.979951b6.js"><link rel="prefetch" href="/assets/js/158.0597e90e.js"><link rel="prefetch" href="/assets/js/159.9218fd7c.js"><link rel="prefetch" href="/assets/js/16.1c8478f6.js"><link rel="prefetch" href="/assets/js/160.ebb002e4.js"><link rel="prefetch" href="/assets/js/161.fec5c023.js"><link rel="prefetch" href="/assets/js/162.66f63c3b.js"><link rel="prefetch" href="/assets/js/163.98d76c8f.js"><link rel="prefetch" href="/assets/js/164.f0f87de9.js"><link rel="prefetch" href="/assets/js/165.9405ef59.js"><link rel="prefetch" href="/assets/js/166.b4d44fdc.js"><link rel="prefetch" href="/assets/js/167.b66d8792.js"><link rel="prefetch" href="/assets/js/168.c82fb514.js"><link rel="prefetch" href="/assets/js/169.c37a3fdc.js"><link rel="prefetch" href="/assets/js/17.11cf22ec.js"><link rel="prefetch" href="/assets/js/170.1522193b.js"><link rel="prefetch" href="/assets/js/171.09b53a4a.js"><link rel="prefetch" href="/assets/js/172.33ac31ff.js"><link rel="prefetch" href="/assets/js/173.101ff462.js"><link rel="prefetch" href="/assets/js/174.fcdc5fcc.js"><link rel="prefetch" href="/assets/js/175.756cb8a0.js"><link rel="prefetch" href="/assets/js/176.b5385a96.js"><link rel="prefetch" href="/assets/js/177.6707de13.js"><link rel="prefetch" href="/assets/js/178.595e65e0.js"><link rel="prefetch" href="/assets/js/179.dea78778.js"><link rel="prefetch" href="/assets/js/18.3bca0497.js"><link rel="prefetch" href="/assets/js/180.8e6bbbd5.js"><link rel="prefetch" href="/assets/js/181.696b5ca2.js"><link rel="prefetch" href="/assets/js/182.7dec9044.js"><link rel="prefetch" href="/assets/js/183.732e79fd.js"><link rel="prefetch" href="/assets/js/184.f7dfff99.js"><link rel="prefetch" href="/assets/js/185.abe26ed5.js"><link rel="prefetch" href="/assets/js/186.ffcb1abc.js"><link rel="prefetch" href="/assets/js/187.1e7fa327.js"><link rel="prefetch" href="/assets/js/188.f7071f6b.js"><link rel="prefetch" href="/assets/js/189.ab0f5f04.js"><link rel="prefetch" href="/assets/js/19.9244f9c6.js"><link rel="prefetch" href="/assets/js/190.63bd2989.js"><link rel="prefetch" href="/assets/js/191.b53ad862.js"><link rel="prefetch" href="/assets/js/192.aa7d940a.js"><link rel="prefetch" href="/assets/js/193.6cb794bd.js"><link rel="prefetch" href="/assets/js/194.8d30bbe6.js"><link rel="prefetch" href="/assets/js/195.6b70cd7d.js"><link rel="prefetch" href="/assets/js/196.5a3465e7.js"><link rel="prefetch" href="/assets/js/197.49bacf19.js"><link rel="prefetch" href="/assets/js/198.4e75490b.js"><link rel="prefetch" href="/assets/js/199.eebadf0f.js"><link rel="prefetch" href="/assets/js/20.9451cd63.js"><link rel="prefetch" href="/assets/js/200.43b948c0.js"><link rel="prefetch" href="/assets/js/201.4d76669e.js"><link rel="prefetch" href="/assets/js/202.d988c517.js"><link rel="prefetch" href="/assets/js/203.4aadfea8.js"><link rel="prefetch" href="/assets/js/204.3f1bb5ac.js"><link rel="prefetch" href="/assets/js/205.767a6846.js"><link rel="prefetch" href="/assets/js/206.3e2586ba.js"><link rel="prefetch" href="/assets/js/207.bcb1e579.js"><link rel="prefetch" href="/assets/js/208.56492aed.js"><link rel="prefetch" href="/assets/js/209.3a42a481.js"><link rel="prefetch" href="/assets/js/21.52ca30fd.js"><link rel="prefetch" href="/assets/js/210.d7a87698.js"><link rel="prefetch" href="/assets/js/211.8ac7440b.js"><link rel="prefetch" href="/assets/js/212.da7df11b.js"><link rel="prefetch" href="/assets/js/213.2da9b768.js"><link rel="prefetch" href="/assets/js/214.5138a7a6.js"><link rel="prefetch" href="/assets/js/215.81808d64.js"><link rel="prefetch" href="/assets/js/216.6b805ef6.js"><link rel="prefetch" href="/assets/js/217.e93beb5d.js"><link rel="prefetch" href="/assets/js/218.3babbcb8.js"><link rel="prefetch" href="/assets/js/219.bc212ea0.js"><link rel="prefetch" href="/assets/js/22.5d2582ef.js"><link rel="prefetch" href="/assets/js/220.dd00e951.js"><link rel="prefetch" href="/assets/js/221.f8eaf550.js"><link rel="prefetch" href="/assets/js/222.094e562a.js"><link rel="prefetch" href="/assets/js/223.6b785173.js"><link rel="prefetch" href="/assets/js/224.3ab2e83d.js"><link rel="prefetch" href="/assets/js/225.37daa214.js"><link rel="prefetch" href="/assets/js/226.dde20c5d.js"><link rel="prefetch" href="/assets/js/227.649c0bb4.js"><link rel="prefetch" href="/assets/js/228.2d0d618e.js"><link rel="prefetch" href="/assets/js/229.be2453ae.js"><link rel="prefetch" href="/assets/js/23.7160a64e.js"><link rel="prefetch" href="/assets/js/230.cba01e0b.js"><link rel="prefetch" href="/assets/js/231.fafa426b.js"><link rel="prefetch" href="/assets/js/232.2504e14b.js"><link rel="prefetch" href="/assets/js/233.783a4209.js"><link rel="prefetch" href="/assets/js/234.dd58a902.js"><link rel="prefetch" href="/assets/js/235.a2278e7c.js"><link rel="prefetch" href="/assets/js/236.f666448f.js"><link rel="prefetch" href="/assets/js/237.1d5c3862.js"><link rel="prefetch" href="/assets/js/238.064f41c3.js"><link rel="prefetch" href="/assets/js/239.e71f6321.js"><link rel="prefetch" href="/assets/js/24.c08fcce1.js"><link rel="prefetch" href="/assets/js/240.c64084a9.js"><link rel="prefetch" href="/assets/js/241.21b40717.js"><link rel="prefetch" href="/assets/js/242.6df21212.js"><link rel="prefetch" href="/assets/js/243.373abddc.js"><link rel="prefetch" href="/assets/js/244.9943c139.js"><link rel="prefetch" href="/assets/js/245.432abea4.js"><link rel="prefetch" href="/assets/js/246.bfb60005.js"><link rel="prefetch" href="/assets/js/247.2f85f64b.js"><link rel="prefetch" href="/assets/js/248.abd36fbd.js"><link rel="prefetch" href="/assets/js/249.f6c33009.js"><link rel="prefetch" href="/assets/js/25.c302d57d.js"><link rel="prefetch" href="/assets/js/250.fc32fb2d.js"><link rel="prefetch" href="/assets/js/251.7cd1e531.js"><link rel="prefetch" href="/assets/js/252.c2e71cea.js"><link rel="prefetch" href="/assets/js/253.7dda0db4.js"><link rel="prefetch" href="/assets/js/254.0ccdaa64.js"><link rel="prefetch" href="/assets/js/255.71f93d52.js"><link rel="prefetch" href="/assets/js/256.8801e729.js"><link rel="prefetch" href="/assets/js/257.a52f64b4.js"><link rel="prefetch" href="/assets/js/258.f86ed16d.js"><link rel="prefetch" href="/assets/js/259.580b99a0.js"><link rel="prefetch" href="/assets/js/26.fb5ed557.js"><link rel="prefetch" href="/assets/js/260.b9408256.js"><link rel="prefetch" href="/assets/js/261.719f7d42.js"><link rel="prefetch" href="/assets/js/262.b29963b9.js"><link rel="prefetch" href="/assets/js/263.15fe5b0f.js"><link rel="prefetch" href="/assets/js/264.7508ce7b.js"><link rel="prefetch" href="/assets/js/265.c554ab94.js"><link rel="prefetch" href="/assets/js/266.187dbfa3.js"><link rel="prefetch" href="/assets/js/267.cf72149b.js"><link rel="prefetch" href="/assets/js/268.dcab41ff.js"><link rel="prefetch" href="/assets/js/269.de0a4a6c.js"><link rel="prefetch" href="/assets/js/27.50391931.js"><link rel="prefetch" href="/assets/js/270.0ab87cde.js"><link rel="prefetch" href="/assets/js/271.39d1cc9d.js"><link rel="prefetch" href="/assets/js/272.7317468f.js"><link rel="prefetch" href="/assets/js/273.358dd064.js"><link rel="prefetch" href="/assets/js/274.5584155e.js"><link rel="prefetch" href="/assets/js/275.4fc825e6.js"><link rel="prefetch" href="/assets/js/276.3522bc4a.js"><link rel="prefetch" href="/assets/js/277.9709545a.js"><link rel="prefetch" href="/assets/js/278.eb1f088d.js"><link rel="prefetch" href="/assets/js/279.3dfc06dc.js"><link rel="prefetch" href="/assets/js/28.777e1961.js"><link rel="prefetch" href="/assets/js/280.c85c7249.js"><link rel="prefetch" href="/assets/js/281.0706b663.js"><link rel="prefetch" href="/assets/js/282.8bd3b315.js"><link rel="prefetch" href="/assets/js/283.a9e373b8.js"><link rel="prefetch" href="/assets/js/284.969fdf95.js"><link rel="prefetch" href="/assets/js/285.4cea9eaf.js"><link rel="prefetch" href="/assets/js/286.d45bd447.js"><link rel="prefetch" href="/assets/js/287.42316757.js"><link rel="prefetch" href="/assets/js/288.13a51af0.js"><link rel="prefetch" href="/assets/js/289.4548fa7d.js"><link rel="prefetch" href="/assets/js/29.e7c4f9c1.js"><link rel="prefetch" href="/assets/js/290.4850bc84.js"><link rel="prefetch" href="/assets/js/291.e511b702.js"><link rel="prefetch" href="/assets/js/292.a23bc530.js"><link rel="prefetch" href="/assets/js/293.c65cec9b.js"><link rel="prefetch" href="/assets/js/294.e90f309a.js"><link rel="prefetch" href="/assets/js/295.1ce1f1b4.js"><link rel="prefetch" href="/assets/js/296.a66c3368.js"><link rel="prefetch" href="/assets/js/297.3d3191b8.js"><link rel="prefetch" href="/assets/js/298.d6cd0a2e.js"><link rel="prefetch" href="/assets/js/299.bc1805f5.js"><link rel="prefetch" href="/assets/js/3.8d2b8464.js"><link rel="prefetch" href="/assets/js/30.9b647f01.js"><link rel="prefetch" href="/assets/js/300.54184bdb.js"><link rel="prefetch" href="/assets/js/301.da4905e3.js"><link rel="prefetch" href="/assets/js/302.0066d1e8.js"><link rel="prefetch" href="/assets/js/303.01f169b9.js"><link rel="prefetch" href="/assets/js/304.cd5bf17c.js"><link rel="prefetch" href="/assets/js/305.4456f7b6.js"><link rel="prefetch" href="/assets/js/306.50f2272b.js"><link rel="prefetch" href="/assets/js/307.23c1de66.js"><link rel="prefetch" href="/assets/js/308.4a558549.js"><link rel="prefetch" href="/assets/js/309.d714f199.js"><link rel="prefetch" href="/assets/js/31.0a58ae5d.js"><link rel="prefetch" href="/assets/js/310.792669fb.js"><link rel="prefetch" href="/assets/js/311.44fe7a58.js"><link rel="prefetch" href="/assets/js/312.db3a1728.js"><link rel="prefetch" href="/assets/js/313.91324f92.js"><link rel="prefetch" href="/assets/js/314.ceea52a4.js"><link rel="prefetch" href="/assets/js/315.3db6b99b.js"><link rel="prefetch" href="/assets/js/316.ce04a98d.js"><link rel="prefetch" href="/assets/js/317.1c09c76a.js"><link rel="prefetch" href="/assets/js/318.9771e46e.js"><link rel="prefetch" href="/assets/js/319.67eb3220.js"><link rel="prefetch" href="/assets/js/32.f265d7f2.js"><link rel="prefetch" href="/assets/js/320.be21f854.js"><link rel="prefetch" href="/assets/js/321.cb266eeb.js"><link rel="prefetch" href="/assets/js/322.aabb6b6b.js"><link rel="prefetch" href="/assets/js/323.9f1cfa78.js"><link rel="prefetch" href="/assets/js/324.0cc784ce.js"><link rel="prefetch" href="/assets/js/325.95b5e6f7.js"><link rel="prefetch" href="/assets/js/326.9061d120.js"><link rel="prefetch" href="/assets/js/327.36f6be5d.js"><link rel="prefetch" href="/assets/js/328.0b85ce4e.js"><link rel="prefetch" href="/assets/js/329.09538c65.js"><link rel="prefetch" href="/assets/js/33.a5f23536.js"><link rel="prefetch" href="/assets/js/330.9f03c6e4.js"><link rel="prefetch" href="/assets/js/331.ee46a711.js"><link rel="prefetch" href="/assets/js/332.12d90a10.js"><link rel="prefetch" href="/assets/js/333.73f5284e.js"><link rel="prefetch" href="/assets/js/334.d67476e2.js"><link rel="prefetch" href="/assets/js/336.8764ab68.js"><link rel="prefetch" href="/assets/js/337.b8e41ecd.js"><link rel="prefetch" href="/assets/js/338.7bf3ad28.js"><link rel="prefetch" href="/assets/js/339.d109109f.js"><link rel="prefetch" href="/assets/js/34.30847e75.js"><link rel="prefetch" href="/assets/js/340.c1d8caf5.js"><link rel="prefetch" href="/assets/js/341.0556131e.js"><link rel="prefetch" href="/assets/js/342.ba35a9c7.js"><link rel="prefetch" href="/assets/js/343.d8832159.js"><link rel="prefetch" href="/assets/js/344.36d2d18d.js"><link rel="prefetch" href="/assets/js/345.72fcfabf.js"><link rel="prefetch" href="/assets/js/346.92a8a3ef.js"><link rel="prefetch" href="/assets/js/347.6ba8ef3d.js"><link rel="prefetch" href="/assets/js/348.1ddd0bce.js"><link rel="prefetch" href="/assets/js/349.378422f1.js"><link rel="prefetch" href="/assets/js/35.afccc752.js"><link rel="prefetch" href="/assets/js/350.63bc7ac8.js"><link rel="prefetch" href="/assets/js/351.e027d373.js"><link rel="prefetch" href="/assets/js/352.91a0f767.js"><link rel="prefetch" href="/assets/js/353.102ffbb9.js"><link rel="prefetch" href="/assets/js/354.1c45382a.js"><link rel="prefetch" href="/assets/js/355.504031c9.js"><link rel="prefetch" href="/assets/js/356.415036a8.js"><link rel="prefetch" href="/assets/js/357.8667678b.js"><link rel="prefetch" href="/assets/js/358.26fb94c0.js"><link rel="prefetch" href="/assets/js/359.6c56211d.js"><link rel="prefetch" href="/assets/js/36.ff296aa1.js"><link rel="prefetch" href="/assets/js/360.4eb2dc37.js"><link rel="prefetch" href="/assets/js/361.37918b5c.js"><link rel="prefetch" href="/assets/js/362.f45e1a5c.js"><link rel="prefetch" href="/assets/js/363.b3f8f251.js"><link rel="prefetch" href="/assets/js/364.9470b691.js"><link rel="prefetch" href="/assets/js/365.41c55375.js"><link rel="prefetch" href="/assets/js/366.03feb7ea.js"><link rel="prefetch" href="/assets/js/367.bb01c139.js"><link rel="prefetch" href="/assets/js/368.b366d649.js"><link rel="prefetch" href="/assets/js/369.2a6dcce0.js"><link rel="prefetch" href="/assets/js/37.ba79d5ea.js"><link rel="prefetch" href="/assets/js/370.fd09de0f.js"><link rel="prefetch" href="/assets/js/371.a8293940.js"><link rel="prefetch" href="/assets/js/372.8eb7e209.js"><link rel="prefetch" href="/assets/js/373.400e7fc6.js"><link rel="prefetch" href="/assets/js/374.19730143.js"><link rel="prefetch" href="/assets/js/375.b5b6cf1d.js"><link rel="prefetch" href="/assets/js/376.7a7e1b1a.js"><link rel="prefetch" href="/assets/js/377.687bfb59.js"><link rel="prefetch" href="/assets/js/378.dd5d36e5.js"><link rel="prefetch" href="/assets/js/379.b68a4857.js"><link rel="prefetch" href="/assets/js/38.34829a73.js"><link rel="prefetch" href="/assets/js/380.19fdf703.js"><link rel="prefetch" href="/assets/js/381.89228b42.js"><link rel="prefetch" href="/assets/js/382.510ca8ef.js"><link rel="prefetch" href="/assets/js/383.87fa2d0d.js"><link rel="prefetch" href="/assets/js/384.6bedc1e7.js"><link rel="prefetch" href="/assets/js/385.4ecd8fdd.js"><link rel="prefetch" href="/assets/js/386.cc0dd18b.js"><link rel="prefetch" href="/assets/js/387.026d2cf3.js"><link rel="prefetch" href="/assets/js/388.5e5fcc30.js"><link rel="prefetch" href="/assets/js/389.c98637ea.js"><link rel="prefetch" href="/assets/js/39.4d1b6667.js"><link rel="prefetch" href="/assets/js/390.64adb136.js"><link rel="prefetch" href="/assets/js/391.cb607d97.js"><link rel="prefetch" href="/assets/js/392.8a4fcc3d.js"><link rel="prefetch" href="/assets/js/393.c2d315a1.js"><link rel="prefetch" href="/assets/js/394.a12ee56f.js"><link rel="prefetch" href="/assets/js/395.157185a2.js"><link rel="prefetch" href="/assets/js/396.8f463abc.js"><link rel="prefetch" href="/assets/js/397.8ae01ee8.js"><link rel="prefetch" href="/assets/js/398.27ce02aa.js"><link rel="prefetch" href="/assets/js/399.055c6055.js"><link rel="prefetch" href="/assets/js/4.bb576646.js"><link rel="prefetch" href="/assets/js/40.89b69450.js"><link rel="prefetch" href="/assets/js/400.7f1d3c34.js"><link rel="prefetch" href="/assets/js/401.57752300.js"><link rel="prefetch" href="/assets/js/402.36f7ade3.js"><link rel="prefetch" href="/assets/js/403.c7c77cb9.js"><link rel="prefetch" href="/assets/js/404.27e93a26.js"><link rel="prefetch" href="/assets/js/405.0ce45c3b.js"><link rel="prefetch" href="/assets/js/406.31d4e864.js"><link rel="prefetch" href="/assets/js/407.da63d283.js"><link rel="prefetch" href="/assets/js/408.b109508d.js"><link rel="prefetch" href="/assets/js/409.eb6fa268.js"><link rel="prefetch" href="/assets/js/41.def77a15.js"><link rel="prefetch" href="/assets/js/410.6b131691.js"><link rel="prefetch" href="/assets/js/411.d49a72d8.js"><link rel="prefetch" href="/assets/js/412.747d1c78.js"><link rel="prefetch" href="/assets/js/413.91d84a5d.js"><link rel="prefetch" href="/assets/js/414.f4edd8cf.js"><link rel="prefetch" href="/assets/js/415.72f22792.js"><link rel="prefetch" href="/assets/js/416.83169fe2.js"><link rel="prefetch" href="/assets/js/417.1b71ac13.js"><link rel="prefetch" href="/assets/js/42.12841889.js"><link rel="prefetch" href="/assets/js/43.39f3f8a4.js"><link rel="prefetch" href="/assets/js/44.39ec93b8.js"><link rel="prefetch" href="/assets/js/45.de52ea4b.js"><link rel="prefetch" href="/assets/js/46.2d634e52.js"><link rel="prefetch" href="/assets/js/47.1620f2c8.js"><link rel="prefetch" href="/assets/js/48.c99d10a9.js"><link rel="prefetch" href="/assets/js/49.da86bf7a.js"><link rel="prefetch" href="/assets/js/5.691a56fb.js"><link rel="prefetch" href="/assets/js/50.88d777dd.js"><link rel="prefetch" href="/assets/js/51.024629ec.js"><link rel="prefetch" href="/assets/js/52.73a600bd.js"><link rel="prefetch" href="/assets/js/53.7cd8b153.js"><link rel="prefetch" href="/assets/js/54.aeb0e680.js"><link rel="prefetch" href="/assets/js/55.501600c2.js"><link rel="prefetch" href="/assets/js/56.78418458.js"><link rel="prefetch" href="/assets/js/57.86b2229b.js"><link rel="prefetch" href="/assets/js/58.71246fd3.js"><link rel="prefetch" href="/assets/js/59.9b02aa4a.js"><link rel="prefetch" href="/assets/js/6.52218923.js"><link rel="prefetch" href="/assets/js/60.805e290e.js"><link rel="prefetch" href="/assets/js/61.d955f818.js"><link rel="prefetch" href="/assets/js/62.cf53bbad.js"><link rel="prefetch" href="/assets/js/63.4b2c17d8.js"><link rel="prefetch" href="/assets/js/64.1f2439f4.js"><link rel="prefetch" href="/assets/js/65.57f01a08.js"><link rel="prefetch" href="/assets/js/66.b40f00c7.js"><link rel="prefetch" href="/assets/js/67.db72bc3b.js"><link rel="prefetch" href="/assets/js/68.5a37ee66.js"><link rel="prefetch" href="/assets/js/69.62231344.js"><link rel="prefetch" href="/assets/js/7.eda242c9.js"><link rel="prefetch" href="/assets/js/70.37ac678a.js"><link rel="prefetch" href="/assets/js/71.90b60b0d.js"><link rel="prefetch" href="/assets/js/72.9128bf49.js"><link rel="prefetch" href="/assets/js/73.6baa7fd5.js"><link rel="prefetch" href="/assets/js/74.2d7958ad.js"><link rel="prefetch" href="/assets/js/75.14740208.js"><link rel="prefetch" href="/assets/js/76.4bc4244d.js"><link rel="prefetch" href="/assets/js/77.5d26abec.js"><link rel="prefetch" href="/assets/js/78.328256ed.js"><link rel="prefetch" href="/assets/js/79.9ede5a9b.js"><link rel="prefetch" href="/assets/js/8.d499b72e.js"><link rel="prefetch" href="/assets/js/80.53d86f90.js"><link rel="prefetch" href="/assets/js/81.e3003a65.js"><link rel="prefetch" href="/assets/js/82.e64a6c08.js"><link rel="prefetch" href="/assets/js/83.62a3ed29.js"><link rel="prefetch" href="/assets/js/84.73aa6f4b.js"><link rel="prefetch" href="/assets/js/85.76ec6ff5.js"><link rel="prefetch" href="/assets/js/86.3d299d01.js"><link rel="prefetch" href="/assets/js/87.2ea37a00.js"><link rel="prefetch" href="/assets/js/88.7e213abe.js"><link rel="prefetch" href="/assets/js/89.6a457378.js"><link rel="prefetch" href="/assets/js/9.e508ac87.js"><link rel="prefetch" href="/assets/js/90.c232eea6.js"><link rel="prefetch" href="/assets/js/91.286f248e.js"><link rel="prefetch" href="/assets/js/92.89b65e59.js"><link rel="prefetch" href="/assets/js/93.5308b05e.js"><link rel="prefetch" href="/assets/js/94.8cc7d37e.js"><link rel="prefetch" href="/assets/js/95.7b43c759.js"><link rel="prefetch" href="/assets/js/96.a32c3ac2.js"><link rel="prefetch" href="/assets/js/97.6bba9a10.js"><link rel="prefetch" href="/assets/js/98.20372048.js"><link rel="prefetch" href="/assets/js/99.f81fe62a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a12b5ee2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">fnms</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/typescript/" aria-current="page" class="active sidebar-link"> ts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/#typescript-基础" class="sidebar-link">TypeScript 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/#使用ts原因" class="sidebar-link">使用ts原因</a></li><li class="sidebar-sub-header"><a href="/typescript/#类型断言" class="sidebar-link">类型断言</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts数据类型" class="sidebar-link">TS数据类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts数组和元组的处理" class="sidebar-link">ts数组和元组的处理</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts枚举值和反向映射" class="sidebar-link">ts枚举值和反向映射</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-never类型" class="sidebar-link">TS never类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#类型收窄" class="sidebar-link">类型收窄</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-unknown类型" class="sidebar-link">TS unknown类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts联合类型" class="sidebar-link">TS联合类型 |</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-交叉类型" class="sidebar-link">TS 交叉类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-类型别名" class="sidebar-link">TS 类型别名</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts索引类型" class="sidebar-link">TS索引类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts映射类型-partial-readonly" class="sidebar-link">TS映射类型 Partial Readonly</a></li><li class="sidebar-sub-header"><a href="/typescript/#条件类型" class="sidebar-link">条件类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts字面量类型" class="sidebar-link">ts字面量类型</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-is关键字" class="sidebar-link">ts is关键字</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts-infer关键字" class="sidebar-link">ts infer关键字</a></li><li class="sidebar-sub-header"><a href="/typescript/#ts函数" class="sidebar-link">TS函数</a></li></ul></li></ul></li><li><a href="/typescript/001tsbasic.html" class="sidebar-link"> ts数据类型和函数</a></li><li><a href="/typescript/002tsbasic.html" class="sidebar-link"> ts引用类型</a></li><li><a href="/typescript/003tsbasic.html" class="sidebar-link"> ts面向对象</a></li><li><a href="/typescript/004vue2&amp;ts.html" class="sidebar-link">vue2使用ts写法</a></li><li><a href="/typescript/005interface.html" class="sidebar-link">ts之接口</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="typescript-基础"><a href="#typescript-基础" class="header-anchor">#</a> TypeScript 基础</h2> <ol><li>类型注解</li> <li>类型推断</li> <li>常见类型</li> <li><code>数组类型声明</code></li> <li>any (noImplicitAny是否设置看项目和团队)</li> <li>函数</li> <li>对象类型</li> <li>联合类型</li> <li>类型收窄</li> <li>断言</li> <li>字面量类型</li></ol> <h3 id="使用ts原因"><a href="#使用ts原因" class="header-anchor">#</a> 使用ts原因</h3> <p>为了在编写阶段就可以检测出代码的大部分问题，实现的一种静态检查的类型的工具。</p> <p><code>一个静态类型需要标记出哪些代码是一个错误，哪怕实际生效的 JavaScript 并不会立刻报错。</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Daniel&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token comment">// 类型“{ name: string; age: number; }”上不存在属性“height”。</span>

user<span class="token punctuation">.</span>love <span class="token operator">=</span><span class="token string">'money'</span><span class="token comment">// 类型“{ name: string; age: number; }”上不存在属性“love”。</span>
</code></pre></div><ul><li>比如拼写错误：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> announcement <span class="token operator">=</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">;</span>
 
<span class="token comment">// How quickly can you spot the typos?</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocaleLowercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocalLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// We probably meant to write this...</span>
announcement<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>函数未被调用：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">flipCoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Meant to be Math.random()</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span>random <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token comment">// Operator '&lt;' cannot be applied to types '() =&gt; number' and 'number'.</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>基本的逻辑错误：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//此条件将始终返回 &quot;false&quot;，因为类型 &quot;&quot;a&quot;&quot; 和 &quot;&quot;b&quot;&quot; 没有重叠。</span>
  <span class="token comment">// This condition will always return 'false' since the types '&quot;a&quot;' and '&quot;b&quot;' have no overlap.</span>
  <span class="token comment">// Oops, unreachable</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这些都可以提前发现到。</p> <h4 id="变量声明-类型注解和类型推断"><a href="#变量声明-类型注解和类型推断" class="header-anchor">#</a> 变量声明，类型注解和类型推断</h4> <p>变量是一种使用方便的占位符，用于引用计算机内存地址。<em><strong>变量声明语法：冒号 : 前面是变量名称，后面是变量类型。</strong></em></p> <ul><li>声明变量的类型及初始值</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// var [变量名] : [类型] = 值;//:后注解类型</span>
<span class="token keyword">var</span> uname<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Runoob&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><em><strong>TS的const声明必须初始化赋值</strong></em></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token comment">//类型注解,先不赋值，之后赋值的话需要遵从数据定义的类型</span>
count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> countInference <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token comment">//类型推论,如果明确知道，可以省略让ts自己判断</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, today is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>TS的类型注解会经过代码的编译后自动抹去</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>__esModule <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>greet <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token parameter">person<span class="token punctuation">,</span> date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//降级兼容低版本浏览器</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&quot;, today is &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>greet <span class="token operator">=</span> greet<span class="token punctuation">;</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;Maddison&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="类型保护-类型保护就是让编译器缩小类型范围-在编译阶段规避掉一些不必要的错误"><a href="#类型保护-类型保护就是让编译器缩小类型范围-在编译阶段规避掉一些不必要的错误" class="header-anchor">#</a> 类型保护:类型保护就是让编译器缩小类型范围，在编译阶段规避掉一些不必要的错误</h4> <p>利用typeof instanceof in或者字面量等</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> nickname<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
  <span class="token keyword">public</span> group<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> count<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">public</span> keyword<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">typeGuard</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> User <span class="token operator">|</span> Log<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arg <span class="token keyword">instanceof</span> <span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arg<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">15</span> <span class="token comment">// Error, User 类型无此属性</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>arg <span class="token keyword">instanceof</span> <span class="token class-name">Log</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arg<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">15</span> <span class="token comment">// OK</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h3> <p>TS允许覆盖它的推断.类型断言主要用于当TS推断出来类型并不满足需求，需要手动指定一个类型。</p> <p>有使用关键字 as 和标签 &lt;&gt; 两种方式，因后者会与JSX 语法冲突，优先使用 as 来进行类型断言。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    admin<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    groups<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> User <span class="token comment">//这里通过 as 关键字进行类型断言，将变量 user 的类型覆盖为 User 类型</span>
  
  <span class="token comment">//const user = &lt;User&gt;{} // User类型 使用 &lt;User&gt;{} 这种标签形式，将变量 user 强制断言为 User 类型</span>
  
  
  user<span class="token punctuation">.</span>nickname <span class="token operator">=</span> <span class="token string">'Evan'</span> 
  user<span class="token punctuation">.</span>admin <span class="token operator">=</span> <span class="token boolean">true</span>       
  user<span class="token punctuation">.</span>groups <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
  
</code></pre></div><h5 id="非空断言"><a href="#非空断言" class="header-anchor">#</a> 非空断言 !</h5> <p>如果编译器不能够去除 null 或 undefined，可以使用非空断言 ! 手动去除。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">fixed</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">postfix</span><span class="token punctuation">(</span>epithet<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
<span class="token comment">// postfix() 是一个嵌套函数，因为编译器无法去除嵌套函数的 null (除非是立即调用的函数表达式)，</span>
<span class="token comment">// 所以 TypeScript 推断第 3 行的 name 可能为空。</span>
      <span class="token keyword">return</span> name<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.  the '</span> <span class="token operator">+</span> epithet<span class="token punctuation">;</span> <span class="token comment">// name 被断言为非空</span>
    <span class="token punctuation">}</span>
<span class="token comment">// 而 name = name || &quot;Bob&quot; 这行代码已经明确了 name 不为空，所以可以直接给 name 断言为非空（第 3 行）</span>
    name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">&quot;Bob&quot;</span>
    <span class="token keyword">return</span> <span class="token function">postfix</span><span class="token punctuation">(</span><span class="token string">&quot;great&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
	
  <span class="token keyword">let</span> s<span class="token operator">=</span><span class="token function">fixed</span><span class="token punctuation">(</span><span class="token string">&quot;ttt&quot;</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment">//t.  the great</span>

</code></pre></div><h5 id="双重断言"><a href="#双重断言" class="header-anchor">#</a> 双重断言</h5> <p>双重断言极少有应用场景</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  admin<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  group<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token string">'Evan'</span> <span class="token keyword">as</span> <span class="token builtin">any</span> <span class="token keyword">as</span> User
</code></pre></div><p>ypeScript 仅仅允许类型断言转换为一个更加具体或者更不具体的类型。这个规则可以阻止一些不可能的强制类型转换，比如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span> <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token comment">// Conversion of type 'string' to type 'number' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.</span>
</code></pre></div><p>有的时候，这条规则会显得非常保守，阻止了你原本有效的类型转换。如果发生了这种事情，可以使用双重断言，先断言为 any （或者是 unknown），然后再断言为期望的类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">let</span> t1 <span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'jjj'</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">number</span>
t1<span class="token operator">=</span><span class="token number">40</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span>
</code></pre></div><h3 id="ts数据类型"><a href="#ts数据类型" class="header-anchor">#</a> TS数据类型</h3> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> s<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">;</span><span class="token comment">// √</span>
<span class="token keyword">let</span> a<span class="token operator">:</span><span class="token keyword">null</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如果只声明不赋值，直接使用的话，当声明类型为undefined或者any时才可以，<em><strong>即使是null，也需要赋值</strong></em></p></blockquote> <ul><li>symbol:使用 Symbol() 创建新的 symbol 类型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> sym1<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sym2<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sym3<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ts数组和元组的处理"><a href="#ts数组和元组的处理" class="header-anchor">#</a> ts数组和元组的处理</h3> <ul><li>数组 :在元素类型后面加上[]或者使用内置泛型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr1<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>多维数组</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">var</span> arr_name<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr_name<span class="token punctuation">)</span>
</code></pre></div><ul><li>TypeScript 可以通过 <code>ReadonlyArray&lt;T&gt;</code> 设置数组为只读，那么它的所有写方法都会失效。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">// Index signature in type 'readonly number[]' only permits reading</span>
</code></pre></div><ul><li>“readonly”类型修饰符仅允许用于数组和元组文字类型。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> arr<span class="token operator">:</span><span class="token keyword">readonly</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment">//let arr1:readonly Array&lt;number&gt; = [1,2,3,4,5];</span>
<span class="token comment">//'readonly' type modifier is only permitted on array and tuple literal types.</span>
<span class="token comment">//console.log(arr1)</span>
</code></pre></div><hr> <ul><li>元组</li></ul> <ol><li>元组类型用来表示 <em><strong>已知元素数量和类型的数组</strong></em> ，各元素的类型不必相同，对应位置的类型需要相同。</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Sherlock'</span><span class="token punctuation">,</span> <span class="token number">1887</span><span class="token punctuation">]</span>   <span class="token comment">// ok</span>
</code></pre></div><ol start="2"><li>元组要注意元组的越界问题，虽然可以越界添加元素（不建议），但是 <strong>不可越界访问</strong></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Sherlock'</span><span class="token punctuation">,</span> <span class="token number">1887</span><span class="token punctuation">]</span>
list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>      <span class="token comment">// ok [ 'Sherlock', 1887, 'hello world' ]</span>

<span class="token comment">// 测试是可以通过forEach等不需要下标操作的方法获取值</span>
list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Sherlock</span>
<span class="token comment">// 1887</span>
<span class="token comment">// hello world</span>

<span class="token comment">// console.log(list[2])   // Tuple type '[string, number]' of length '2' has no element at index '2'</span>

</code></pre></div><ol start="3"><li>元组类型允许在元素类型后缀一个 ? 来说明元素是可选的</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">?</span><span class="token punctuation">]</span>
list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'Sherlock'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'Sherlock'</span><span class="token punctuation">]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
<span class="token comment">// list = [10]</span>
</code></pre></div><ol start="4"><li>元组类型的 Rest 使用,元组可以作为参数传递给函数，函数的 Rest 形参可以定义为元组类型</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">rest</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token operator">&gt;</span>等价
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">rest</span><span class="token punctuation">(</span>arg1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> arg2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> arg3<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">122</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//122</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
* TS 数组和 JS 数组是一样的
* 变量提示，const numberArr: number[]
*/</span>
<span class="token keyword">const</span> numberArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> stringArr<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 如果这个数组里面既存数字又存字符串，如何写</span>
<span class="token keyword">const</span> arr1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2'</span> <span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token comment">// 除了基本类型的数组，对象类型的数组怎么写</span>
<span class="token keyword">const</span> objectArr<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'a'</span><span class="token punctuation">,</span> age<span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token comment">// 将上面的写法简化下，利用 type alias 类型别名</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> objectArr1<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'a'</span><span class="token punctuation">,</span> age<span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">]</span>


<span class="token comment">// 元组 tuple</span>
<span class="token keyword">const</span> teacherinfo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/**
* 鼠标悬浮变量
* const teacherinfo: (string | number)[],
* 推断出 teacherinfo 里面存储的值可能是 string， 也可能是 number
*/</span>
<span class="token keyword">const</span> teacherinfo1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/**
* 如果说后面的这个数组，长度肯定只有三个，
* 第一个肯定是字符串，第二个肯定是字符串，第三个肯定是数字
* 这个时候第一个改成数字不会报错，数组这种类型约束已经约束不到了
* 这个时候元组的作用就显现了
*/</span>
<span class="token keyword">const</span> teacherinfo2<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/**
* 这种就是元组的写法，这个时候后面加一个，或者改动三者的类型都会报错
* 一个数组里面的长度和类型都是固定的时候，就可以使用元组
* 场景：读取 excel csv 的时候
*/</span>
<span class="token keyword">const</span> teacherinfo3<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token string">'zina'</span><span class="token punctuation">,</span> <span class="token string">'girl'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ts枚举值和反向映射"><a href="#ts枚举值和反向映射" class="header-anchor">#</a> ts枚举值和反向映射</h3> <ul><li>枚举类型用于定义数值集合</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c<span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Blue<span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 2</span>
</code></pre></div><p>枚举还可以自定义对应下标，<code>如果设置的有字符串等，则之后的值都需要设置具体的索引值</code>，否则会报错,<code>如果为数字，如果之后的都没有设，则可以递增</code>。如果多个索引一致取最后一个。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
    Red<span class="token operator">=</span><span class="token string">'21'</span><span class="token punctuation">,</span> 
    Green<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>
    Blue<span class="token punctuation">,</span>
    Orange<span class="token operator">=</span><span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//Blue</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Orange<span class="token punctuation">)</span><span class="token comment">// 3 </span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Green<span class="token punctuation">)</span><span class="token comment">// 3</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// Orange</span>
</code></pre></div><ul><li>反向映射:就是指枚举的取值，不但可以正向的 Months.Jan 这样取值，也可以反向的 Months[1] 这样取值。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Months <span class="token punctuation">{</span>
  Jan <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Feb<span class="token punctuation">,</span>
  Mar<span class="token punctuation">,</span>
  Apr
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">)</span>
<span class="token comment">/*{
  '1': 'Jan',
  '2': 'Feb',
  '3': 'Mar',
  '4': 'Apr',
  Jan: 1,
  Feb: 2,
  Mar: 3,
  Apr: 4
}
*/</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Mar <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 那么反过来能取到 Months[3] 的值吗？</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// 'Mar'</span>
<span class="token comment">// 所以</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Mar <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span>     <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Mar'</span><span class="token punctuation">)</span>  <span class="token comment">// true</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Months<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Months</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Months<span class="token punctuation">[</span>Months<span class="token punctuation">[</span><span class="token string">&quot;Jan&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Jan&quot;</span><span class="token punctuation">;</span>
    Months<span class="token punctuation">[</span>Months<span class="token punctuation">[</span><span class="token string">&quot;Feb&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Feb&quot;</span><span class="token punctuation">;</span>
    Months<span class="token punctuation">[</span>Months<span class="token punctuation">[</span><span class="token string">&quot;Mar&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Mar&quot;</span><span class="token punctuation">;</span>
    Months<span class="token punctuation">[</span>Months<span class="token punctuation">[</span><span class="token string">&quot;Apr&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Apr&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Months <span class="token operator">||</span> <span class="token punctuation">(</span>Months <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Mar <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 那么反过来能取到 Months[3] 的值吗？</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Mar'</span>
<span class="token comment">// 所以</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Mar <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Mar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><ul><li>枚举合并:分开声明名称相同的枚举类型，会自动合并</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Months <span class="token punctuation">{</span>
  Jan <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Feb<span class="token punctuation">,</span>
  Mar<span class="token punctuation">,</span>
  Apr
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Months <span class="token punctuation">{</span>
  May <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  Jun
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Apr<span class="token punctuation">)</span> <span class="token comment">// 4</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Months<span class="token punctuation">.</span>Jun<span class="token punctuation">)</span> <span class="token comment">// 6</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">总结</p> <ol><li><em><strong>字符串枚举成员不会生成反向映射。</strong></em></li> <li>枚举类型被编译成一个对象，它包含了正向映射（ name -&gt; value）和反向映射（ value -&gt; name）。</li> <li>通过关键字 enum 来声明枚举类型。</li> <li>TypeScript 仅支持基于数字和字符串的枚举。</li> <li>通过枚举类型编译后的结果，<strong>了解到其本质上就是 JavaScript 对象</strong>。</li></ol></div> <hr> <h3 id="ts-never类型"><a href="#ts-never类型" class="header-anchor">#</a> TS never类型</h3> <ul><li>never 是其它类型（包括 null 和 undefined）的子类型，代表从不会出现的值。这意味着声明为 never 类型的变量只能被 never 类型所赋值，在函数中它通常表现为抛出异常或无法执行到终止点（例如无限循环）</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//抛出异常的函数表达式，其函数返回值类型为 never</span>
<span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>message<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>  
</code></pre></div><p>举个例子，当有一个union type:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'foo'</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">All</span> <span class="token operator">=</span> Foo <span class="token operator">|</span> Bar
</code></pre></div><p>在 switch 当中判断 type，TS 是可以收窄类型的 (discriminated union)：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">handleValue</span><span class="token punctuation">(</span>val<span class="token operator">:</span> All<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'foo'</span><span class="token operator">:</span>
      <span class="token comment">// 这里 val 被收窄为 Foo</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'bar'</span><span class="token operator">:</span>
      <span class="token comment">// val 在这里是 Bar</span>
      <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token comment">// val 在这里是 never</span>
      <span class="token keyword">const</span> exhaustiveCheck<span class="token operator">:</span> <span class="token builtin">never</span> <span class="token operator">=</span> val
      <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意在 default 里面把被收窄为 never 的 val 赋值给一个显式声明为 never 的变量。如果一切逻辑正确，那么这里应该能够编译通过。但是假如后来有一天别人改了 All 的类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">All</span> <span class="token operator">=</span> Foo <span class="token operator">|</span> Bar <span class="token operator">|</span> Baz
</code></pre></div><p>他忘记了在 handleValue 里面加上针对 Baz 的处理逻辑，这个时候在default branch 里面 val 会被收窄为 Baz，导致无法赋值给 never，产生一个编译错误。所以通过这个办法，可以确保 handleValue 总是穷尽 (exhaust) 了所有 All 的可能类型。</p> <h3 id="类型收窄"><a href="#类型收窄" class="header-anchor">#</a> 类型收窄</h3> <p>ts会要求做的事情，必须对每个联合的成员都是有效的。举个例子，如果你有一个联合类型 string | number , 你不能使用只存在 string 上的方法：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">printId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//类型“string | number”上不存在属性“toUpperCase”。</span>
<span class="token comment">//类型“number”上不存在属性“toUpperCase”。</span>
<span class="token punctuation">}</span>
</code></pre></div><p>解决方案是用代码收窄联合类型，就像你在 JavaScript 没有类型注解那样使用。当 TypeScript 可以根据代码的结构推断出一个更加具体的类型时，<code>类型收窄</code>就会出现。</p> <p>举个例子，TypeScript 知道，对一个 string 类型的值使用 typeof 会返回字符串 &quot;string&quot;：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">printId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// In this branch, id is of type 'string'</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Here, id is of type 'number'</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-unknown类型"><a href="#ts-unknown类型" class="header-anchor">#</a> TS unknown类型</h3> <p>unknown类型:unknown类型只能分配给 <em><strong>any类型和unknown类型</strong></em> 本身</p> <p>unknown类型是TS3新增的类型，这个类型与any类型类似，可以设置任何的类型值，随后可以更改类型。因此可以将变量先设置为字符串类型，然后再将其设置为数字类型，如果事先不检查类型，<em><strong>使用any类型，调用了不存在的方法，编译时不会报错，代码运行时才会发现错误。但是使用unknown 类型不一样，如果不进行类型判断，执行相关操作编译器就会报错。</strong></em></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 编译器能顺利编译，当运行 node any，编译后的代码能正常执行吗？答案是显而易见的，会报异常</span>
<span class="token keyword">let</span> val<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token string">&quot;string value&quot;</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
val<span class="token punctuation">.</span><span class="token function">doesnotexist</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 编译时Property 'push' does not exist on type 'unknown'.</span>
<span class="token keyword">let</span> val<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token string">&quot;string value&quot;</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
val<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> val<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token string">&quot;string value&quot;</span><span class="token punctuation">;</span>
val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  val<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">unknown</span>

<span class="token keyword">let</span> value1<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> value   <span class="token comment">// OK</span>
<span class="token keyword">let</span> value2<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> value       <span class="token comment">// OK</span>

<span class="token keyword">let</span> value3<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> value   <span class="token comment">// Error</span>
<span class="token keyword">let</span> value4<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> value    <span class="token comment">// Error</span>
<span class="token keyword">let</span> value5<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> value    <span class="token comment">// Error</span>
<span class="token keyword">let</span> value6<span class="token operator">:</span> object <span class="token operator">=</span> value    <span class="token comment">// Error</span>
<span class="token keyword">let</span> value7<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> value     <span class="token comment">// Error</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">unknown</span>

value <span class="token operator">=</span> <span class="token boolean">true</span>             <span class="token comment">// OK</span>
value <span class="token operator">=</span> <span class="token number">10</span>               <span class="token comment">// OK</span>
value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>               <span class="token comment">// OK</span>
value <span class="token operator">=</span> <span class="token keyword">null</span>             <span class="token comment">// OK</span>
value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// OK</span>
<span class="token operator">...</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>unknown 类型在被确定为某个类型之前，不能被进行诸如函数执行、实例化等操作，一定程度上对类型进行了保护。</p></blockquote> <h3 id="ts联合类型"><a href="#ts联合类型" class="header-anchor">#</a> TS联合类型 |</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">var</span> val<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span> 
</code></pre></div><ol><li>如果一个值是联合类型，<code>那么只能访问联合类型的共有属性或方法。</code></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">destroy</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">climb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> pet<span class="token operator">:</span> Dog <span class="token operator">|</span> Cat<span class="token punctuation">;</span>
pet<span class="token operator">!</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// OK</span>
pet<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
pet<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">climb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
</code></pre></div><ul><li>如果创建一个pet对象，只写了公共的方法，如果同时没有Dog1的destroy和Cat1的climb，就会报错，<code>需要选择一个存在，也不能两个同时存在。</code></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Dog1</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">destroy</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Cat1</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">climb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> pet<span class="token operator">:</span>  Cat1<span class="token operator">|</span>Dog1 <span class="token punctuation">;</span>

<span class="token comment">// 不能将类型“{ name: string; eat(): void; }”分配给类型“Dog1 | Cat1”。</span>
<span class="token comment">// 类型 &quot;{ name: string; eat(): void; }&quot; 中缺少属性 &quot;climb&quot;，但类型 &quot;Cat1&quot; 中需要该属性。ts(2322)</span>
pet <span class="token operator">=</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'32'</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// destroy(){</span>
  <span class="token comment">//   console.log('destory')</span>
  <span class="token comment">// },</span>
  <span class="token comment">// climb(){</span>
  <span class="token comment">//   console.log('climb')</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span>
<span class="token comment">// pet.destroy()</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>pet<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>可辨识联合</li></ol> <p>函数 area() 的参数是一个 Rectangle | Circle | Parallelogram 联合类型。</p> <p>其中，每个接口都有一个 type 属性，根据其不同的字符串字面量类型引导到不同的 case 分支，这种情况我们称之为 <strong>『可辨识联合（Discriminated Union）』</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">;</span>
  width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Parallelogram</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">&quot;parallelogram&quot;</span><span class="token punctuation">;</span>
  bottom<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> Rectangle <span class="token operator">|</span> Circle <span class="token operator">|</span> Parallelogram<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>shape<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> shape<span class="token punctuation">.</span>width <span class="token operator">*</span> shape<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>shape<span class="token punctuation">.</span>radius<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;parallelogram&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> shape<span class="token punctuation">.</span>bottom <span class="token operator">*</span> shape<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> shape<span class="token operator">:</span> Circle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">area</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="ts-交叉类型"><a href="#ts-交叉类型" class="header-anchor">#</a> TS 交叉类型</h3> <p>交叉类型 &amp; :&amp; 的意思理解成 and ，A &amp; B 表示同时包含 A 和 B 的结果</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Admin</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  administrator<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  groups<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">createLog</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> t<span class="token operator">:</span> Admin <span class="token operator">&amp;</span> User<span class="token punctuation">;</span>

t<span class="token operator">!</span><span class="token punctuation">.</span>administrator<span class="token punctuation">;</span> <span class="token comment">// 合法 Admin.administrator: string</span>
t<span class="token operator">!</span><span class="token punctuation">.</span>groups<span class="token punctuation">;</span> <span class="token comment">// 合法 User.groups: number[]</span>
t<span class="token operator">!</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span class="token comment">// 合法 id: number</span>
t<span class="token operator">!</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">;</span> <span class="token comment">// 合法 timestamp: never</span>


</code></pre></div><ul><li>应用场景:混入之类的</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>first <span class="token keyword">as</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> first <span class="token keyword">as</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ConsoleLogger</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jim <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jim'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> jim<span class="token punctuation">.</span>name
jim<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//log</span>

</code></pre></div><blockquote><p>合并后即可访问 Person 类实例的 name 属性，也可以调用 ConsoleLogger 类实例的 log() 方法。</p></blockquote> <h3 id="ts-类型别名"><a href="#ts-类型别名" class="header-anchor">#</a> TS 类型别名</h3> <p>顾名思义，一个可以指代任意类型的名字，类型别名会给类型起个新名字。类型别名有时和接口很像，但是 <strong>可以作用于原始值，联合类型，元组以及其它任何需要手写的类型。</strong></p> <p><em><strong>类型别名不会新建一个类型，而是创建一个新名字来引用此类型。</strong></em></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">brand</span> <span class="token operator">=</span> <span class="token builtin">string</span>
<span class="token keyword">type</span> <span class="token class-name">used</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>

<span class="token keyword">const</span> str<span class="token operator">:</span> brand <span class="token operator">=</span> <span class="token string">'imooc'</span>
<span class="token keyword">const</span> state<span class="token operator">:</span> used <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Admin</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  administrator<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  groups<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">createLog</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Admin <span class="token operator">&amp;</span> User<span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  left<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  right<span class="token operator">:</span> <span class="token constant">U</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>接口可以实现 extends 和 implements,类型别名可以借助&amp;进行继承,实现类应用type也可以借助implements</li> <li><em><strong>类型别名并不会创建新类型，是对原有类型的引用，而接口会定义一个新类型。</strong></em></li> <li>接口只能用于定义对象类型，而类型别名的声明方式除了对象之外还可以定义交叉、联合、原始类型等。</li> <li>类型别名是最初 TypeScript 做类型约束的主要形式，后来引入接口之后，TS推荐尽可能的使用接口来规范代码。</li></ul> <hr> <ul><li>字面量类型:字面量（literal）是用于表达源代码中一个固定值的表示法（notation）</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> protagonist<span class="token operator">:</span> <span class="token string">'Sherlock'</span>

protagonist <span class="token operator">=</span> <span class="token string">'Sherlock'</span>
protagonist <span class="token operator">=</span> <span class="token string">'Watson'</span> <span class="token comment">// Error, Type '&quot;Watson&quot;' is not assignable to type '&quot;Sherlock&quot;'</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Easing</span> <span class="token operator">=</span> <span class="token string">'ease-in'</span> <span class="token operator">|</span> <span class="token string">'ease-out'</span> <span class="token operator">|</span> <span class="token string">'ease-in-out'</span>
<span class="token keyword">class</span> <span class="token class-name">UIElement</span> <span class="token punctuation">{</span>
  <span class="token function">animate</span><span class="token punctuation">(</span>dx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> dy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> easing<span class="token operator">:</span> Easing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>easing <span class="token operator">===</span> <span class="token string">'ease-in'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>easing <span class="token operator">===</span> <span class="token string">'ease-out'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>easing <span class="token operator">===</span> <span class="token string">'ease-in-out'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// Error, 不应该传递 null 或 undefined</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UIElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
button<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'ease-in'</span><span class="token punctuation">)</span>
button<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'uneasy'</span><span class="token punctuation">)</span> <span class="token comment">// Error, 'uneasy' 不被允许</span>
</code></pre></div><hr> <h3 id="ts索引类型"><a href="#ts索引类型" class="header-anchor">#</a> TS索引类型</h3> <ol><li>索引类型可以让 TypeScript 编译器覆盖检测到使用了动态属性名的代码</li> <li>索引类型查询操作符（keyof）和索引访问操作符（T[K]）</li> <li><em><strong>keyof 可以获取对象/接口的可访问索引字符串字面量类型</strong></em></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  phone<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token keyword">readonly</span> department<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Token</span><span class="token punctuation">{</span>
  <span class="token keyword">private</span> secret<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
  <span class="token keyword">public</span> accessExp<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span>
  <span class="token keyword">public</span> refreshExp<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token comment">//let user: keyof User // let user: &quot;id&quot; | &quot;phone&quot; | &quot;nickname&quot; | &quot;department&quot;</span>

<span class="token keyword">let</span> user<span class="token operator">:</span> <span class="token keyword">keyof</span> User <span class="token operator">=</span><span class="token string">'nickname'</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token comment">//nickname</span>
<span class="token keyword">type</span> <span class="token class-name">token</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Token <span class="token comment">// type token = &quot;accessExp&quot; | &quot;refreshExp&quot;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Token</span><span class="token punctuation">{</span>
  <span class="token keyword">public</span> secret<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'ixeFoe3x.2doa'</span>
  <span class="token keyword">public</span> accessExp<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span>
  <span class="token keyword">public</span> refreshExp<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">3</span>
  <span class="token keyword">public</span> br <span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token operator">=</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">token</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Token
<span class="token keyword">type</span> <span class="token class-name">valueType</span> <span class="token operator">=</span> Token<span class="token punctuation">[</span>token<span class="token punctuation">]</span> <span class="token comment">// type valueType = string | number|boolean</span>
<span class="token keyword">type</span> <span class="token class-name">secret</span> <span class="token operator">=</span> Token<span class="token punctuation">[</span><span class="token string">'secret'</span><span class="token punctuation">]</span> <span class="token comment">// type secret = string</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//参见 ts-extends类型约束</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pluck</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>o<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> names<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  position<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Evan'</span><span class="token punctuation">,</span>
  position<span class="token operator">:</span> <span class="token string">'Software Engineer'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> values<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">pluck</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token comment">//[ 'Evan', 27 ]</span>
</code></pre></div><h4 id="k-extends-keyof-t和keyof-t注意区别"><a href="#k-extends-keyof-t和keyof-t注意区别" class="header-anchor">#</a> K extends keyof T和keyof T注意区别</h4> <p>区别在于第一种情况下返回类型为 T[K] 而第二种情况下返回类型为 &lt;代码&gt;T[keyof T].K 可以是最宽的 keyof T 但它可以是表示键的特定字符串文字类型.这意味着如果 K 是特定属性，则返回值将与该属性具有相同的类型:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">prop</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">prop2</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    p1<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    p2<span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">prop</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'p1'</span><span class="token punctuation">)</span> <span class="token comment">// is number, K is of type 'p1'</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> <span class="token function">prop2</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'p1'</span><span class="token punctuation">)</span> <span class="token comment">// is number | string, no extra info is captured</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token comment">//0 0</span>
</code></pre></div><hr> <h3 id="ts映射类型-partial-readonly"><a href="#ts映射类型-partial-readonly" class="header-anchor">#</a> TS映射类型 Partial Readonly</h3> <p><code>ts可以使用泛型来做类型映射</code>，将对象或数组中类型转换为另一个类型。</p> <p>映射类型可以将已知类型的每个属性都变为可选的或者只读的。使用 <em><strong>Readonly 与 Partial 关键字</strong></em></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">PersonOptional</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">PersonReadonly</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>

</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PersonOptional</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PersonReadonly</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>两个关键字的源码分析</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Partial&lt;T&gt;</code> 是如何实现类型转化的呢？</p> <ul><li>遍历入参 T ，获得每一对 key, value</li> <li>将每一对中的 key 变为可选，即添加 ?</li> <li>希望得到的是由 key, value 组成的新类型</li></ul> <hr> <h3 id="条件类型"><a href="#条件类型" class="header-anchor">#</a> 条件类型</h3> <p>条件类型就是在初始状态并不直接确定具体类型，而是通过一定的类型运算得到最终的变量类型</p> <p>条件类型用来表达非均匀类型映射，可以根据一个条件表达式来进行类型检测，从两个类型中选出其中一个：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">X</span> <span class="token operator">:</span> <span class="token constant">Y</span>
</code></pre></div><blockquote><p>语义类似三目运算符：若 T 是 U 的子类型，则类型为 X，否则类型为 Y。若无法确定 T 是否为 U 的子类型，则类型为 X | Y。</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token builtin">string</span> <span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token comment">//在条件不确定的情况下，得到了联合类型 string | number</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// const x: string | number</span>

<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// const y: string</span>
<span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// const z: number</span>

</code></pre></div><h4 id="可分配条件类型"><a href="#可分配条件类型" class="header-anchor">#</a> 可分配条件类型</h4> <p>在条件类型 T extends U ? X : Y 中，当泛型参数 T 取值为 A | B | C 时，这个条件类型就等价于 (A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)，这就是可分配条件类型。</p> <p>可分配条件类型（distributive conditional type）中被检查的类型必须是裸类型参数（naked type parameter）。裸类型表示没有被包裹（Wrapped） 的类型，（如：<code>Array&lt;T&gt;、[T]、Promise&lt;T&gt;</code> 等都不是裸类型），简而言之裸类型就是未经过任何其他类型修饰或包装的类型。</p> <ul><li>应用场景</li></ul> <ol><li><code>Exclude&lt;T, U&gt;</code> – 从 T 中剔除可以赋值给 U 的类型。</li> <li><code>Extract&lt;T, U&gt;</code> – 提取 T 中可以赋值给 U 的类型。</li> <li><code>NonNullable&lt;T&gt;</code> – 从 T 中剔除 null 和 undefined。</li> <li><code>ReturnType&lt;T&gt;</code> – 获取函数返回值类型。</li> <li><code>InstanceType&lt;T&gt;</code> – 获取构造函数类型的实例类型。</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T00</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span> <span class="token operator">|</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'c'</span> <span class="token operator">|</span> <span class="token string">'f'</span><span class="token operator">&gt;</span>  <span class="token comment">// 'b' | 'd'</span>
</code></pre></div><p>Exclude实现源码：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * Exclude from T those types that are assignable to U
 */</span>
<span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Function</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">FunctionProperties<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> FunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span>
<span class="token comment">//type Pick&lt;T, K extends keyof T&gt; = { [P in K]: T[P]; }</span>
<span class="token keyword">interface</span> <span class="token class-name">Part</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  subparts<span class="token operator">:</span> Part<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token function-variable function">firstFn</span><span class="token operator">:</span> <span class="token punctuation">(</span>brand<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
  <span class="token function-variable function">anotherFn</span><span class="token operator">:</span> <span class="token punctuation">(</span>channel<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FnNames</span> <span class="token operator">=</span> FunctionPropertyNames<span class="token operator">&lt;</span>Part<span class="token operator">&gt;</span> <span class="token comment">//type FnNames = &quot;firstFn&quot; | &quot;anotherFn&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">FnProperties</span> <span class="token operator">=</span> FunctionProperties<span class="token operator">&lt;</span>Part<span class="token operator">&gt;</span>
<span class="token comment">// type FnProperties = {</span>
<span class="token comment">//   firstFn: (brand: string) =&gt; void;</span>
<span class="token comment">//   anotherFn: (channel: string) =&gt; string;</span>
<span class="token comment">// }</span>
</code></pre></div><h3 id="ts字面量类型"><a href="#ts字面量类型" class="header-anchor">#</a> ts字面量类型</h3> <p>可以将类型声明为更具体的数字或者字符串</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// OK</span>
x <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
x <span class="token operator">=</span> <span class="token string">&quot;howdy&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Type '&quot;howdy&quot;' is not assignable to type '&quot;hello&quot;'.</span>
</code></pre></div><p>字面量类型本身并没有什么太大用,如果结合联合类型，就显得有用多了。举个例子，当函数只能传入一些固定的字符串时：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">printText</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> alignment<span class="token operator">:</span> <span class="token string">&quot;left&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;right&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token function">printText</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printText</span><span class="token punctuation">(</span><span class="token string">&quot;G'day, mate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;centre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Argument of type '&quot;centre&quot;' is not assignable to parameter of type '&quot;left&quot; | &quot;right&quot; | &quot;center&quot;'.</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">configure</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Options <span class="token operator">|</span> <span class="token string">&quot;auto&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">configure</span><span class="token punctuation">(</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">configure</span><span class="token punctuation">(</span><span class="token string">&quot;automatic&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Argument of type '&quot;automatic&quot;' is not assignable to parameter of type 'Options | &quot;auto&quot;'.</span>
</code></pre></div><h4 id="字面量推断"><a href="#字面量推断" class="header-anchor">#</a> 字面量推断</h4> <p>当初始化变量为一个对象的时候，TypeScript 会假设这个对象的属性的值未来会被修改.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">handleRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> req<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 类型“string”的参数不能赋给类型“&quot;GET&quot; | &quot;POST&quot;”的参数。</span>
</code></pre></div><p>在上面这个例子里，req.method 被推断为 string ，而不是 &quot;GET&quot;，<code>因为在创建 req 和 调用 handleRequest 函数之间，可能还有其他的代码，或许会将 req.method 赋值一个新字符串比如 &quot;Guess&quot; 。</code>所以 TypeScript 就报错了。</p> <p>修改 1 表示“我有意让 req.method 的类型为字面量类型 &quot;GET&quot;，这会阻止未来可能赋值为 &quot;GUESS&quot; 等字段”。修改 2 表示“我知道 req.method 的值是 &quot;GET&quot;”.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token comment">// Change 1:</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token keyword">as</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//  req.method =111 //不能将类型“111”分配给类型“&quot;GET&quot;”</span>
<span class="token comment">// Change 2</span>
<span class="token function">handleRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> req<span class="token punctuation">.</span>method <span class="token keyword">as</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以使用 as const 把整个对象转为一个类型字面量：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// req.method=2222 //无法分配到 &quot;method&quot; ，因为它是只读属性。</span>
<span class="token function">handleRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> req<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>as const 效果跟 const 类似，但是对类型系统而言，它可以确保所有的属性都被赋予一个字面量类型，而不是一个更通用的类型比如 string 或者 number 。</p> <h3 id="ts-is关键字"><a href="#ts-is关键字" class="header-anchor">#</a> ts is关键字</h3> <p>is 关键字一般用于函数返回值类型中，判断参数是否属于某一类型，并根据结果返回对应的布尔类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code>prop <span class="token keyword">is</span> <span class="token keyword">type</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> s <span class="token operator">===</span> <span class="token string">'string'</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Error, Object is of type 'unknown'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><p>一个 unknown 类型的对象不能进行 toUpperCase() 操作，可是在上一行明明已经通过 isString() 函数确认参数 x 为 string 类型，<strong>但是由于函数嵌套 TypeScript 不能进行正确的类型判断。</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isString <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> s <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> s <span class="token operator">===</span> <span class="token string">'string'</span>

<span class="token keyword">function</span> <span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'x1'</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'x2'</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> isString<span class="token punctuation">)</span><span class="token comment">//function</span>


<span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token string">'ylc'</span><span class="token punctuation">)</span>

<span class="token comment">// function</span>
<span class="token comment">// x2 3</span>
<span class="token comment">// x1 ylc</span>
<span class="token comment">// x2 ylc</span>

</code></pre></div><p>通过 is 关键字将类型范围缩小为 string 类型，这也是一种代码健壮性的约束规范。</p> <h3 id="ts-infer关键字"><a href="#ts-infer关键字" class="header-anchor">#</a> ts infer关键字</h3> <ul><li>想在获取数组里的元素类型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Ids</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Names</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Unpacked<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Names</span> <span class="token operator">?</span> <span class="token builtin">string</span> <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ids</span> <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">idType</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span>Ids<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// idType 类型为 number</span>
<span class="token keyword">type</span> <span class="token class-name">nameType</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span>Names<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// nameType 类型为string</span>

<span class="token keyword">let</span> fnum<span class="token operator">:</span>idType <span class="token operator">=</span> <span class="token number">1000</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fnum<span class="token punctuation">)</span><span class="token comment">//1000</span>
</code></pre></div><p>如果T是某个待推断类型的数组，则返回推断的类型，否则返回T</p> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token keyword">type</span> <span class="token class-name">ElementOf<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span>infer <span class="token constant">E</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">E</span> <span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Tuple</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// string[] exnteds Array&lt;string&gt; =&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion</span> <span class="token operator">=</span> ElementOf<span class="token operator">&lt;</span>Tuple<span class="token operator">&gt;</span>

<span class="token keyword">let</span> k20t1<span class="token operator">:</span>TupleToUnion <span class="token operator">=</span><span class="token string">'30'</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k20t1<span class="token punctuation">)</span><span class="token comment">//“30”</span>

<span class="token comment">// number extends Array&lt;?&gt; =&gt;不成立，走boolean</span>
<span class="token keyword">let</span> k20t2<span class="token operator">:</span>ElementOf<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k20t2<span class="token punctuation">)</span><span class="token comment">//56423 数字</span>
</code></pre></div><p>infer可以推断出联合类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Foo21<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> infer <span class="token constant">U</span><span class="token punctuation">;</span> b<span class="token operator">:</span> infer <span class="token constant">U</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T11</span></span> <span class="token operator">=</span> Foo21<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T11类型为 string | number</span>

<span class="token keyword">let</span> a1<span class="token operator">:</span><span class="token constant">T11</span> <span class="token operator">=</span> <span class="token string">'30'</span>
<span class="token keyword">let</span> b1<span class="token operator">:</span><span class="token constant">T11</span> <span class="token operator">=</span> <span class="token string">'demo'</span>
<span class="token keyword">let</span> d1<span class="token operator">:</span>Foo21<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token number">1999</span>

<span class="token comment">//let c1:T11 = true //Type 'boolean' is not assignable to type 'string | number'.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span>b1<span class="token punctuation">,</span>d1<span class="token punctuation">)</span><span class="token comment">//&quot;30&quot; &quot;demo&quot; 1999</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K2</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> infer <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> infer <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
  <span class="token operator">?</span> <span class="token constant">U</span>
  <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">k3</span> <span class="token operator">=</span> <span class="token constant">K2</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app<span class="token operator">:</span> k3 <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;k17&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ name: 'k17', age: 30 }</span>

</code></pre></div><div class="custom-block danger"><p class="custom-block-title">容易混淆的点</p> <ol><li><em><strong>TypeScript 中描述类型要用 小写</strong></em> ，比如 boolean、number、string等；</li> <li>大写开头的如 Boolean、Number、String 代表的是 JavaScript 的构造函数:</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> a1<span class="token operator">:</span> Number <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token comment">// a === 10 为 false</span>
<span class="token keyword">let</span> b1<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token comment">// b === 10 为 true</span>

<span class="token comment">//let c1: number = new Number('10')</span>
<span class="token comment">// 不能将类型“Number”分配给类型“number”。“number”是基元，但“Number”是包装器对象。如可能首选使用“number”。</span>

<span class="token comment">// a1 instanceof Number // true</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token keyword">typeof</span> a1<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b1'</span><span class="token punctuation">,</span><span class="token keyword">typeof</span> b1<span class="token punctuation">)</span>

<span class="token comment">// b1 instanceof Number // false </span>
<span class="token comment">//The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter.</span>

</code></pre></div><p>第 1 行，通过 new Number('10') 得到的是一个构造函数，本质是一个对象。</p> <p>第 2 行，Number('10') 与 10 都是声明一个数字 10 的方法，本质就是一个数字。</p> <p>第 4 - 5 行，instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上。a 是一个对象，它的 <code>__proto__</code> 属性指向该对象的构造函数的原型对象 Number，所以为 true。b 是一个数字，所以为 false。</p></div> <p><em><strong>当用构造函数定义的a。虽然是对象，但是a.__proto__会被认为错误，提示a是数字类型</strong></em> ，可以通过any强制修改类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> a<span class="token operator">:</span> Number <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token comment">// a === 10 为 false</span>
<span class="token keyword">let</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token comment">// b === 10 为 true</span>

<span class="token comment">// a instanceof Number // true</span>
<span class="token comment">// Object.getPrototypeOf(a) </span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">===</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token operator">===</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token punctuation">)</span>

<span class="token comment">// console.log(a.__proto__)//类型“Number”上不存在属性“__proto__”。</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span>
</code></pre></div><h3 id="ts函数"><a href="#ts函数" class="header-anchor">#</a> TS函数</h3> <p><code>参数类型注解</code>：当声明一个函数的时候，可以在<code>每个参数</code>后面添加一个<code>类型注解</code>，声明函数可以接受什么类型的参数。当参数有了类型注解的时候，TypeScript 便会<code>检查函数的实参</code>：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Parameter type annotation</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token comment">// 类型“number”的参数不能赋给类型“string”的参数。</span>
</code></pre></div><p><code>返回值类型注解</code>:也可以添加返回值的类型注解,跟变量类型注解一样，也不需要总是添加返回值类型注解,TS会基于它的 return 语句推断函数的返回类型。</p> <ul><li>基本格式</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码只是对 = 等号右侧的匿名函数进行了类型定义，等号左侧的 add 同样可以添加类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">string</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，等号左侧的类型定义由两部分组成：参数类型和返回值类型，通过 =&gt; 符号来连接。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//也可以省略左边</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>也可以将约束条件提取出来：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token function-variable function">compute</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token builtin">number</span>
<span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
<span class="token function">compute</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="匿名函数"><a href="#匿名函数" class="header-anchor">#</a> 匿名函数</h4> <p>匿名函数有一点不同于函数声明，当 TypeScript 知道一个匿名函数将被怎样调用的时候，匿名函数的参数会被自动的指定类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//类型“number”上不存在属性“toUpperCase”。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>尽管参数 s 并没有添加类型注解，但 TypeScript 根据 forEach 函数的类型，以及传入的数组的类型，最后推断出了 s 的类型。</p> <p>这个过程被称为<code>上下文推断（contextual typing）</code>，因为正是从函数出现的上下文中推断出了它应该有的类型。</p> <h4 id="可选参数和默认参数"><a href="#可选参数和默认参数" class="header-anchor">#</a> 可选参数和默认参数</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> lastName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastName<span class="token punctuation">)</span>
        <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token keyword">return</span> firstName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Adams&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sr.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 错误，参数太多了</span>
<span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Adams&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 默认参数：这样第二个参数可传可不传</span>
<span class="token keyword">function</span> <span class="token function">calculate_discount</span><span class="token punctuation">(</span>price<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>rate<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> discount <span class="token operator">=</span> price <span class="token operator">*</span> rate<span class="token punctuation">;</span> 
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;计算结果: &quot;</span><span class="token punctuation">,</span>discount<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre></div><ul><li>剩余参数:函数的最后一个命名参数 restOfName 以 ... 为前缀，它将成为一个由剩余参数组成的数组，索引值从0（包括）到 restOfName.length（不包括）。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>restOfName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> restOfName<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> employeeName <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Joseph&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Samuel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lucas&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MacKinzie&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="重载函数"><a href="#重载函数" class="header-anchor">#</a> 重载函数</h4> <p>编译器并不知道入参是什么类型的，返回值类型也不能确定。这时可以为同一个函数提供多个函数类型定义来进行函数重载。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>

<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">+</span><span class="token punctuation">[</span><span class="token operator">...</span>target<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token string">'imooc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// coomi</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token number">23874800</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 847832</span>
</code></pre></div><ul><li>tsconfig.json :2021年默认生成的target是es5,会导致上述代码运行错误：Type 'string' is not an array type.需要开启es2015以上来修改</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* Visit https://aka.ms/tsconfig.json to read more about this file */</span>
    <span class="token comment">/* Basic Options */</span>
    <span class="token comment">// &quot;incremental&quot;: true,                         /* Enable incremental compilation */</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span>                                <span class="token comment">/* Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019', 'ES2020', 'ES2021', or 'ESNEXT'. */</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>                          
     <span class="token property">&quot;downlevelIteration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                  <span class="token comment">/* Provide full support for iterables in 'for-of', spread, and destructuring whe
    &quot;forceConsistentCasingInFileNames&quot;: true        /* Disallow inconsistently-cased references to the same file. */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="函数声明法"><a href="#函数声明法" class="header-anchor">#</a> 函数声明法</h4> <p>函数声明法创建函数是最常用的函数定义法。使用function关键字和函数名去定义一个函数。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>n1<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>n2<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> n1<span class="token operator">+</span>n2
<span class="token punctuation">}</span>
</code></pre></div><h4 id="函数表达式法"><a href="#函数表达式法" class="header-anchor">#</a> 函数表达式法</h4> <p>函数表达式法是将一个函数赋值给一个变量，这个变量名就是函数名。通过变量名就可以调用函数了。这种方式定义的函数，必须在定义之后，调用函数。下面例子中等号右边的函数没有函数名，称为匿名函数。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n1<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>n2<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> n1<span class="token operator">+</span>n2
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">func1</span><span class="token operator">:</span> <span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> str <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">func1的函数声明</p> <p>这里的 (str: string) =&gt; number中的<code>=&gt;</code>实际上是返回的意思而不是箭头函数的中的箭头的作用</p></div> <h4 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>n1<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>n2<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> n1<span class="token operator">+</span>n2
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>函数返回值关键字可以是number string之类的也可以无返回值void或者永远不能全部执行结束的never类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">errorEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>还可以使用接口的方式进行定义</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Isum</span><span class="token punctuation">{</span>
	<span class="token punctuation">(</span>age<span class="token operator">:</span>number<span class="token punctuation">,</span>time<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fun<span class="token operator">:</span><span class="token function-variable function">Isum</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
</code></pre></div><hr> <h4 id="ts声明文件"><a href="#ts声明文件" class="header-anchor">#</a> ts声明文件</h4> <p>ts在开发过程中不可避免要引用其他第三方的 JavaScript 的库。虽然通过直接引用可以调用库的类和方法，但是却无法使用TypeScript 诸如类型检查等特性功能。为了解决这个问题，需要将这些库里的函数和方法体去掉后只保留导出类型声明，而产生了一个描述 JavaScript 库和模块信息的声明文件。通过引用这个声明文件，就可以借用 TypeScript 的各种特性来使用库文件了。</p> <p>想使用第三方库，比如 jQuery，通常这样获取一个 id 是 foo 的元素：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或</span>
<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>但是在 TypeScript 中，并不知道 $ 或 jQuery 是什么东西：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// index.ts(1,1): error TS2304: Cannot find name 'jQuery'.</span>
</code></pre></div><p>这时，需要使用 declare 关键字来定义它的类型，帮助 TypeScript 判断我们传入的参数类型对不对：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">var</span> <span class="token function-variable function">jQuery</span><span class="token operator">:</span> <span class="token punctuation">(</span>selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>declare 定义的类型只会用于编译时的检查，编译结果中会被删除。</p> <p>上例的编译结果是：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>声明文件以 .d.ts 为后缀
声明文件或模块的语法格式如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> Module_Name <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>TypeScript 引入声明文件语法格式：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path = &quot; runoob.d.ts&quot; /&gt;</span>
</code></pre></div><hr> <ul><li>迭代器</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IteratorInterface</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">any</span>
    done<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createIterator</span><span class="token punctuation">(</span>array<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> IteratorInterface <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> array<span class="token punctuation">.</span>length

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> index <span class="token operator">&lt;</span> len <span class="token operator">?</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> array<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> iterator <span class="token operator">=</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 2, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 3, done: false }</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div><p>只有一个对象实现了 Symbol.iterator 属性时，我们才认为它是可迭代的。一些内置的类型如 Array，Map，Set，String，Int32Array，Uint32Array 等都已经实现了各自的 Symbol.iterator。</p> <p>Symbol.iterator 属性本身是一个函数，就是当前数据结构默认的迭代器生成函数。执行这个函数，就会返回一个迭代器。</p> <p>比如，String 是一个内置的可迭代对象：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> str<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hi'</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> str<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// function</span>
</code></pre></div><hr> <p><a href="https://www.imooc.com/wiki/typescriptlesson/tsintroduction.html" target="_blank" rel="noopener noreferrer">TS教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.tslang.cn/play/index.html" target="_blank" rel="noopener noreferrer">typescript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">7/1/2022, 9:04:19 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/typescript/001tsbasic.html">
         ts数据类型和函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9c05b5f4.js" defer></script><script src="/assets/js/2.a4772d56.js" defer></script><script src="/assets/js/335.7f791afb.js" defer></script><script src="/assets/js/11.f266fedf.js" defer></script><script src="/assets/js/10.f6649cbd.js" defer></script>
  </body>
</html>
