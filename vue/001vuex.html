<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[vuex状态管理模式] | web</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="welcome">
    
    <link rel="preload" href="/assets/css/0.styles.8ee7aa31.css" as="style"><link rel="preload" href="/assets/js/app.723af4b8.js" as="script"><link rel="preload" href="/assets/js/2.1a953b48.js" as="script"><link rel="preload" href="/assets/js/350.6b54869e.js" as="script"><link rel="preload" href="/assets/js/10.174ca6d2.js" as="script"><link rel="prefetch" href="/assets/js/100.44c5de48.js"><link rel="prefetch" href="/assets/js/101.25b5303b.js"><link rel="prefetch" href="/assets/js/102.ec5c2990.js"><link rel="prefetch" href="/assets/js/103.24c3667f.js"><link rel="prefetch" href="/assets/js/104.534cd464.js"><link rel="prefetch" href="/assets/js/105.f3e28ee5.js"><link rel="prefetch" href="/assets/js/106.a51cc69e.js"><link rel="prefetch" href="/assets/js/107.1f1aecb1.js"><link rel="prefetch" href="/assets/js/108.98f59831.js"><link rel="prefetch" href="/assets/js/109.7dc23bc6.js"><link rel="prefetch" href="/assets/js/11.572c9dff.js"><link rel="prefetch" href="/assets/js/110.c706ab89.js"><link rel="prefetch" href="/assets/js/111.4a1432ba.js"><link rel="prefetch" href="/assets/js/112.939c31ab.js"><link rel="prefetch" href="/assets/js/113.90d44e96.js"><link rel="prefetch" href="/assets/js/114.e5c3521f.js"><link rel="prefetch" href="/assets/js/115.63d299d7.js"><link rel="prefetch" href="/assets/js/116.520954f9.js"><link rel="prefetch" href="/assets/js/117.415aaf2d.js"><link rel="prefetch" href="/assets/js/118.e087cb94.js"><link rel="prefetch" href="/assets/js/119.ce95d5ee.js"><link rel="prefetch" href="/assets/js/12.5d2b7202.js"><link rel="prefetch" href="/assets/js/120.920a298d.js"><link rel="prefetch" href="/assets/js/121.64d85adb.js"><link rel="prefetch" href="/assets/js/122.05baa0ac.js"><link rel="prefetch" href="/assets/js/123.f89f3624.js"><link rel="prefetch" href="/assets/js/124.631d5196.js"><link rel="prefetch" href="/assets/js/125.8d54b41c.js"><link rel="prefetch" href="/assets/js/126.0e3ba958.js"><link rel="prefetch" href="/assets/js/127.975ea276.js"><link rel="prefetch" href="/assets/js/128.618446a2.js"><link rel="prefetch" href="/assets/js/129.ea7fb480.js"><link rel="prefetch" href="/assets/js/13.980612a9.js"><link rel="prefetch" href="/assets/js/130.f6073d4b.js"><link rel="prefetch" href="/assets/js/131.e317c602.js"><link rel="prefetch" href="/assets/js/132.b445e2cc.js"><link rel="prefetch" href="/assets/js/133.6d29499e.js"><link rel="prefetch" href="/assets/js/134.75382d92.js"><link rel="prefetch" href="/assets/js/135.b25c62fc.js"><link rel="prefetch" href="/assets/js/136.60b716a3.js"><link rel="prefetch" href="/assets/js/137.5f96043f.js"><link rel="prefetch" href="/assets/js/138.52aa59f9.js"><link rel="prefetch" href="/assets/js/139.d3282c9a.js"><link rel="prefetch" href="/assets/js/14.c561889f.js"><link rel="prefetch" href="/assets/js/140.d1c21594.js"><link rel="prefetch" href="/assets/js/141.5f35f512.js"><link rel="prefetch" href="/assets/js/142.01fd7eac.js"><link rel="prefetch" href="/assets/js/143.5f73fc7d.js"><link rel="prefetch" href="/assets/js/144.4fabc128.js"><link rel="prefetch" href="/assets/js/145.4c2e5b28.js"><link rel="prefetch" href="/assets/js/146.7ba4367c.js"><link rel="prefetch" href="/assets/js/147.39e2cdce.js"><link rel="prefetch" href="/assets/js/148.a9cbda46.js"><link rel="prefetch" href="/assets/js/149.6a5b3707.js"><link rel="prefetch" href="/assets/js/15.977544a1.js"><link rel="prefetch" href="/assets/js/150.2013929c.js"><link rel="prefetch" href="/assets/js/151.6321f692.js"><link rel="prefetch" href="/assets/js/152.af7ee793.js"><link rel="prefetch" href="/assets/js/153.7e55d908.js"><link rel="prefetch" href="/assets/js/154.5e71a6a8.js"><link rel="prefetch" href="/assets/js/155.789f418c.js"><link rel="prefetch" href="/assets/js/156.04740528.js"><link rel="prefetch" href="/assets/js/157.f655ed66.js"><link rel="prefetch" href="/assets/js/158.24285765.js"><link rel="prefetch" href="/assets/js/159.8983fd5c.js"><link rel="prefetch" href="/assets/js/16.23c8640b.js"><link rel="prefetch" href="/assets/js/160.efcdcb65.js"><link rel="prefetch" href="/assets/js/161.a20916c1.js"><link rel="prefetch" href="/assets/js/162.5abb0685.js"><link rel="prefetch" href="/assets/js/163.b1d92289.js"><link rel="prefetch" href="/assets/js/164.4a530493.js"><link rel="prefetch" href="/assets/js/165.9aafd7bd.js"><link rel="prefetch" href="/assets/js/166.dddf88b5.js"><link rel="prefetch" href="/assets/js/167.7b40496d.js"><link rel="prefetch" href="/assets/js/168.6626efc1.js"><link rel="prefetch" href="/assets/js/169.4e05c213.js"><link rel="prefetch" href="/assets/js/17.ac01d803.js"><link rel="prefetch" href="/assets/js/170.c8b46d13.js"><link rel="prefetch" href="/assets/js/171.bda5dc99.js"><link rel="prefetch" href="/assets/js/172.2d090345.js"><link rel="prefetch" href="/assets/js/173.ab6cafeb.js"><link rel="prefetch" href="/assets/js/174.da5f1ca5.js"><link rel="prefetch" href="/assets/js/175.3dd176f8.js"><link rel="prefetch" href="/assets/js/176.f53f9b9f.js"><link rel="prefetch" href="/assets/js/177.6871f027.js"><link rel="prefetch" href="/assets/js/178.d7bbf39d.js"><link rel="prefetch" href="/assets/js/179.32270ad7.js"><link rel="prefetch" href="/assets/js/18.ee4a73b3.js"><link rel="prefetch" href="/assets/js/180.902d79e5.js"><link rel="prefetch" href="/assets/js/181.57a42318.js"><link rel="prefetch" href="/assets/js/182.4a761b29.js"><link rel="prefetch" href="/assets/js/183.c68690ed.js"><link rel="prefetch" href="/assets/js/184.94b7c2a5.js"><link rel="prefetch" href="/assets/js/185.df1e37ce.js"><link rel="prefetch" href="/assets/js/186.0556feb3.js"><link rel="prefetch" href="/assets/js/187.b6401e8f.js"><link rel="prefetch" href="/assets/js/188.35fea9fe.js"><link rel="prefetch" href="/assets/js/189.e824b299.js"><link rel="prefetch" href="/assets/js/19.349b3d2f.js"><link rel="prefetch" href="/assets/js/190.dc56684a.js"><link rel="prefetch" href="/assets/js/191.c4be8bf5.js"><link rel="prefetch" href="/assets/js/192.de495931.js"><link rel="prefetch" href="/assets/js/193.55e233a0.js"><link rel="prefetch" href="/assets/js/194.dd3501dd.js"><link rel="prefetch" href="/assets/js/195.f869d9d1.js"><link rel="prefetch" href="/assets/js/196.1dec756b.js"><link rel="prefetch" href="/assets/js/197.b7013cec.js"><link rel="prefetch" href="/assets/js/198.f2037dc7.js"><link rel="prefetch" href="/assets/js/199.16f61477.js"><link rel="prefetch" href="/assets/js/20.c56c3f99.js"><link rel="prefetch" href="/assets/js/200.27cb97b6.js"><link rel="prefetch" href="/assets/js/201.5a138732.js"><link rel="prefetch" href="/assets/js/202.57789129.js"><link rel="prefetch" href="/assets/js/203.7cab272d.js"><link rel="prefetch" href="/assets/js/204.3a29cc32.js"><link rel="prefetch" href="/assets/js/205.3bd9b07d.js"><link rel="prefetch" href="/assets/js/206.39f41a4b.js"><link rel="prefetch" href="/assets/js/207.a59bd345.js"><link rel="prefetch" href="/assets/js/208.83426465.js"><link rel="prefetch" href="/assets/js/209.4648bf68.js"><link rel="prefetch" href="/assets/js/21.036f6efb.js"><link rel="prefetch" href="/assets/js/210.b4a18033.js"><link rel="prefetch" href="/assets/js/211.2f59dcf6.js"><link rel="prefetch" href="/assets/js/212.b99f42d8.js"><link rel="prefetch" href="/assets/js/213.60ec2e7b.js"><link rel="prefetch" href="/assets/js/214.338e82ed.js"><link rel="prefetch" href="/assets/js/215.5d4e34c0.js"><link rel="prefetch" href="/assets/js/216.11cb2ae3.js"><link rel="prefetch" href="/assets/js/217.811b797f.js"><link rel="prefetch" href="/assets/js/218.dee266ad.js"><link rel="prefetch" href="/assets/js/219.b5812024.js"><link rel="prefetch" href="/assets/js/22.30ea717c.js"><link rel="prefetch" href="/assets/js/220.a5c50331.js"><link rel="prefetch" href="/assets/js/221.bb9c094c.js"><link rel="prefetch" href="/assets/js/222.663d4833.js"><link rel="prefetch" href="/assets/js/223.f9fbe530.js"><link rel="prefetch" href="/assets/js/224.71c695e7.js"><link rel="prefetch" href="/assets/js/225.43a375d9.js"><link rel="prefetch" href="/assets/js/226.70e48c22.js"><link rel="prefetch" href="/assets/js/227.1e809b39.js"><link rel="prefetch" href="/assets/js/228.04248725.js"><link rel="prefetch" href="/assets/js/229.b34fb624.js"><link rel="prefetch" href="/assets/js/23.215d8d4b.js"><link rel="prefetch" href="/assets/js/230.537209a1.js"><link rel="prefetch" href="/assets/js/231.58928055.js"><link rel="prefetch" href="/assets/js/232.0f44746a.js"><link rel="prefetch" href="/assets/js/233.151f1407.js"><link rel="prefetch" href="/assets/js/234.6168f5f5.js"><link rel="prefetch" href="/assets/js/235.8cdd44b9.js"><link rel="prefetch" href="/assets/js/236.4347a7e3.js"><link rel="prefetch" href="/assets/js/237.64289124.js"><link rel="prefetch" href="/assets/js/238.dfbe3e0d.js"><link rel="prefetch" href="/assets/js/239.978a61ec.js"><link rel="prefetch" href="/assets/js/24.dff159f7.js"><link rel="prefetch" href="/assets/js/240.a9e82117.js"><link rel="prefetch" href="/assets/js/241.4127d88f.js"><link rel="prefetch" href="/assets/js/242.7a3b827a.js"><link rel="prefetch" href="/assets/js/243.7da48c3e.js"><link rel="prefetch" href="/assets/js/244.6af960f7.js"><link rel="prefetch" href="/assets/js/245.703567cb.js"><link rel="prefetch" href="/assets/js/246.6510a3b5.js"><link rel="prefetch" href="/assets/js/247.a19257c4.js"><link rel="prefetch" href="/assets/js/248.8e726c8c.js"><link rel="prefetch" href="/assets/js/249.7e88c5c6.js"><link rel="prefetch" href="/assets/js/25.09e99b33.js"><link rel="prefetch" href="/assets/js/250.247001f4.js"><link rel="prefetch" href="/assets/js/251.1d90b916.js"><link rel="prefetch" href="/assets/js/252.e4b5e40e.js"><link rel="prefetch" href="/assets/js/253.d06e9389.js"><link rel="prefetch" href="/assets/js/254.168491ef.js"><link rel="prefetch" href="/assets/js/255.c69d6454.js"><link rel="prefetch" href="/assets/js/256.934cbcf9.js"><link rel="prefetch" href="/assets/js/257.5970e168.js"><link rel="prefetch" href="/assets/js/258.5251417a.js"><link rel="prefetch" href="/assets/js/259.c8a9cd1b.js"><link rel="prefetch" href="/assets/js/26.f92284da.js"><link rel="prefetch" href="/assets/js/260.b4b87eec.js"><link rel="prefetch" href="/assets/js/261.d0675044.js"><link rel="prefetch" href="/assets/js/262.ae07077e.js"><link rel="prefetch" href="/assets/js/263.f6d945e6.js"><link rel="prefetch" href="/assets/js/264.4af93020.js"><link rel="prefetch" href="/assets/js/265.1b3a868d.js"><link rel="prefetch" href="/assets/js/266.3184b16a.js"><link rel="prefetch" href="/assets/js/267.02496da2.js"><link rel="prefetch" href="/assets/js/268.79544146.js"><link rel="prefetch" href="/assets/js/269.901e3781.js"><link rel="prefetch" href="/assets/js/27.d5f9f9ed.js"><link rel="prefetch" href="/assets/js/270.49323469.js"><link rel="prefetch" href="/assets/js/271.2d28d9d1.js"><link rel="prefetch" href="/assets/js/272.fbdea9a6.js"><link rel="prefetch" href="/assets/js/273.18d924c5.js"><link rel="prefetch" href="/assets/js/274.07a7c6d6.js"><link rel="prefetch" href="/assets/js/275.13cf2d2f.js"><link rel="prefetch" href="/assets/js/276.79bb770e.js"><link rel="prefetch" href="/assets/js/277.37b2b318.js"><link rel="prefetch" href="/assets/js/278.c999f1b2.js"><link rel="prefetch" href="/assets/js/279.d0280f7e.js"><link rel="prefetch" href="/assets/js/28.c4baf426.js"><link rel="prefetch" href="/assets/js/280.f401125e.js"><link rel="prefetch" href="/assets/js/281.b50f215b.js"><link rel="prefetch" href="/assets/js/282.49a56e42.js"><link rel="prefetch" href="/assets/js/283.b81e0800.js"><link rel="prefetch" href="/assets/js/284.f39f0dce.js"><link rel="prefetch" href="/assets/js/285.74aa05a6.js"><link rel="prefetch" href="/assets/js/286.f3e6a83a.js"><link rel="prefetch" href="/assets/js/287.6e9e1868.js"><link rel="prefetch" href="/assets/js/288.333fd2a2.js"><link rel="prefetch" href="/assets/js/289.bfe91319.js"><link rel="prefetch" href="/assets/js/29.f74a6e32.js"><link rel="prefetch" href="/assets/js/290.53f1a8d3.js"><link rel="prefetch" href="/assets/js/291.cddad13d.js"><link rel="prefetch" href="/assets/js/292.2c78986e.js"><link rel="prefetch" href="/assets/js/293.448d48bc.js"><link rel="prefetch" href="/assets/js/294.79b29b77.js"><link rel="prefetch" href="/assets/js/295.383accee.js"><link rel="prefetch" href="/assets/js/296.a8055b81.js"><link rel="prefetch" href="/assets/js/297.21d82960.js"><link rel="prefetch" href="/assets/js/298.32e54f39.js"><link rel="prefetch" href="/assets/js/299.133a7812.js"><link rel="prefetch" href="/assets/js/3.dc6e325d.js"><link rel="prefetch" href="/assets/js/30.43bca04a.js"><link rel="prefetch" href="/assets/js/300.6cb3ab94.js"><link rel="prefetch" href="/assets/js/301.611e60b2.js"><link rel="prefetch" href="/assets/js/302.76fd9507.js"><link rel="prefetch" href="/assets/js/303.f8e1b214.js"><link rel="prefetch" href="/assets/js/304.e24739bb.js"><link rel="prefetch" href="/assets/js/305.9948c317.js"><link rel="prefetch" href="/assets/js/306.a40109a0.js"><link rel="prefetch" href="/assets/js/307.6a0a4d0e.js"><link rel="prefetch" href="/assets/js/308.d764d252.js"><link rel="prefetch" href="/assets/js/309.fd98df26.js"><link rel="prefetch" href="/assets/js/31.878c6154.js"><link rel="prefetch" href="/assets/js/310.349d75c5.js"><link rel="prefetch" href="/assets/js/311.60835540.js"><link rel="prefetch" href="/assets/js/312.b68ba3bb.js"><link rel="prefetch" href="/assets/js/313.4ed6cb4c.js"><link rel="prefetch" href="/assets/js/314.43d2a6f3.js"><link rel="prefetch" href="/assets/js/315.990a49c5.js"><link rel="prefetch" href="/assets/js/316.f05f135c.js"><link rel="prefetch" href="/assets/js/317.f19d1ea4.js"><link rel="prefetch" href="/assets/js/318.f0d72a0c.js"><link rel="prefetch" href="/assets/js/319.d60d3aa7.js"><link rel="prefetch" href="/assets/js/32.e139d46f.js"><link rel="prefetch" href="/assets/js/320.c0ae74ba.js"><link rel="prefetch" href="/assets/js/321.379641a6.js"><link rel="prefetch" href="/assets/js/322.0bc63bd3.js"><link rel="prefetch" href="/assets/js/323.ace44fca.js"><link rel="prefetch" href="/assets/js/324.9cb1aabe.js"><link rel="prefetch" href="/assets/js/325.dd145b77.js"><link rel="prefetch" href="/assets/js/326.913c0b4e.js"><link rel="prefetch" href="/assets/js/327.6889f9ac.js"><link rel="prefetch" href="/assets/js/328.d54d5d3f.js"><link rel="prefetch" href="/assets/js/329.17aa991f.js"><link rel="prefetch" href="/assets/js/33.03cfda3d.js"><link rel="prefetch" href="/assets/js/330.745b7b85.js"><link rel="prefetch" href="/assets/js/331.de1a7233.js"><link rel="prefetch" href="/assets/js/332.5851baf9.js"><link rel="prefetch" href="/assets/js/333.a8943068.js"><link rel="prefetch" href="/assets/js/334.31164f46.js"><link rel="prefetch" href="/assets/js/335.61c54178.js"><link rel="prefetch" href="/assets/js/336.be60dc46.js"><link rel="prefetch" href="/assets/js/337.c05c9540.js"><link rel="prefetch" href="/assets/js/338.51a51596.js"><link rel="prefetch" href="/assets/js/339.02429d1e.js"><link rel="prefetch" href="/assets/js/34.5cd3b4ed.js"><link rel="prefetch" href="/assets/js/340.374669de.js"><link rel="prefetch" href="/assets/js/341.9805690b.js"><link rel="prefetch" href="/assets/js/342.80b79d1a.js"><link rel="prefetch" href="/assets/js/343.edfb327e.js"><link rel="prefetch" href="/assets/js/344.5c6b4fb6.js"><link rel="prefetch" href="/assets/js/345.a3d4c73b.js"><link rel="prefetch" href="/assets/js/346.6ca98d66.js"><link rel="prefetch" href="/assets/js/347.a92c53e5.js"><link rel="prefetch" href="/assets/js/348.bcd1ad56.js"><link rel="prefetch" href="/assets/js/349.1f3ce756.js"><link rel="prefetch" href="/assets/js/35.65f31b57.js"><link rel="prefetch" href="/assets/js/351.db454056.js"><link rel="prefetch" href="/assets/js/352.38d5d12e.js"><link rel="prefetch" href="/assets/js/353.66504a46.js"><link rel="prefetch" href="/assets/js/354.89145b4f.js"><link rel="prefetch" href="/assets/js/355.f8d337cf.js"><link rel="prefetch" href="/assets/js/356.7f01926f.js"><link rel="prefetch" href="/assets/js/357.bddb9f92.js"><link rel="prefetch" href="/assets/js/358.7d980530.js"><link rel="prefetch" href="/assets/js/359.74ed8d7b.js"><link rel="prefetch" href="/assets/js/36.2bca375f.js"><link rel="prefetch" href="/assets/js/360.31e3fe97.js"><link rel="prefetch" href="/assets/js/361.d4da85cf.js"><link rel="prefetch" href="/assets/js/362.df38f577.js"><link rel="prefetch" href="/assets/js/363.c7aacab0.js"><link rel="prefetch" href="/assets/js/364.357db0ec.js"><link rel="prefetch" href="/assets/js/365.e39dd4d6.js"><link rel="prefetch" href="/assets/js/366.be4d705b.js"><link rel="prefetch" href="/assets/js/367.5027f4e5.js"><link rel="prefetch" href="/assets/js/368.84f650ee.js"><link rel="prefetch" href="/assets/js/369.ca24a683.js"><link rel="prefetch" href="/assets/js/37.b190d4e3.js"><link rel="prefetch" href="/assets/js/370.d9d67062.js"><link rel="prefetch" href="/assets/js/371.e3696511.js"><link rel="prefetch" href="/assets/js/372.e2cc586b.js"><link rel="prefetch" href="/assets/js/373.2cd7aa59.js"><link rel="prefetch" href="/assets/js/374.78a425b9.js"><link rel="prefetch" href="/assets/js/375.4d054647.js"><link rel="prefetch" href="/assets/js/376.4446d436.js"><link rel="prefetch" href="/assets/js/377.0c255d7c.js"><link rel="prefetch" href="/assets/js/378.26bbaf21.js"><link rel="prefetch" href="/assets/js/379.3867e7e1.js"><link rel="prefetch" href="/assets/js/38.1bf99f7f.js"><link rel="prefetch" href="/assets/js/380.e40ca91a.js"><link rel="prefetch" href="/assets/js/381.6a8d77f0.js"><link rel="prefetch" href="/assets/js/382.bffc4238.js"><link rel="prefetch" href="/assets/js/383.4930b603.js"><link rel="prefetch" href="/assets/js/384.b3c735f9.js"><link rel="prefetch" href="/assets/js/385.d294ce78.js"><link rel="prefetch" href="/assets/js/386.f4b75056.js"><link rel="prefetch" href="/assets/js/387.b14f8032.js"><link rel="prefetch" href="/assets/js/388.cfcdbcd3.js"><link rel="prefetch" href="/assets/js/389.50295d4b.js"><link rel="prefetch" href="/assets/js/39.52e6ed18.js"><link rel="prefetch" href="/assets/js/390.ce1d1860.js"><link rel="prefetch" href="/assets/js/391.24c1ed73.js"><link rel="prefetch" href="/assets/js/392.c03d5650.js"><link rel="prefetch" href="/assets/js/393.02cf475f.js"><link rel="prefetch" href="/assets/js/394.597d5c1c.js"><link rel="prefetch" href="/assets/js/395.e7e286e0.js"><link rel="prefetch" href="/assets/js/396.e9578588.js"><link rel="prefetch" href="/assets/js/397.090e352b.js"><link rel="prefetch" href="/assets/js/398.2190968c.js"><link rel="prefetch" href="/assets/js/399.cdd10b4b.js"><link rel="prefetch" href="/assets/js/4.3616097b.js"><link rel="prefetch" href="/assets/js/40.c9276079.js"><link rel="prefetch" href="/assets/js/400.28d0d6ae.js"><link rel="prefetch" href="/assets/js/401.89b1c615.js"><link rel="prefetch" href="/assets/js/402.9900507a.js"><link rel="prefetch" href="/assets/js/403.608a0f7a.js"><link rel="prefetch" href="/assets/js/404.51da312c.js"><link rel="prefetch" href="/assets/js/405.133fbe44.js"><link rel="prefetch" href="/assets/js/406.91f66fba.js"><link rel="prefetch" href="/assets/js/407.b0a595e8.js"><link rel="prefetch" href="/assets/js/408.dc312127.js"><link rel="prefetch" href="/assets/js/409.715bd867.js"><link rel="prefetch" href="/assets/js/41.43b52e06.js"><link rel="prefetch" href="/assets/js/410.26b6ff8e.js"><link rel="prefetch" href="/assets/js/411.4efba280.js"><link rel="prefetch" href="/assets/js/412.2ca3f092.js"><link rel="prefetch" href="/assets/js/413.1ab0de7c.js"><link rel="prefetch" href="/assets/js/414.63bccae4.js"><link rel="prefetch" href="/assets/js/415.1b4c258a.js"><link rel="prefetch" href="/assets/js/416.9b81a3a5.js"><link rel="prefetch" href="/assets/js/417.c5ce4f8a.js"><link rel="prefetch" href="/assets/js/418.d7f9476b.js"><link rel="prefetch" href="/assets/js/419.950ae404.js"><link rel="prefetch" href="/assets/js/42.a12c2b2c.js"><link rel="prefetch" href="/assets/js/420.7b0de39c.js"><link rel="prefetch" href="/assets/js/421.3952763d.js"><link rel="prefetch" href="/assets/js/422.b6d99ebe.js"><link rel="prefetch" href="/assets/js/423.119a98d7.js"><link rel="prefetch" href="/assets/js/424.e4a155cd.js"><link rel="prefetch" href="/assets/js/425.5dcae149.js"><link rel="prefetch" href="/assets/js/426.d0cffd49.js"><link rel="prefetch" href="/assets/js/427.4dcc2b7c.js"><link rel="prefetch" href="/assets/js/428.bc9e0acd.js"><link rel="prefetch" href="/assets/js/429.9575c577.js"><link rel="prefetch" href="/assets/js/43.8e16ab43.js"><link rel="prefetch" href="/assets/js/430.d0e52076.js"><link rel="prefetch" href="/assets/js/44.fcb64509.js"><link rel="prefetch" href="/assets/js/45.9454995c.js"><link rel="prefetch" href="/assets/js/46.de66483e.js"><link rel="prefetch" href="/assets/js/47.4d5fc0e4.js"><link rel="prefetch" href="/assets/js/48.ce19e589.js"><link rel="prefetch" href="/assets/js/49.1e6bab4e.js"><link rel="prefetch" href="/assets/js/5.9e9f7af7.js"><link rel="prefetch" href="/assets/js/50.cf1dddb3.js"><link rel="prefetch" href="/assets/js/51.b1604e39.js"><link rel="prefetch" href="/assets/js/52.8863a951.js"><link rel="prefetch" href="/assets/js/53.9c98edba.js"><link rel="prefetch" href="/assets/js/54.5ef9c0e1.js"><link rel="prefetch" href="/assets/js/55.cc7f3d4b.js"><link rel="prefetch" href="/assets/js/56.f4694cf3.js"><link rel="prefetch" href="/assets/js/57.45f02d71.js"><link rel="prefetch" href="/assets/js/58.e5707c0d.js"><link rel="prefetch" href="/assets/js/59.4a3101b7.js"><link rel="prefetch" href="/assets/js/6.c827cd18.js"><link rel="prefetch" href="/assets/js/60.fa873844.js"><link rel="prefetch" href="/assets/js/61.8444131d.js"><link rel="prefetch" href="/assets/js/62.1470e003.js"><link rel="prefetch" href="/assets/js/63.0082dece.js"><link rel="prefetch" href="/assets/js/64.87fb13b9.js"><link rel="prefetch" href="/assets/js/65.13eafe5a.js"><link rel="prefetch" href="/assets/js/66.924782a8.js"><link rel="prefetch" href="/assets/js/67.05e6b3db.js"><link rel="prefetch" href="/assets/js/68.1c1fc084.js"><link rel="prefetch" href="/assets/js/69.4c5b4151.js"><link rel="prefetch" href="/assets/js/7.ce088a3f.js"><link rel="prefetch" href="/assets/js/70.971b5146.js"><link rel="prefetch" href="/assets/js/71.5346437a.js"><link rel="prefetch" href="/assets/js/72.def2bf25.js"><link rel="prefetch" href="/assets/js/73.932ebd1f.js"><link rel="prefetch" href="/assets/js/74.17b803ed.js"><link rel="prefetch" href="/assets/js/75.039531fc.js"><link rel="prefetch" href="/assets/js/76.7ddf4f6f.js"><link rel="prefetch" href="/assets/js/77.079b67cb.js"><link rel="prefetch" href="/assets/js/78.3f96455d.js"><link rel="prefetch" href="/assets/js/79.38ce1d68.js"><link rel="prefetch" href="/assets/js/8.6ac852a3.js"><link rel="prefetch" href="/assets/js/80.6a043fef.js"><link rel="prefetch" href="/assets/js/81.4ab4b733.js"><link rel="prefetch" href="/assets/js/82.f7e499b6.js"><link rel="prefetch" href="/assets/js/83.c5f26873.js"><link rel="prefetch" href="/assets/js/84.e2c64743.js"><link rel="prefetch" href="/assets/js/85.058dda12.js"><link rel="prefetch" href="/assets/js/86.393a717e.js"><link rel="prefetch" href="/assets/js/87.fb09cdfb.js"><link rel="prefetch" href="/assets/js/88.a7d1dcfb.js"><link rel="prefetch" href="/assets/js/89.e940d8ff.js"><link rel="prefetch" href="/assets/js/9.22b17ec8.js"><link rel="prefetch" href="/assets/js/90.8f603046.js"><link rel="prefetch" href="/assets/js/91.036bf147.js"><link rel="prefetch" href="/assets/js/92.006eec70.js"><link rel="prefetch" href="/assets/js/93.0c02336b.js"><link rel="prefetch" href="/assets/js/94.7ef923ae.js"><link rel="prefetch" href="/assets/js/95.ef2a1681.js"><link rel="prefetch" href="/assets/js/96.8ea97afe.js"><link rel="prefetch" href="/assets/js/97.006c4ed1.js"><link rel="prefetch" href="/assets/js/98.3ae0af2e.js"><link rel="prefetch" href="/assets/js/99.247b7f94.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ee7aa31.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link router-link-active">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link router-link-active">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue/" aria-current="page" class="sidebar-link"> vue</a></li><li><a href="/vue/001vuex.html" aria-current="page" class="active sidebar-link"> vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vuex状态管理模式" class="sidebar-link">[vuex状态管理模式]</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#安装vuex" class="sidebar-link">安装vuex</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#使用vuex" class="sidebar-link">使用vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/001vuex.html#创建一个store-js用来存取数据" class="sidebar-link">创建一个store.js用来存取数据</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#computed与vuex数据的结合运用" class="sidebar-link">computed与vuex数据的结合运用</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#在main-js里引用" class="sidebar-link">在main.js里引用</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#在vue文件中使用" class="sidebar-link">在vue文件中使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vuex的辅助函数" class="sidebar-link">vuex的辅助函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vuex-modules模块化设计" class="sidebar-link">vuex modules模块化设计</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#createnamespacedhelpers" class="sidebar-link">createNamespacedHelpers</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#require-context-借助webpack来读modules文件下文件-避免一个个手动引入" class="sidebar-link">require.context 借助webpack来读modules文件下文件，避免一个个手动引入</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vuex插件写法" class="sidebar-link">vuex插件写法</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vuex手写" class="sidebar-link">vuex手写</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#vue3中使用vuex" class="sidebar-link">vue3中使用vuex</a></li><li class="sidebar-sub-header"><a href="/vue/001vuex.html#pinia" class="sidebar-link">pinia</a></li></ul></li></ul></li><li><a href="/vue/002component.html" class="sidebar-link"> component</a></li><li><a href="/vue/003jiagou.html" class="sidebar-link"> vue文件结构</a></li><li><a href="/vue/004nextTick.html" class="sidebar-link">vuenextTick异步更新</a></li><li><a href="/vue/005component.html" class="sidebar-link"> 局部组件和全局组件</a></li><li><a href="/vue/006someting.html" class="sidebar-link"> 欣e通项目遇到的一些问题</a></li><li><a href="/vue/007vuebus.html" class="sidebar-link"> vuebus</a></li><li><a href="/vue/008slot.html" class="sidebar-link"> 插槽</a></li><li><a href="/vue/009vueset.html" class="sidebar-link"> vueset方法和delete方法</a></li><li><a href="/vue/010vuei18n.html" class="sidebar-link"> vue国际化语言</a></li><li><a href="/vue/011vue-transition.html" class="sidebar-link"> vuetransition过渡和动画</a></li><li><a href="/vue/012vuetree.html" class="sidebar-link">vuetree</a></li><li><a href="/vue/013vuerouter.html" class="sidebar-link">vue-router</a></li><li><a href="/vue/014vuemore.html" class="sidebar-link">vue更多应用</a></li><li><a href="/vue/015keep.html" class="sidebar-link">keepAlive</a></li><li><a href="/vue/016vue.html" class="sidebar-link">vue响应式原理</a></li><li><a href="/vue/017vue.html" class="sidebar-link">vue源码解析</a></li><li><a href="/vue/018vuecli.html" class="sidebar-link">vuecli</a></li><li><a href="/vue/019render&amp;$mount.html" class="sidebar-link">render&amp;$mount</a></li><li><a href="/vue/020vueuse.html" class="sidebar-link">vueuse()</a></li><li><a href="/vue/022vueattr.html" class="sidebar-link">vue高级特性</a></li><li><a href="/vue/021biglist.html" class="sidebar-link">vue虚拟列表优化性能</a></li><li><a href="/vue/023vue3a.html" class="sidebar-link">vue3学习</a></li><li><a href="/vue/024filters.html" class="sidebar-link">vue过滤器&amp;监听&amp;计算</a></li><li><a href="/vue/025vuebasic.html" class="sidebar-link">vue基础</a></li><li><a href="/vue/026vdirective.html" class="sidebar-link">vue指令</a></li><li><a href="/vue/027compositionapi.html" class="sidebar-link">vue3之compositionapi</a></li><li><a href="/vue/028vue3yuanma.html" class="sidebar-link">vue3源码</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vuex状态管理模式"><a href="#vuex状态管理模式" class="header-anchor">#</a> [vuex状态管理模式]</h2> <img src="/beifen/154.png"> <p>每一个Vuex应用的核心就是store（仓库）。“store”基本上就是一个容器，它包含着你的应用中大部分的状态 (state)。</p> <h2 id="安装vuex"><a href="#安装vuex" class="header-anchor">#</a> 安装vuex</h2> <div class="language-node extra-class"><pre class="language-text"><code>npm install vuex --save 
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">理解</p> <p>vuex理解
是状态管理模式。它采用<code>集中式</code>存储管理应用的所有的状态，并以相应的规则保证状态以一种<code>可预测</code>的方式发生变化。可以理解为是一个全局变量</p></div> <ul><li>state 数据中心</li> <li>mutations 操作数据</li> <li>actions 什么时候触发操作，执行动作，改变数据</li></ul> <h2 id="使用vuex"><a href="#使用vuex" class="header-anchor">#</a> 使用vuex</h2> <h3 id="创建一个store-js用来存取数据"><a href="#创建一个store-js用来存取数据" class="header-anchor">#</a> 创建一个store.js用来存取数据</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// state :localStorage.getItem('state') ? JSON.parse(localStorage.getItem('state')) 刷新后保留数据的办法</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token literal-property property">todos</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// getter可以认为是store的计算属性</span>
    <span class="token comment">// getter正常接受两个参数，分别表示 state, getters（在使用module时，还会有根store的state和getters）</span>
    <span class="token function-variable function">doubleCount</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">doneTodos</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	      <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>done<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">//Getter 也可以接受其他 getter 作为第二个参数：</span>
	<span class="token function">doneTodosCount</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token keyword">return</span> getters<span class="token punctuation">.</span>doneTodos<span class="token punctuation">.</span>length
	<span class="token punctuation">}</span>
	
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">addForNum</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token function">Number</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">asyncAdd</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		
	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 异步操作需要放在actions中执行，然后使用commit交给对应的mutations修改state的值</span>
    <span class="token function">asyncAddAction</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//这里的context和我们使用的$store拥有相同的对象和方法</span>
      <span class="token function">setTimeout</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'asyncAdd'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span><span class="token punctuation">,</span> username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">===</span> <span class="token string">'admin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span>
					<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

</code></pre></div><ul><li>Action 通常是异步的，那么如何知道 action 什么时候结束呢？可以通过让<strong>action返回Promise，在Promise的then中来处理完成后的操作；</strong></li> <li>dispatch派发请求异步接受信息</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>redirect<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'用户名或密码错误'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="computed与vuex数据的结合运用"><a href="#computed与vuex数据的结合运用" class="header-anchor">#</a> computed与vuex数据的结合运用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span> 
    <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
     <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
     <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category 
     <span class="token punctuation">}</span><span class="token punctuation">,</span> 
     <span class="token function">set</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Value of category changed&quot;</span><span class="token punctuation">)</span> 
     <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;SET_CAT&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span> 
     <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在main-js里引用"><a href="#在main-js里引用" class="header-anchor">#</a> 在main.js里引用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;App/&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="在vue文件中使用"><a href="#在vue文件中使用" class="header-anchor">#</a> 在vue文件中使用</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>这是计数器页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>计数：{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>双倍计数：{{doubleCount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        增加值 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addForNum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asyncAdd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>异步加10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">count</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">doubleCount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>doubleCount
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自增1</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//this.$store.state.number++ //不推荐，严格模式无效</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 加指定的值</span>
    <span class="token function">addForNum</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addForNum'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 异步加1</span>
    <span class="token function">asyncAdd</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'asyncAddAction'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vuex的辅助函数"><a href="#vuex的辅助函数" class="header-anchor">#</a> vuex的辅助函数</h2> <p>可以使用map辅助函数使代码更精简</p> <ul><li>store文件中的内容不需要变动，只要在组件中使用map辅助函数来替代全局的this.$sotre下的属性和方法即可。</li> <li><strong>注意辅助函数mapGetters的对象写法，只有重命名，没有函数形式</strong></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>这是计数器页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>计数：{{count}}  -  {{countAlias}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>双倍计数：{{doubleCount}}  -  {{doubleCountAlias}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        增加值 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>incrementBy(num)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asyncAdd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>异步加10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapGetters<span class="token punctuation">,</span> mapMutations<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">localCount</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// computed:mapState(['a','b']),</span>
  <span class="token comment">//如果computed只获取store中的数据且不需要转换，那么可以直接使用mapState，不需要解构</span>
  <span class="token comment">//mapState本身返回的就是个对象</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">/*
    * ------------------------------------------------------------
    * mapState
    */</span>

    <span class="token comment">// 【传统形式】</span>
    <span class="token comment">// count () {</span>
    <span class="token comment">//   return this.store.state.count</span>
    <span class="token comment">// },</span>

    <span class="token comment">// 【对象形式】</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 箭头函数可使代码更简练</span>
      <span class="token function-variable function">count</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>

      <span class="token comment">// 传字符串参数 'count' 等同于 `state =&gt; state.count`</span>
      <span class="token comment">// 使用这种方式可以更简洁地为state生成的计算属性定义一个别名</span>
      <span class="token literal-property property">countAlias</span><span class="token operator">:</span> <span class="token string">'count'</span><span class="token punctuation">,</span>

      <span class="token comment">// 为了能够使用 `this` 获取局部状态，必须使用常规函数</span>
      <span class="token function">countPlusLocalState</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localCount
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// 【数组形式】</span>
    <span class="token comment">// 当映射的计算属性的名称与 state 的子节点名称相同时，我们也可以给 mapState 传一个字符串数组。</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token comment">// 映射 this.count 为 store.state.count</span>
      <span class="token string">'count'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>



    <span class="token comment">/*
    * ------------------------------------------------------------
    * mapGetters
    */</span>

    <span class="token comment">// 【传统形式】</span>
    <span class="token comment">// doubleCount () {</span>
    <span class="token comment">//   return this.store.getters.doubleCount</span>
    <span class="token comment">// }</span>

    <span class="token comment">// 【对象形式】</span>
    <span class="token comment">// 如果你想将一个 getter 属性另取一个名字，使用对象形式</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 把 `this.doubleCountAlias` 映射为 `this.store.getters.doubleCount`</span>
      <span class="token literal-property property">doubleCountAlias</span><span class="token operator">:</span> <span class="token string">'doubleCount'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// 【数组形式】</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'doubleCount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">/*
    * ------------------------------------------------------------
    * mapMutations
    */</span>

    <span class="token comment">// 【传统形式】</span>
    <span class="token comment">// 自增1</span>
    <span class="token comment">// increment () {</span>
    <span class="token comment">//   this.store.commit('increment')</span>
    <span class="token comment">// },</span>
    <span class="token comment">// // 加指定的值</span>
    <span class="token comment">// incrementBy (amount) {</span>
    <span class="token comment">//   this.store.commit('incrementBy', amount)</span>
    <span class="token comment">// },</span>

    <span class="token comment">// 【数组形式】</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token comment">// 将 `this.increment()` 映射为 `this.store.commit('increment')`</span>

      <span class="token comment">// `mapMutations` 也支持载荷：</span>
      <span class="token string">'incrementBy'</span> <span class="token comment">// 将 `this.incrementBy(amount)` 映射为 `this.store.commit('incrementBy', amount)`</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// 【对象形式】</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token string">'increment'</span> <span class="token comment">// 将 `this.add()` 映射为 `this.store.commit('increment')`</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// // 异步加1</span>
    <span class="token comment">// asyncAdd () {</span>
    <span class="token comment">//   this.store.dispatch('asyncAddAction')</span>
    <span class="token comment">// }</span>

    <span class="token comment">/*
    * ------------------------------------------------------------
    * mapActions
    */</span>

   <span class="token comment">// 【数组形式】</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'asyncAddAction'</span><span class="token punctuation">,</span> <span class="token comment">// 将 `this.asyncAddAction()` 映射为 `this.store.dispatch('asyncAddAction')`</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// 【对象形式】</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">asyncAdd</span><span class="token operator">:</span> <span class="token string">'asyncAddAction'</span> <span class="token comment">// 将 `this.asyncAdd()` 映射为 `this.$store.dispatch('asyncAddAction')`</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>因为辅助函数返回的本来就是对象，所以要用一次展示运算符，除非是直接如computed:mapState(['xxx'])这种外层没加包裹形式</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!isLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当需要映射的值时模块化的值，如是user模块，可以用以下两种方式来写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'isLogin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//推荐，在template中可以直接使用isLogin</span>
<span class="token comment">//...mapState(['user/isLogin']) // 不推荐，用的时候不好写</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">'user/login'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user/login'</span><span class="token punctuation">,</span> <span class="token string">'user/logout'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//...mapActions(user，['login'])//这种写法也可以，但是如果methods中还有别的也叫login的方法就冲突了！！！</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="vuex-modules模块化设计"><a href="#vuex-modules模块化设计" class="header-anchor">#</a> vuex modules模块化设计</h3> <p>新建modules文件夹在store文件夹内，选项namesapced保证命名不冲突</p> <div class="language- extra-class"><pre class="language-text"><code>+ store 
	+ modules
		- a.js 
		- b.js
		- index.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//a.js b.js与之结构类似</span>
<span class="token keyword">const</span> state<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		state<span class="token punctuation">.</span>count<span class="token operator">++</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> actions<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token function-variable function">add</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
	<span class="token literal-property property">namespaced</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
	state<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
	actions
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> count <span class="token keyword">from</span> <span class="token string">'./a'</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">'./b'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">{</span>
		count<span class="token punctuation">,</span>
		number
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//项目main.js</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/modules/index.js'</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{$store.state.count.count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>miss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapMutations<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	  <span class="token keyword">return</span><span class="token punctuation">{</span>
		  <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
	  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
	  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		  <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>	 
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token function">miss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		   <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'count/add'</span><span class="token punctuation">)</span><span class="token comment">//两种操作写法，效果一致</span>
       <span class="token comment">//对象写法风格</span>
		   <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			   <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'count/add'</span>
		   <span class="token punctuation">}</span><span class="token punctuation">)</span>
	  <span class="token punctuation">}</span>
	 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>默认情况下，模块内部的action和mutation仍然是注册在全局的命名空间中的,也就是说，子模块中有mutation/action/getters中有某个属性或者方法funa,根模块也有，那么比如操作commit('funa'),都会触发！</p> <ul><li>默认情况下Getter 同样也默认注册在全局命名空间；(this.$store.state.a.b(正确)=&gt;a模块下的state中的b,this.$store.getters.a.geta(错误),不需要.getters)</li> <li>如果希望模块具有更高的封装度和复用性，可以添加 namespaced: true 的方式使其成为带命名空间的模块：</li> <li>当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名；</li> <li><code>$store.getters[&quot;home/doubleHomeCounter&quot;]</code>:home模块下的doubleHomeCounter</li></ul></div> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      {{this.$store.state.count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      {{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      {{this.$store.getters.changeCount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>主要按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'count'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'addFun'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// actions　　　 this.$store.commit('add',10) //mutations</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mounted</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">changeCount</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count <span class="token operator">=</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> n
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addFun</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">总结</p> <ul><li>modules模块使用需要在每个js里加上命名空间选项namespaced:true</li> <li>indexjs注意写法</li> <li>this.$store.commit('count/add')</li></ul></div> <h3 id="createnamespacedhelpers"><a href="#createnamespacedhelpers" class="header-anchor">#</a> createNamespacedHelpers</h3> <p>可以使用 <strong>createNamespacedHelpers</strong> 创建基于某个命名空间辅助函数。它返回一个对象，对象里有新的绑定在给定命名空间值上的组件绑定辅助函数。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ homeCounter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ doubleHomeCounter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;h2&gt;{{ doubleRootCounter }}&lt;/h2&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>home+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>incrementAction<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>home+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> createNamespacedHelpers<span class="token punctuation">,</span> mapState<span class="token punctuation">,</span> mapGetters<span class="token punctuation">,</span> mapMutations<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/index'</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapGetters<span class="token punctuation">,</span> mapMutations<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.写法一: </span>
      <span class="token comment">// ...mapState({</span>
      <span class="token comment">//   homeCounter: state =&gt; state.home.homeCounter</span>
      <span class="token comment">// }),</span>
      <span class="token comment">// ...mapGetters({</span>
      <span class="token comment">//   doubleHomeCounter: &quot;home/doubleHomeCounter&quot;</span>
      <span class="token comment">// })</span>

      <span class="token comment">// 2.写法二:</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;homeCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;doubleHomeCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token comment">// 3.写法三:直接通过createNamespacedHelpers绑定对应的命名空间，可以不需要像写法二那样去处理</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;homeCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;doubleHomeCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.写法一: </span>
      <span class="token comment">// ...mapMutations({</span>
      <span class="token comment">//   increment: &quot;home/increment&quot;</span>
      <span class="token comment">// }),</span>
      <span class="token comment">// ...mapActions({</span>
      <span class="token comment">//   incrementAction: &quot;home/incrementAction&quot;</span>
      <span class="token comment">// }),</span>

      <span class="token comment">// 2.写法二</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;incrementAction&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      
      <span class="token comment">// 3.写法三:</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;incrementAction&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// {homeCounter: function}</span>
      <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;rootCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> rootGetters <span class="token operator">=</span> <span class="token function">useGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;doubleRootCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token function">useGetters</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;doubleHomeCounter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;incrementAction&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        <span class="token operator">...</span>getters<span class="token punctuation">,</span>
        <span class="token operator">...</span>rootGetters
        <span class="token operator">...</span>mutations<span class="token punctuation">,</span>
        <span class="token operator">...</span>actions
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>useState.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> createNamespacedHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMapper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./useMapper'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">moduleName<span class="token punctuation">,</span> mapper</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> mapperFn <span class="token operator">=</span> mapState
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> moduleName <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> moduleName<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mapperFn <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">.</span>mapState
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mapper <span class="token operator">=</span> moduleName
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">useMapper</span><span class="token punctuation">(</span>mapper<span class="token punctuation">,</span> mapperFn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>useMapper</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useMapper</span><span class="token punctuation">(</span><span class="token parameter">mapper<span class="token punctuation">,</span> mapFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拿到store独享</span>
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 获取到对应的对象的functions: {name: function, age: function}</span>
  <span class="token keyword">const</span> storeStateFns <span class="token operator">=</span> <span class="token function">mapFn</span><span class="token punctuation">(</span>mapper<span class="token punctuation">)</span>

  <span class="token comment">// 对数据进行转换</span>
  <span class="token keyword">const</span> storeState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>storeStateFns<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fnKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> storeStateFns<span class="token punctuation">[</span>fnKey<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span> store<span class="token punctuation">}</span><span class="token punctuation">)</span>
    storeState<span class="token punctuation">[</span>fnKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> storeState
<span class="token punctuation">}</span>

</code></pre></div><h3 id="require-context-借助webpack来读modules文件下文件-避免一个个手动引入"><a href="#require-context-借助webpack来读modules文件下文件-避免一个个手动引入" class="header-anchor">#</a> require.context 借助webpack来读modules文件下文件，避免一个个手动引入</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> getters <span class="token keyword">from</span> <span class="token string">'./getters'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token comment">// https://webpack.js.org/guides/dependency-management/#requirecontext</span>
<span class="token keyword">const</span> modulesFiles <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./modules'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>

<span class="token comment">// you do not need `import app from './modules/app'`</span>
<span class="token comment">// it will auto require all vuex module from modules file</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> modulesFiles<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">modules<span class="token punctuation">,</span> modulePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// set './app.js' =&gt; 'app'</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> modulePath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.\/(.*)\.\w+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">modulesFiles</span><span class="token punctuation">(</span>modulePath<span class="token punctuation">)</span>
  modules<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">.</span>default
  <span class="token keyword">return</span> modules
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> modulesFiles<span class="token punctuation">,</span>modules<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token punctuation">,</span>
  getters
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> useSubdirectories<span class="token punctuation">,</span> regExp<span class="token punctuation">)</span>
<span class="token comment">//directory: 要查找的文件路径</span>
<span class="token comment">//useSubdirectories: 是否查找子目录</span>
<span class="token comment">// regExp: 要匹配文件的正则</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>代码很简单，require.context执行后，返回一个方法webpackContext，这个方法又返回一个__webpack_require__，
这个__webpack_require__就相当于require或者import。同时webpackContext还有二个静态方法keys与resolve，一个id属性。

keys: 返回匹配成功模块的名字组成的数组
resolve: 接受一个参数request，request为test文件夹下面匹配文件的相对路径，返回这个匹配文件相对于整个工程的相对路径
id: 执行环境的id，返回的是一个字符串，主要用在module.hot.accept，应该是热加载
</code></pre></div><h4 id="vuex严格模式"><a href="#vuex严格模式" class="header-anchor">#</a> vuex严格模式</h4> <p>无论何时发生了状态变更且不是由 mutation 函数引起的，将会抛出错误。这能保证所有的状态变更都能被调试工具跟踪到。开启严格模式 strict: true</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">strict</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="vuex插件写法"><a href="#vuex插件写法" class="header-anchor">#</a> vuex插件写法</h3> <p>Vuex 的 store 接受 plugins 选项，这个选项暴露出每次 mutation 的钩子。Vuex 插件就是一个函数，它接收 store 作为唯一参数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token parameter">store</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 当 store 初始化后调用</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注册插件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> myPlugin <span class="token keyword">from</span> <span class="token string">&quot;xxx&quot;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>myPlugin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>范例：实现登录状态持久化，store/plugins/persist.js</p> <ul><li>store.subscribe插件中的方法，可以监听到对应的mutation state变更信息，同步操作</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token parameter">store</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 初始化时从localStorage获取数据</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/login'</span><span class="token punctuation">)</span>
		store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/setUsername'</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>username<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 用户状态发生变化时缓存之</span>
	store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'user/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'user/logout'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>借助vuex-createPersistedState插件实现缓存数据。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> createPersistedState <span class="token keyword">from</span> <span class="token string">'vuex-createPersistedState'</span>
<span class="token keyword">const</span> <span class="token constant">PERSIST_PATHS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    settings<span class="token punctuation">,</span>
    user<span class="token punctuation">,</span>
    permission<span class="token punctuation">,</span>
    tagsView
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">storage</span><span class="token operator">:</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">,</span>
    <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token constant">PERSIST_PATHS</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="vuex手写"><a href="#vuex手写" class="header-anchor">#</a> vuex手写</h3> <ul><li>实现插件
-实现Store类
<ul><li>维持1个响应式状态state</li> <li>实现commit()</li> <li>实现dispatch()</li> <li><em><strong>getters</strong></em></li> <li>挂载$store</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> Vue
<span class="token keyword">class</span> <span class="token class-name">Store</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>$option <span class="token operator">=</span> option 
	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>
	 
	  <span class="token keyword">this</span><span class="token punctuation">.</span>_wrapgetters <span class="token operator">=</span>option<span class="token punctuation">.</span>getters
	  <span class="token keyword">const</span> computed <span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>getters <span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	  <span class="token keyword">const</span> store <span class="token operator">=</span><span class="token keyword">this</span>
	  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_wrapgetters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		  <span class="token comment">//获取用户定义的getters</span>
		  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span>store<span class="token punctuation">.</span>_wrapgetters<span class="token punctuation">)</span>
		  <span class="token keyword">const</span> fn <span class="token operator">=</span> store<span class="token punctuation">.</span>_wrapgetters<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
		  <span class="token comment">//转化为computed可以使用无参形式</span>
		  computed<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			  <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
		  <span class="token punctuation">}</span>
		  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
			  <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>store<span class="token punctuation">.</span>vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
		  <span class="token punctuation">}</span><span class="token punctuation">)</span>
	  <span class="token punctuation">}</span><span class="token punctuation">)</span>
	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>computed<span class="token punctuation">)</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
			  <span class="token literal-property property">state</span><span class="token operator">:</span>option<span class="token punctuation">.</span>state
		  <span class="token punctuation">}</span><span class="token punctuation">,</span>
		  computed
	  <span class="token punctuation">}</span><span class="token punctuation">)</span>
	 
	  <span class="token keyword">this</span><span class="token punctuation">.</span>mutations <span class="token operator">=</span>option<span class="token punctuation">.</span>mutations
	  <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span>option<span class="token punctuation">.</span>actions
	  <span class="token keyword">this</span><span class="token punctuation">.</span>commit <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>dispatch <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	  
	<span class="token punctuation">}</span>
	<span class="token keyword">get</span> <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">.</span>state
	<span class="token punctuation">}</span>
	<span class="token keyword">set</span> <span class="token function">state</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			 console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span><span class="token string">'do not to change state'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token function">commit</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
		<span class="token comment">// 需要在constructor中给commit方法绑定好this的指向，否则调用会undefined</span>
		<span class="token comment">// console.log(this.mutations[v])</span>
		<span class="token comment">// console.log(this.vm.state,t)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mutations<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">.</span>state<span class="token punctuation">,</span>t<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// console.log(v)</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>actions<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>actions<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  Vue <span class="token operator">=</span> vue
  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		  <span class="token comment">// console.log('beforeCreate')</span>
		 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>store<span class="token punctuation">)</span><span class="token punctuation">{</span>
		 		  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$store <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>store
		 <span class="token punctuation">}</span> 
	  <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>Store<span class="token punctuation">,</span>install<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue3中使用vuex"><a href="#vue3中使用vuex" class="header-anchor">#</a> vue3中使用vuex</h3> <ul><li>vuex创建的写法上与之前的也有所不同</li> <li>getters类似computed，他返回的是该函数的计算结果，当然也可以返回函数，那么就可以再<strong>传递一个可用参数实现复用</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span>
<span class="token keyword">import</span> home <span class="token keyword">from</span> <span class="token string">'./modules/home'</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./modules/user'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rootCounter</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">doubleRootCounter</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>rootCounter <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">totalPriceCountGreaterN</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> totalPrice <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> book <span class="token keyword">of</span> state<span class="token punctuation">.</span>books<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>count <span class="token operator">&gt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            totalPrice <span class="token operator">+=</span> book<span class="token punctuation">.</span>count <span class="token operator">*</span> book<span class="token punctuation">.</span>price
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> totalPrice <span class="token operator">*</span> getters<span class="token punctuation">.</span>currentDiscount
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>rootCounter<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">,</span>
    user
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><h4 id="在setup辅助函数的使用"><a href="#在setup辅助函数的使用" class="header-anchor">#</a> 在setup辅助函数的使用</h4> <p>在setup中，computed里面只能放函数形式，不能类似options中的可以以对象的形式放多个computed的属性，要么一个state使用一个computed，要么通过遍历的方式，利用hooks去处理。mapState返回的其实每个属性就是函数。同样可以对mapGetters进行相同的封装。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">mapper</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拿到store独享</span>
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 获取到对应的对象的functions: {name: function, age: function}</span>
  <span class="token keyword">const</span> storeStateFns <span class="token operator">=</span> <span class="token function">mapState</span><span class="token punctuation">(</span>mapper<span class="token punctuation">)</span>

  <span class="token comment">// 对数据进行转换</span>
  <span class="token keyword">const</span> storeState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>storeStateFns<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fnKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> storeStateFns<span class="token punctuation">[</span>fnKey<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span> store<span class="token punctuation">}</span><span class="token punctuation">)</span>
    storeState<span class="token punctuation">[</span>fnKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> storeState
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Home:{{ $store.state.counter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{counter}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{sCounter}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{sName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// import { computed } from 'vue'</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/useState'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// const sCounter = computed(() =&gt; store.state.counter)//默认写法</span>
      <span class="token keyword">const</span> storeState <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> storeState2 <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">sCounter</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>counter<span class="token punctuation">,</span>
        <span class="token function-variable function">sName</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>name
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>storeState<span class="token punctuation">,</span>
        <span class="token operator">...</span>storeState2
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="mutation在setup中使用"><a href="#mutation在setup中使用" class="header-anchor">#</a> mutation在setup中使用</h4> <p>在setup中使用mutation比较简单，不需要像state和getters那样麻烦</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>当前计数: {{ $store.state.counter }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment_n({n: 10})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

  <span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">INCREMENT_N</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/mutation-types'</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decrement&quot;</span><span class="token punctuation">,</span> <span class="token constant">INCREMENT_N</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token string">&quot;increment&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> storeMutations <span class="token operator">=</span> <span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decrement&quot;</span><span class="token punctuation">,</span> <span class="token constant">INCREMENT_N</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>storeMutations
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="pinia"><a href="#pinia" class="header-anchor">#</a> pinia</h3> <p><a href="http://www.yanghuiqing.com/web/vue/392" target="_blank" rel="noopener noreferrer">vuex的使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.jianshu.com/p/04c288731819" target="_blank" rel="noopener noreferrer">vuex持久化存储<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/5/2022, 9:53:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue/" class="prev router-link-active">
         vue
      </a></span> <span class="next"><a href="/vue/002component.html">
         component
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.723af4b8.js" defer></script><script src="/assets/js/2.1a953b48.js" defer></script><script src="/assets/js/350.6b54869e.js" defer></script><script src="/assets/js/10.174ca6d2.js" defer></script>
  </body>
</html>
