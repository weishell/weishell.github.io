<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3+ts项目 | web</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="welcome">
    
    <link rel="preload" href="/assets/css/0.styles.8029f154.css" as="style"><link rel="preload" href="/assets/js/app.e1a3f4d1.js" as="script"><link rel="preload" href="/assets/js/2.55fc4dce.js" as="script"><link rel="preload" href="/assets/js/1.f626806d.js" as="script"><link rel="preload" href="/assets/js/282.cdbeb28e.js" as="script"><link rel="preload" href="/assets/js/25.769a5c57.js" as="script"><link rel="preload" href="/assets/js/24.8cb6bc89.js" as="script"><link rel="prefetch" href="/assets/js/10.c74b1ed3.js"><link rel="prefetch" href="/assets/js/100.c95698a1.js"><link rel="prefetch" href="/assets/js/101.4d9eded2.js"><link rel="prefetch" href="/assets/js/102.d0935d28.js"><link rel="prefetch" href="/assets/js/103.f68788f7.js"><link rel="prefetch" href="/assets/js/104.ed19c0a1.js"><link rel="prefetch" href="/assets/js/105.69919763.js"><link rel="prefetch" href="/assets/js/106.12a7691b.js"><link rel="prefetch" href="/assets/js/107.17c32ace.js"><link rel="prefetch" href="/assets/js/108.d92cb4bd.js"><link rel="prefetch" href="/assets/js/109.7143b9e0.js"><link rel="prefetch" href="/assets/js/11.77fa211e.js"><link rel="prefetch" href="/assets/js/110.fbdac2bf.js"><link rel="prefetch" href="/assets/js/111.d6375bde.js"><link rel="prefetch" href="/assets/js/112.677c4f11.js"><link rel="prefetch" href="/assets/js/113.8803b056.js"><link rel="prefetch" href="/assets/js/114.672f9430.js"><link rel="prefetch" href="/assets/js/115.819c708a.js"><link rel="prefetch" href="/assets/js/116.9138eb8c.js"><link rel="prefetch" href="/assets/js/117.48b6e763.js"><link rel="prefetch" href="/assets/js/118.0b2c4d4c.js"><link rel="prefetch" href="/assets/js/119.b29bd990.js"><link rel="prefetch" href="/assets/js/12.5e5399e4.js"><link rel="prefetch" href="/assets/js/120.268d87d2.js"><link rel="prefetch" href="/assets/js/121.6bee287a.js"><link rel="prefetch" href="/assets/js/122.c6785895.js"><link rel="prefetch" href="/assets/js/123.6e91e4d8.js"><link rel="prefetch" href="/assets/js/124.990781b6.js"><link rel="prefetch" href="/assets/js/125.1a302e40.js"><link rel="prefetch" href="/assets/js/126.2395e706.js"><link rel="prefetch" href="/assets/js/127.78895e1c.js"><link rel="prefetch" href="/assets/js/128.3d54a2eb.js"><link rel="prefetch" href="/assets/js/129.6a39ad7a.js"><link rel="prefetch" href="/assets/js/13.0c1ba8d6.js"><link rel="prefetch" href="/assets/js/130.848849ca.js"><link rel="prefetch" href="/assets/js/131.125162f9.js"><link rel="prefetch" href="/assets/js/132.cdd9ad86.js"><link rel="prefetch" href="/assets/js/133.a346ed91.js"><link rel="prefetch" href="/assets/js/134.b4d050b5.js"><link rel="prefetch" href="/assets/js/135.af70f3d7.js"><link rel="prefetch" href="/assets/js/136.4ee37c48.js"><link rel="prefetch" href="/assets/js/137.2ada6daf.js"><link rel="prefetch" href="/assets/js/138.8b312e0f.js"><link rel="prefetch" href="/assets/js/139.2cc60404.js"><link rel="prefetch" href="/assets/js/14.d5d9e591.js"><link rel="prefetch" href="/assets/js/140.7ca28114.js"><link rel="prefetch" href="/assets/js/141.5ee89632.js"><link rel="prefetch" href="/assets/js/142.319a6ef7.js"><link rel="prefetch" href="/assets/js/143.40cb4479.js"><link rel="prefetch" href="/assets/js/144.7a784837.js"><link rel="prefetch" href="/assets/js/145.097f7700.js"><link rel="prefetch" href="/assets/js/146.55fbe950.js"><link rel="prefetch" href="/assets/js/147.f0830222.js"><link rel="prefetch" href="/assets/js/148.2bcfe3ad.js"><link rel="prefetch" href="/assets/js/149.57b29fce.js"><link rel="prefetch" href="/assets/js/15.42ceb2eb.js"><link rel="prefetch" href="/assets/js/150.414d7abc.js"><link rel="prefetch" href="/assets/js/151.56735dfa.js"><link rel="prefetch" href="/assets/js/152.add63651.js"><link rel="prefetch" href="/assets/js/153.598e1d3c.js"><link rel="prefetch" href="/assets/js/154.6c217193.js"><link rel="prefetch" href="/assets/js/155.289c16b7.js"><link rel="prefetch" href="/assets/js/156.c30d65a6.js"><link rel="prefetch" href="/assets/js/157.1b3f1cf4.js"><link rel="prefetch" href="/assets/js/158.ef1118c0.js"><link rel="prefetch" href="/assets/js/159.101364a1.js"><link rel="prefetch" href="/assets/js/16.4a9e5634.js"><link rel="prefetch" href="/assets/js/160.0da8981b.js"><link rel="prefetch" href="/assets/js/161.0cd3c800.js"><link rel="prefetch" href="/assets/js/162.9910eea1.js"><link rel="prefetch" href="/assets/js/163.cb34d3aa.js"><link rel="prefetch" href="/assets/js/164.28c0f49a.js"><link rel="prefetch" href="/assets/js/165.cae8e38d.js"><link rel="prefetch" href="/assets/js/166.7a05ad8a.js"><link rel="prefetch" href="/assets/js/167.598fa139.js"><link rel="prefetch" href="/assets/js/168.8db772f5.js"><link rel="prefetch" href="/assets/js/169.62053dea.js"><link rel="prefetch" href="/assets/js/17.bbbe20c1.js"><link rel="prefetch" href="/assets/js/170.78a624ff.js"><link rel="prefetch" href="/assets/js/171.d95fb79b.js"><link rel="prefetch" href="/assets/js/172.b435b157.js"><link rel="prefetch" href="/assets/js/173.0dd65078.js"><link rel="prefetch" href="/assets/js/174.186834c0.js"><link rel="prefetch" href="/assets/js/175.c6463a7c.js"><link rel="prefetch" href="/assets/js/176.3b462fbf.js"><link rel="prefetch" href="/assets/js/177.e951c417.js"><link rel="prefetch" href="/assets/js/178.b6bf03e7.js"><link rel="prefetch" href="/assets/js/179.60cfe51e.js"><link rel="prefetch" href="/assets/js/18.ba0390ac.js"><link rel="prefetch" href="/assets/js/180.c7ff3ff5.js"><link rel="prefetch" href="/assets/js/181.24f4043a.js"><link rel="prefetch" href="/assets/js/182.2d34650a.js"><link rel="prefetch" href="/assets/js/183.f50e58cb.js"><link rel="prefetch" href="/assets/js/184.ca735099.js"><link rel="prefetch" href="/assets/js/185.35043d55.js"><link rel="prefetch" href="/assets/js/186.cadbd8f1.js"><link rel="prefetch" href="/assets/js/187.04f0f8b5.js"><link rel="prefetch" href="/assets/js/188.e8ebe664.js"><link rel="prefetch" href="/assets/js/189.6e2da3f4.js"><link rel="prefetch" href="/assets/js/19.f1128907.js"><link rel="prefetch" href="/assets/js/190.36e0e230.js"><link rel="prefetch" href="/assets/js/191.1b91bf1e.js"><link rel="prefetch" href="/assets/js/192.3fb2ec91.js"><link rel="prefetch" href="/assets/js/193.53a403bc.js"><link rel="prefetch" href="/assets/js/194.196a3bfe.js"><link rel="prefetch" href="/assets/js/195.4ae7d07c.js"><link rel="prefetch" href="/assets/js/196.7b7db686.js"><link rel="prefetch" href="/assets/js/197.8ef5581d.js"><link rel="prefetch" href="/assets/js/198.44c06391.js"><link rel="prefetch" href="/assets/js/199.74bb13ff.js"><link rel="prefetch" href="/assets/js/20.ba2395ea.js"><link rel="prefetch" href="/assets/js/200.ad997ee0.js"><link rel="prefetch" href="/assets/js/201.d0bf41fa.js"><link rel="prefetch" href="/assets/js/202.11a0485b.js"><link rel="prefetch" href="/assets/js/203.7112d33c.js"><link rel="prefetch" href="/assets/js/204.9c3c33a1.js"><link rel="prefetch" href="/assets/js/205.9c2d090c.js"><link rel="prefetch" href="/assets/js/206.92ef9924.js"><link rel="prefetch" href="/assets/js/207.8dbd7c38.js"><link rel="prefetch" href="/assets/js/208.903c772c.js"><link rel="prefetch" href="/assets/js/209.0e20dcb0.js"><link rel="prefetch" href="/assets/js/21.4888d92a.js"><link rel="prefetch" href="/assets/js/210.307138d5.js"><link rel="prefetch" href="/assets/js/211.052f054b.js"><link rel="prefetch" href="/assets/js/212.2f956865.js"><link rel="prefetch" href="/assets/js/213.69590c7d.js"><link rel="prefetch" href="/assets/js/214.a1ee77a8.js"><link rel="prefetch" href="/assets/js/215.673e440f.js"><link rel="prefetch" href="/assets/js/216.dd1473bf.js"><link rel="prefetch" href="/assets/js/217.3a6ff69d.js"><link rel="prefetch" href="/assets/js/218.22212eb1.js"><link rel="prefetch" href="/assets/js/219.cfe7785a.js"><link rel="prefetch" href="/assets/js/22.24877a4e.js"><link rel="prefetch" href="/assets/js/220.db88f141.js"><link rel="prefetch" href="/assets/js/221.d9ef4bdf.js"><link rel="prefetch" href="/assets/js/222.c0c42995.js"><link rel="prefetch" href="/assets/js/223.f534e9a8.js"><link rel="prefetch" href="/assets/js/224.ee17c6f3.js"><link rel="prefetch" href="/assets/js/225.14bc4897.js"><link rel="prefetch" href="/assets/js/226.0c9c4032.js"><link rel="prefetch" href="/assets/js/227.03204060.js"><link rel="prefetch" href="/assets/js/228.ea3de324.js"><link rel="prefetch" href="/assets/js/229.3dfd3bcb.js"><link rel="prefetch" href="/assets/js/23.9afaa091.js"><link rel="prefetch" href="/assets/js/230.04acb1a1.js"><link rel="prefetch" href="/assets/js/231.0d9c2f60.js"><link rel="prefetch" href="/assets/js/232.4a706e96.js"><link rel="prefetch" href="/assets/js/233.4a2f1413.js"><link rel="prefetch" href="/assets/js/234.4d4d3040.js"><link rel="prefetch" href="/assets/js/235.cfc6a497.js"><link rel="prefetch" href="/assets/js/236.a33d0291.js"><link rel="prefetch" href="/assets/js/237.cc9e2e2d.js"><link rel="prefetch" href="/assets/js/238.1d71856f.js"><link rel="prefetch" href="/assets/js/239.47914688.js"><link rel="prefetch" href="/assets/js/240.e7ced5b8.js"><link rel="prefetch" href="/assets/js/241.833999ef.js"><link rel="prefetch" href="/assets/js/242.fa5c6b98.js"><link rel="prefetch" href="/assets/js/243.9a67e6f8.js"><link rel="prefetch" href="/assets/js/244.9e907e1c.js"><link rel="prefetch" href="/assets/js/245.b29024e2.js"><link rel="prefetch" href="/assets/js/246.2a972a04.js"><link rel="prefetch" href="/assets/js/247.12eee387.js"><link rel="prefetch" href="/assets/js/248.3be3b0b2.js"><link rel="prefetch" href="/assets/js/249.f679d4f4.js"><link rel="prefetch" href="/assets/js/250.68e10de2.js"><link rel="prefetch" href="/assets/js/251.661a17f4.js"><link rel="prefetch" href="/assets/js/252.94c17fe3.js"><link rel="prefetch" href="/assets/js/253.b4c46408.js"><link rel="prefetch" href="/assets/js/254.bca1d146.js"><link rel="prefetch" href="/assets/js/255.d655be9b.js"><link rel="prefetch" href="/assets/js/256.600ef652.js"><link rel="prefetch" href="/assets/js/257.8c13ea4f.js"><link rel="prefetch" href="/assets/js/258.0dc190c3.js"><link rel="prefetch" href="/assets/js/259.a13fc8a4.js"><link rel="prefetch" href="/assets/js/26.c2d109ad.js"><link rel="prefetch" href="/assets/js/260.c312f44c.js"><link rel="prefetch" href="/assets/js/261.6f41a4ab.js"><link rel="prefetch" href="/assets/js/262.93ab9450.js"><link rel="prefetch" href="/assets/js/263.46d1f308.js"><link rel="prefetch" href="/assets/js/264.ac297ce1.js"><link rel="prefetch" href="/assets/js/265.1be86ac7.js"><link rel="prefetch" href="/assets/js/266.de3c1401.js"><link rel="prefetch" href="/assets/js/267.b26a6966.js"><link rel="prefetch" href="/assets/js/268.920ee108.js"><link rel="prefetch" href="/assets/js/269.68711c84.js"><link rel="prefetch" href="/assets/js/27.ead33de0.js"><link rel="prefetch" href="/assets/js/270.e3f6e45c.js"><link rel="prefetch" href="/assets/js/271.9bdd01ee.js"><link rel="prefetch" href="/assets/js/272.07b525fa.js"><link rel="prefetch" href="/assets/js/273.0f0feafc.js"><link rel="prefetch" href="/assets/js/274.501923e5.js"><link rel="prefetch" href="/assets/js/275.41411f91.js"><link rel="prefetch" href="/assets/js/276.c7c3e6fc.js"><link rel="prefetch" href="/assets/js/277.31686da6.js"><link rel="prefetch" href="/assets/js/278.7456d131.js"><link rel="prefetch" href="/assets/js/279.bbe8968d.js"><link rel="prefetch" href="/assets/js/28.99c50940.js"><link rel="prefetch" href="/assets/js/280.ecf21d8b.js"><link rel="prefetch" href="/assets/js/281.7e87c937.js"><link rel="prefetch" href="/assets/js/283.1d6f73cf.js"><link rel="prefetch" href="/assets/js/284.80560a38.js"><link rel="prefetch" href="/assets/js/285.96c6474d.js"><link rel="prefetch" href="/assets/js/286.39b0a57b.js"><link rel="prefetch" href="/assets/js/287.30187928.js"><link rel="prefetch" href="/assets/js/288.c2a7832d.js"><link rel="prefetch" href="/assets/js/289.65935ff2.js"><link rel="prefetch" href="/assets/js/29.e8552ac1.js"><link rel="prefetch" href="/assets/js/290.e1649632.js"><link rel="prefetch" href="/assets/js/291.f904fb62.js"><link rel="prefetch" href="/assets/js/292.6d8a7700.js"><link rel="prefetch" href="/assets/js/293.7be057da.js"><link rel="prefetch" href="/assets/js/294.35b8ba00.js"><link rel="prefetch" href="/assets/js/295.64e0097c.js"><link rel="prefetch" href="/assets/js/296.1afad1fd.js"><link rel="prefetch" href="/assets/js/297.ab9b0298.js"><link rel="prefetch" href="/assets/js/298.ecf3dc58.js"><link rel="prefetch" href="/assets/js/299.108a5221.js"><link rel="prefetch" href="/assets/js/3.d456f831.js"><link rel="prefetch" href="/assets/js/30.b3fffabf.js"><link rel="prefetch" href="/assets/js/300.db63ee95.js"><link rel="prefetch" href="/assets/js/301.9a0afee7.js"><link rel="prefetch" href="/assets/js/302.e26b39fc.js"><link rel="prefetch" href="/assets/js/303.459dea02.js"><link rel="prefetch" href="/assets/js/304.63b09b02.js"><link rel="prefetch" href="/assets/js/305.0abf7beb.js"><link rel="prefetch" href="/assets/js/306.a40fc125.js"><link rel="prefetch" href="/assets/js/307.8ea61836.js"><link rel="prefetch" href="/assets/js/308.dd1b26ac.js"><link rel="prefetch" href="/assets/js/309.2e1e873e.js"><link rel="prefetch" href="/assets/js/31.82c6c8ef.js"><link rel="prefetch" href="/assets/js/310.ca66e0e6.js"><link rel="prefetch" href="/assets/js/311.5e5f9faf.js"><link rel="prefetch" href="/assets/js/312.ae06bdea.js"><link rel="prefetch" href="/assets/js/313.ae7132c6.js"><link rel="prefetch" href="/assets/js/314.b25bd4f0.js"><link rel="prefetch" href="/assets/js/315.1d3475d8.js"><link rel="prefetch" href="/assets/js/316.8ef794e3.js"><link rel="prefetch" href="/assets/js/317.728265d6.js"><link rel="prefetch" href="/assets/js/318.44c1aa59.js"><link rel="prefetch" href="/assets/js/319.5806665a.js"><link rel="prefetch" href="/assets/js/32.ec0f40c7.js"><link rel="prefetch" href="/assets/js/320.978ed45b.js"><link rel="prefetch" href="/assets/js/321.73d71b25.js"><link rel="prefetch" href="/assets/js/322.e7b7b763.js"><link rel="prefetch" href="/assets/js/323.5f920201.js"><link rel="prefetch" href="/assets/js/324.1eac876b.js"><link rel="prefetch" href="/assets/js/325.d2d35cbb.js"><link rel="prefetch" href="/assets/js/326.2c0538d8.js"><link rel="prefetch" href="/assets/js/327.57a4e232.js"><link rel="prefetch" href="/assets/js/328.a8287f9b.js"><link rel="prefetch" href="/assets/js/329.0f12f724.js"><link rel="prefetch" href="/assets/js/33.ec7e9c58.js"><link rel="prefetch" href="/assets/js/330.56e7171f.js"><link rel="prefetch" href="/assets/js/331.bce1079e.js"><link rel="prefetch" href="/assets/js/332.e8169f2d.js"><link rel="prefetch" href="/assets/js/333.4ea5499e.js"><link rel="prefetch" href="/assets/js/334.62ea0a45.js"><link rel="prefetch" href="/assets/js/335.ff1fff1a.js"><link rel="prefetch" href="/assets/js/336.15d1bb69.js"><link rel="prefetch" href="/assets/js/337.ee0cac76.js"><link rel="prefetch" href="/assets/js/338.17a7d003.js"><link rel="prefetch" href="/assets/js/339.7bfaf336.js"><link rel="prefetch" href="/assets/js/34.d72201d2.js"><link rel="prefetch" href="/assets/js/340.ca6d1474.js"><link rel="prefetch" href="/assets/js/341.2ae555dc.js"><link rel="prefetch" href="/assets/js/342.d0b90639.js"><link rel="prefetch" href="/assets/js/343.1b0e7d31.js"><link rel="prefetch" href="/assets/js/344.e90a8cca.js"><link rel="prefetch" href="/assets/js/345.046629ce.js"><link rel="prefetch" href="/assets/js/346.a1bd9b37.js"><link rel="prefetch" href="/assets/js/347.ef4453b6.js"><link rel="prefetch" href="/assets/js/348.6c799403.js"><link rel="prefetch" href="/assets/js/349.01875a4a.js"><link rel="prefetch" href="/assets/js/35.14d857ae.js"><link rel="prefetch" href="/assets/js/350.e86b01b8.js"><link rel="prefetch" href="/assets/js/351.fd6f8fbe.js"><link rel="prefetch" href="/assets/js/352.33fd5a1d.js"><link rel="prefetch" href="/assets/js/353.75e67b58.js"><link rel="prefetch" href="/assets/js/354.d377477d.js"><link rel="prefetch" href="/assets/js/355.70b4f30a.js"><link rel="prefetch" href="/assets/js/356.741d4bd4.js"><link rel="prefetch" href="/assets/js/357.e5aa3838.js"><link rel="prefetch" href="/assets/js/358.5259c1c2.js"><link rel="prefetch" href="/assets/js/359.3aa98fac.js"><link rel="prefetch" href="/assets/js/36.e72cbf3b.js"><link rel="prefetch" href="/assets/js/360.acb3318b.js"><link rel="prefetch" href="/assets/js/361.ec4e6efd.js"><link rel="prefetch" href="/assets/js/362.616ac333.js"><link rel="prefetch" href="/assets/js/363.be3d3aa2.js"><link rel="prefetch" href="/assets/js/364.3369158d.js"><link rel="prefetch" href="/assets/js/365.0b0f82e4.js"><link rel="prefetch" href="/assets/js/366.0cbb6c9b.js"><link rel="prefetch" href="/assets/js/367.1c12339b.js"><link rel="prefetch" href="/assets/js/368.5d580d07.js"><link rel="prefetch" href="/assets/js/369.b6ff2fc2.js"><link rel="prefetch" href="/assets/js/37.16906765.js"><link rel="prefetch" href="/assets/js/370.b107b384.js"><link rel="prefetch" href="/assets/js/371.730eb500.js"><link rel="prefetch" href="/assets/js/372.04374fa9.js"><link rel="prefetch" href="/assets/js/373.f3e1f842.js"><link rel="prefetch" href="/assets/js/374.26126852.js"><link rel="prefetch" href="/assets/js/375.799e4007.js"><link rel="prefetch" href="/assets/js/376.139567a4.js"><link rel="prefetch" href="/assets/js/377.5e6ec18c.js"><link rel="prefetch" href="/assets/js/378.38bbf6fd.js"><link rel="prefetch" href="/assets/js/379.58d03898.js"><link rel="prefetch" href="/assets/js/38.152b9e45.js"><link rel="prefetch" href="/assets/js/380.39410b88.js"><link rel="prefetch" href="/assets/js/381.5fb22776.js"><link rel="prefetch" href="/assets/js/382.7a584735.js"><link rel="prefetch" href="/assets/js/383.e0404c0a.js"><link rel="prefetch" href="/assets/js/384.c3f81a70.js"><link rel="prefetch" href="/assets/js/385.ed11c64d.js"><link rel="prefetch" href="/assets/js/386.ab1d2a69.js"><link rel="prefetch" href="/assets/js/387.7129c290.js"><link rel="prefetch" href="/assets/js/388.12371eaf.js"><link rel="prefetch" href="/assets/js/389.1062a4af.js"><link rel="prefetch" href="/assets/js/39.e366a16a.js"><link rel="prefetch" href="/assets/js/390.2fe546e6.js"><link rel="prefetch" href="/assets/js/391.55620e92.js"><link rel="prefetch" href="/assets/js/392.308091e2.js"><link rel="prefetch" href="/assets/js/393.ed8d97c5.js"><link rel="prefetch" href="/assets/js/394.625e714d.js"><link rel="prefetch" href="/assets/js/395.3b618edb.js"><link rel="prefetch" href="/assets/js/396.e3a3e098.js"><link rel="prefetch" href="/assets/js/397.c27ccae5.js"><link rel="prefetch" href="/assets/js/398.17cfd74c.js"><link rel="prefetch" href="/assets/js/399.19a526d8.js"><link rel="prefetch" href="/assets/js/4.ef9ff187.js"><link rel="prefetch" href="/assets/js/40.3ca7ca47.js"><link rel="prefetch" href="/assets/js/400.13deab7b.js"><link rel="prefetch" href="/assets/js/401.51bfd67f.js"><link rel="prefetch" href="/assets/js/402.fb2dc2d5.js"><link rel="prefetch" href="/assets/js/403.47c5d0f1.js"><link rel="prefetch" href="/assets/js/404.c2142dce.js"><link rel="prefetch" href="/assets/js/405.3e1969a5.js"><link rel="prefetch" href="/assets/js/406.d959674b.js"><link rel="prefetch" href="/assets/js/407.ec6477c7.js"><link rel="prefetch" href="/assets/js/408.93409a09.js"><link rel="prefetch" href="/assets/js/409.fca91e75.js"><link rel="prefetch" href="/assets/js/41.fb0838ab.js"><link rel="prefetch" href="/assets/js/410.a30eed6d.js"><link rel="prefetch" href="/assets/js/411.7f842620.js"><link rel="prefetch" href="/assets/js/412.a74ebec0.js"><link rel="prefetch" href="/assets/js/413.9cfeee7d.js"><link rel="prefetch" href="/assets/js/414.e9a1ea4d.js"><link rel="prefetch" href="/assets/js/415.de48ab15.js"><link rel="prefetch" href="/assets/js/416.730b313c.js"><link rel="prefetch" href="/assets/js/417.7a91d390.js"><link rel="prefetch" href="/assets/js/418.f6bdd4f6.js"><link rel="prefetch" href="/assets/js/419.a4ae2592.js"><link rel="prefetch" href="/assets/js/42.5978b86e.js"><link rel="prefetch" href="/assets/js/420.16a56f20.js"><link rel="prefetch" href="/assets/js/421.dd5de230.js"><link rel="prefetch" href="/assets/js/422.c3d17924.js"><link rel="prefetch" href="/assets/js/423.679df3bb.js"><link rel="prefetch" href="/assets/js/424.54ee36f2.js"><link rel="prefetch" href="/assets/js/425.352fd6f5.js"><link rel="prefetch" href="/assets/js/426.28aa58f2.js"><link rel="prefetch" href="/assets/js/427.aaa1a9e6.js"><link rel="prefetch" href="/assets/js/428.ee29d308.js"><link rel="prefetch" href="/assets/js/429.d06101f3.js"><link rel="prefetch" href="/assets/js/43.1cf7ba87.js"><link rel="prefetch" href="/assets/js/430.931df186.js"><link rel="prefetch" href="/assets/js/431.bc3d017e.js"><link rel="prefetch" href="/assets/js/432.749c2824.js"><link rel="prefetch" href="/assets/js/433.11f3c6b5.js"><link rel="prefetch" href="/assets/js/434.97218b55.js"><link rel="prefetch" href="/assets/js/435.f003071d.js"><link rel="prefetch" href="/assets/js/436.776fafd8.js"><link rel="prefetch" href="/assets/js/437.8da74a14.js"><link rel="prefetch" href="/assets/js/438.554f80d7.js"><link rel="prefetch" href="/assets/js/439.499432e8.js"><link rel="prefetch" href="/assets/js/44.23ddd6ed.js"><link rel="prefetch" href="/assets/js/440.18687a40.js"><link rel="prefetch" href="/assets/js/441.1ac58370.js"><link rel="prefetch" href="/assets/js/442.e00fd43e.js"><link rel="prefetch" href="/assets/js/443.41c1b9cf.js"><link rel="prefetch" href="/assets/js/444.1753f862.js"><link rel="prefetch" href="/assets/js/445.fec1cb0f.js"><link rel="prefetch" href="/assets/js/446.d464a108.js"><link rel="prefetch" href="/assets/js/447.a2d159e7.js"><link rel="prefetch" href="/assets/js/448.d70c33de.js"><link rel="prefetch" href="/assets/js/449.6e1afad9.js"><link rel="prefetch" href="/assets/js/45.8e348899.js"><link rel="prefetch" href="/assets/js/450.2d08c1c0.js"><link rel="prefetch" href="/assets/js/451.9d6b2e7a.js"><link rel="prefetch" href="/assets/js/452.b1bbaf9b.js"><link rel="prefetch" href="/assets/js/453.e20c61f7.js"><link rel="prefetch" href="/assets/js/454.3eb60d52.js"><link rel="prefetch" href="/assets/js/455.99162147.js"><link rel="prefetch" href="/assets/js/456.5b5d88a5.js"><link rel="prefetch" href="/assets/js/457.7e289ba2.js"><link rel="prefetch" href="/assets/js/458.7cd2b35f.js"><link rel="prefetch" href="/assets/js/459.28a0feb7.js"><link rel="prefetch" href="/assets/js/46.bd86a540.js"><link rel="prefetch" href="/assets/js/460.a0ec98af.js"><link rel="prefetch" href="/assets/js/461.f36d6dd5.js"><link rel="prefetch" href="/assets/js/462.586bae44.js"><link rel="prefetch" href="/assets/js/463.51d45d50.js"><link rel="prefetch" href="/assets/js/464.b45ed0f4.js"><link rel="prefetch" href="/assets/js/465.ea3b1000.js"><link rel="prefetch" href="/assets/js/466.046e4832.js"><link rel="prefetch" href="/assets/js/467.ed9a65ef.js"><link rel="prefetch" href="/assets/js/468.084a38bf.js"><link rel="prefetch" href="/assets/js/469.f50a6464.js"><link rel="prefetch" href="/assets/js/47.9fdda858.js"><link rel="prefetch" href="/assets/js/470.f7103df5.js"><link rel="prefetch" href="/assets/js/471.aa49ef36.js"><link rel="prefetch" href="/assets/js/48.e4bb08ff.js"><link rel="prefetch" href="/assets/js/49.469c6ebe.js"><link rel="prefetch" href="/assets/js/5.d6acc3fd.js"><link rel="prefetch" href="/assets/js/50.f655526c.js"><link rel="prefetch" href="/assets/js/51.35278d65.js"><link rel="prefetch" href="/assets/js/52.93d32ef4.js"><link rel="prefetch" href="/assets/js/53.3bd0e404.js"><link rel="prefetch" href="/assets/js/54.29e39946.js"><link rel="prefetch" href="/assets/js/55.e703fc0c.js"><link rel="prefetch" href="/assets/js/56.4af193d8.js"><link rel="prefetch" href="/assets/js/57.f6fabb8f.js"><link rel="prefetch" href="/assets/js/58.866f3357.js"><link rel="prefetch" href="/assets/js/59.4d663027.js"><link rel="prefetch" href="/assets/js/6.ca24eb38.js"><link rel="prefetch" href="/assets/js/60.9bfc9ad9.js"><link rel="prefetch" href="/assets/js/61.f435af9a.js"><link rel="prefetch" href="/assets/js/62.f1e1e432.js"><link rel="prefetch" href="/assets/js/63.d07204ae.js"><link rel="prefetch" href="/assets/js/64.44228fd1.js"><link rel="prefetch" href="/assets/js/65.1b16eca3.js"><link rel="prefetch" href="/assets/js/66.2977efbc.js"><link rel="prefetch" href="/assets/js/67.e4aa7845.js"><link rel="prefetch" href="/assets/js/68.5aa0884b.js"><link rel="prefetch" href="/assets/js/69.b58cb280.js"><link rel="prefetch" href="/assets/js/7.7df254a3.js"><link rel="prefetch" href="/assets/js/70.638a855f.js"><link rel="prefetch" href="/assets/js/71.a3909762.js"><link rel="prefetch" href="/assets/js/72.72f19178.js"><link rel="prefetch" href="/assets/js/73.b63eb5bd.js"><link rel="prefetch" href="/assets/js/74.56b55f09.js"><link rel="prefetch" href="/assets/js/75.12383bd5.js"><link rel="prefetch" href="/assets/js/76.7b351ecd.js"><link rel="prefetch" href="/assets/js/77.a18ae9f4.js"><link rel="prefetch" href="/assets/js/78.4f24cba1.js"><link rel="prefetch" href="/assets/js/79.be142205.js"><link rel="prefetch" href="/assets/js/80.dc16ac50.js"><link rel="prefetch" href="/assets/js/81.c34c699a.js"><link rel="prefetch" href="/assets/js/82.755a92bb.js"><link rel="prefetch" href="/assets/js/83.966a8d8c.js"><link rel="prefetch" href="/assets/js/84.d29dcb18.js"><link rel="prefetch" href="/assets/js/85.a6f25c16.js"><link rel="prefetch" href="/assets/js/86.03662b98.js"><link rel="prefetch" href="/assets/js/87.1455a611.js"><link rel="prefetch" href="/assets/js/88.f3940bed.js"><link rel="prefetch" href="/assets/js/89.8d83fb71.js"><link rel="prefetch" href="/assets/js/90.8a1072d4.js"><link rel="prefetch" href="/assets/js/91.1a3e94cc.js"><link rel="prefetch" href="/assets/js/92.b3798e45.js"><link rel="prefetch" href="/assets/js/93.df37b67b.js"><link rel="prefetch" href="/assets/js/94.3d25dfc1.js"><link rel="prefetch" href="/assets/js/95.cb26583e.js"><link rel="prefetch" href="/assets/js/96.48c3b8eb.js"><link rel="prefetch" href="/assets/js/97.e86b491e.js"><link rel="prefetch" href="/assets/js/98.c9a2a2e5.js"><link rel="prefetch" href="/assets/js/99.8571be6b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.706e5846.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8029f154.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/angular/" class="nav-link">
  angular
</a></li><li class="dropdown-item"><!----> <a href="/3d/" class="nav-link">
  3d
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link router-link-active">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/hmos/" class="nav-link">
  hmos
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/" class="nav-link">
  ajax
</a></li><li class="dropdown-item"><!----> <a href="/angular/" class="nav-link">
  angular
</a></li><li class="dropdown-item"><!----> <a href="/3d/" class="nav-link">
  3d
</a></li><li class="dropdown-item"><!----> <a href="/basic/" class="nav-link">
  basic
</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">
  canvas
</a></li><li class="dropdown-item"><!----> <a href="/chart/" class="nav-link">
  chart
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/d3/" class="nav-link">
  d3
</a></li><li class="dropdown-item"><!----> <a href="/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/fast/" class="nav-link">
  fast
</a></li><li class="dropdown-item"><!----> <a href="/htmlcss/" class="nav-link">
  htmlcss
</a></li><li class="dropdown-item"><!----> <a href="/jsstore/" class="nav-link">
  jsstore
</a></li><li class="dropdown-item"><!----> <a href="/object/" class="nav-link">
  object
</a></li><li class="dropdown-item"><!----> <a href="/plugin/" class="nav-link">
  plugin
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  svg
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  ssr
</a></li><li class="dropdown-item"><!----> <a href="/test/" class="nav-link">
  test
</a></li><li class="dropdown-item"><!----> <a href="/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/ui/" class="nav-link">
  ui
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webdb/" class="nav-link">
  webdb
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webrtc/" class="nav-link">
  webrtc
</a></li><li class="dropdown-item"><!----> <a href="/wx/" class="nav-link">
  wx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/mongo/" class="nav-link">
  mongo
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  other
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/mk/" class="nav-link router-link-active">
  mk
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  reactnative
</a></li><li class="dropdown-item"><!----> <a href="/hmos/" class="nav-link">
  hmos
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  book
</a></li><li class="dropdown-item"><!----> <a href="/confusing/" class="nav-link">
  confusing
</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">
  tool
</a></li><li class="dropdown-item"><!----> <a href="/increase/" class="nav-link">
  increase
</a></li><li class="dropdown-item"><!----> <a href="/write/" class="nav-link">
  write
</a></li><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">
  interview
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/weishell/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mk/" aria-current="page" class="sidebar-link">整理项目</a></li><li><a href="/mk/001blog.html" class="sidebar-link">博客项目</a></li><li><a href="/mk/002design.html" class="sidebar-link">设计模式</a></li><li><a href="/mk/003suanfa.html" class="sidebar-link">算法</a></li><li><a href="/mk/004mixin.html" class="sidebar-link">混合开发</a></li><li><a href="/mk/005zhihu.html" class="sidebar-link">node服务端知乎</a></li><li><a href="/mk/006vue3.html" class="sidebar-link">vue3+ts知乎</a></li><li><a href="/mk/007qyzjk.html" class="sidebar-link">企业组件库开发</a></li><li><a href="/mk/008vue.html" class="sidebar-link">慕课vue源码学习</a></li><li><a href="/mk/009elementuifz.html" class="sidebar-link">封装elementplus</a></li><li><a href="/mk/010vue3ts.html" aria-current="page" class="active sidebar-link">vue3+ts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#vue3-ts项目" class="sidebar-link">vue3+ts项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#editorconfig编辑配置" class="sidebar-link">EditorConfig编辑配置</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#使用prettier工具" class="sidebar-link">使用prettier工具</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#使用eslint检测" class="sidebar-link">使用ESLint检测</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#git-husky和eslint" class="sidebar-link">git Husky和eslint</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#git-commit规范-commitizen" class="sidebar-link">git commit规范 Commitizen</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts中创建路由" class="sidebar-link">ts中创建路由</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#shims-vue-d-ts" class="sidebar-link">shims-vue.d.ts</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts封装axios" class="sidebar-link">ts封装axios</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#tsconfig-json" class="sidebar-link">tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3-获取子组件的实例" class="sidebar-link">ts+vue3 获取子组件的实例</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3使用vuex" class="sidebar-link">ts+vue3使用vuex</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3请求接口的封装" class="sidebar-link">ts+vue3请求接口的封装</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3-proptype-props增加具体对象数组限制" class="sidebar-link">ts+vue3 PropType: props增加具体对象数组限制</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3-table封装" class="sidebar-link">ts+vue3 table封装</a></li><li class="sidebar-sub-header"><a href="/mk/010vue3ts.html#ts-vue3-对象表单的双向绑定处理" class="sidebar-link">ts+vue3 对象表单的双向绑定处理</a></li></ul></li></ul></li><li><a href="/mk/011threejs.html" class="sidebar-link">threejs</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue3-ts项目"><a href="#vue3-ts项目" class="header-anchor">#</a> vue3+ts项目</h2> <h3 id="editorconfig编辑配置"><a href="#editorconfig编辑配置" class="header-anchor">#</a> EditorConfig编辑配置</h3> <p>让不同电脑系统不同编译器保证代码风格一致。
<a href="http://editorconfig.org" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>配置.editorconfig文件，编辑器会自动读取，不过vscode需要安装插件：<code>EditorConfig for VS Code</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>root <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># 表示所有文件适用</span>
charset <span class="token operator">=</span> utf-8 <span class="token comment"># 设置文件字符集为 utf-8</span>
indent_style <span class="token operator">=</span> space <span class="token comment"># 缩进风格（tab | space）</span>
indent_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment"># 缩进大小</span>
end_of_line <span class="token operator">=</span> lf <span class="token comment"># 控制换行类型(lf | cr | crlf)</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 去除行首的任意空白字符</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 始终在文件末尾插入一个新行</span>

<span class="token punctuation">[</span>*.md<span class="token punctuation">]</span> <span class="token comment"># 表示仅 md 文件适用以下规则</span>
max_line_length <span class="token operator">=</span> off
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="使用prettier工具"><a href="#使用prettier工具" class="header-anchor">#</a> 使用prettier工具</h3> <p>vscode 安装插件 <code>Prettier - Code formatter</code></p> <p>Prettier 是一款强大的代码格式化工具，支持 JavaScript、CSS、Vue、GraphQL、JSON、Markdown 等语言，基本上前端能用到的文件格式它都可以搞定。</p> <ol><li>安装prettier</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> prettier <span class="token parameter variable">-D</span>
</code></pre></div><ol start="2"><li>配置.prettierrc文件：</li></ol> <ul><li>useTabs：使用tab缩进还是空格缩进，选择false；</li> <li>tabWidth：tab是空格的情况下，是几个空格，选择2个；</li> <li>printWidth：当行字符的长度，推荐80，也有人喜欢100或者120；</li> <li>singleQuote：使用单引号还是双引号，选择true，使用单引号；</li> <li>trailingComma：在多行输入的尾逗号是否添加，设置为 <code>none</code>；</li> <li>semi：语句末尾是否要加分号，默认值true，选择false表示不加；</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>创建.prettierignore忽略文件</li></ol> <div class="language- extra-class"><pre class="language-text"><code>/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*
</code></pre></div><ol start="4"><li>测试prettier是否生效</li></ol> <ul><li>测试一：在代码中保存代码；</li> <li>测试二：配置一次性修改的命令；</li></ul> <p>在package.json中配置一个scripts：</p> <div class="language-json extra-class"><pre class="language-json"><code>    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier --write .&quot;</span>
</code></pre></div><h3 id="使用eslint检测"><a href="#使用eslint检测" class="header-anchor">#</a> 使用ESLint检测</h3> <ol><li>VSCode需要安装ESLint插件：</li> <li>解决eslint和prettier冲突的问题：</li></ol> <p>安装插件：（vue在创建项目时，如果选择prettier，那么这两个插件会自动安装）</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i eslint-plugin-prettier eslint-config-prettier <span class="token parameter variable">-D</span>
</code></pre></div><p>添加prettier插件：</p> <div class="language-json extra-class"><pre class="language-json"><code>  extends<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;plugin:vue/vue3-essential&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@vue/typescript/recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@vue/prettier&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@vue/prettier/@typescript-eslint&quot;</span><span class="token punctuation">,</span>
    'plugin<span class="token operator">:</span>prettier/recommended'
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="git-husky和eslint"><a href="#git-husky和eslint" class="header-anchor">#</a> git Husky和eslint</h3> <p>虽然已经要求项目使用eslint了，但是不能保证组员提交代码之前都将eslint中的问题解决掉了：</p> <ul><li><p>也就是我们希望保证代码仓库中的代码都是符合eslint规范的；</p></li> <li><p>那么我们需要在组员执行 <code>git commit</code> 命令的时候对其进行校验，如果不符合eslint规范，那么自动通过规范进行修复；</p></li></ul> <p>那么如何做到这一点呢？可以通过Husky工具：</p> <ul><li>husky是一个git hook工具，可以帮助我们触发git提交的各个阶段：pre-commit、commit-msg、pre-push</li></ul> <p>如何使用husky呢？</p> <p>这里可以使用自动配置命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx husky-init
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>这里会做三件事：
<img src="/beifen/398.png"></p> <p>接下来，需要去完成一个操作：在进行commit时，执行lint脚本：</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service lint --fix&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>.husky&gt;pre-commit</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>
<span class="token function">npm</span> run lint
</code></pre></div><h3 id="git-commit规范-commitizen"><a href="#git-commit规范-commitizen" class="header-anchor">#</a> git commit规范 Commitizen</h3> <ul><li>Commitizen</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>cnpm <span class="token function">install</span> commitizen <span class="token parameter variable">-D</span>
</code></pre></div><ul><li>安装cz-conventional-changelog，并且初始化cz-conventional-changelog：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>npx commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre></div><p>这个命令会帮助安装cz-conventional-changelog：</p> <p>并且在package.json中进行配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service lint --fix&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier --write . &quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;core-js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.6.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.2.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cz-conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.0&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-conventional-changelog&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个时候提交代码需要使用 npx cz：</p> <table><thead><tr><th>Type</th> <th>作用</th></tr></thead> <tbody><tr><td>feat</td> <td>新增特性 (feature)</td></tr> <tr><td>fix</td> <td>修复 Bug(bug fix)</td></tr> <tr><td>docs</td> <td>修改文档 (documentation)</td></tr> <tr><td>style</td> <td>代码格式修改(white-space, formatting, missing semi colons, etc)</td></tr> <tr><td>refactor</td> <td>代码重构(refactor)</td></tr> <tr><td>perf</td> <td>改善性能(A code change that improves performance)</td></tr> <tr><td>test</td> <td>测试(when adding missing tests)</td></tr> <tr><td>build</td> <td>变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）</td></tr> <tr><td>ci</td> <td>更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等</td></tr> <tr><td>chore</td> <td>变更构建流程或辅助工具(比如更改测试环境)</td></tr> <tr><td>revert</td> <td>代码回退</td></tr></tbody></table> <h4 id="代码提交验证"><a href="#代码提交验证" class="header-anchor">#</a> 代码提交验证</h4> <p>如果按照cz来规范了提交风格，但是依然有同事通过 git commit 按照不规范的格式提交应该怎么办呢？</p> <p>可以通过commitlint来限制提交；</p> <ol><li>安装 @commitlint/config-conventional 和 @commitlint/cli</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cnpm i @commitlint/config-conventional @commitlint/cli -D
</code></pre></div><ol start="2"><li>在根目录创建commitlint.config.js文件，配置commitlint</li></ol> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  extends: ['@commitlint/config-conventional']
}
</code></pre></div><ol start="3"><li>使用husky生成commit-msg文件，验证提交信息：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;
</code></pre></div><p><a href="https://blog.csdn.net/qq_41308489/article/details/121734786" target="_blank" rel="noopener noreferrer">可能的问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>因为这条语句里包含着$1,它是在shell命令中代表的是参数。而Windows系统的cmd是没有$1这种操作符。</p> <p>首先要搞明白这条命令做了什么事情:</p> <ul><li>添加一个文件commit-msg</li> <li>然后再commit-msg中填充该npx指令</li></ul> <p>解决：直接把步骤分开执行就可以解决</p> <ul><li>添加一个文件commit-msg在.husky文件夹下, 执行下面命令</li></ul> <div class="language- extra-class"><pre class="language-text"><code>npx husky add .husky/commit-msg
</code></pre></div><ul><li>在创建后的文件夹commit-msg文件里直接填充你的指令即可:npx --no-install commitlint</li></ul> <h4 id="项目中eslint-js其他配置"><a href="#项目中eslint-js其他配置" class="header-anchor">#</a> 项目中eslint.js其他配置</h4> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/typescript/recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/prettier'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/prettier/@typescript-eslint'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:prettier/recommended'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2020</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'no-console'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'warn'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'no-debugger'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'warn'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'@typescript-eslint/no-var-requires'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span><span class="token comment">//项目中有使用require，eslint想要统一成import，会报红色警告，可以配置关闭</span>
    <span class="token string-property property">'@typescript-eslint/no-explicit-any'</span><span class="token operator">:</span> <span class="token string">'off'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ts中创建路由"><a href="#ts中创建路由" class="header-anchor">#</a> ts中创建路由</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token comment">// 这是vue-router内部定义好的 </span>
<span class="token comment">// 加上type表示这是类型而不是函数等，type可以省略</span>

<span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/login'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/login/login.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/main'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/main/main.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">,</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

</code></pre></div><img src="/beifen/493.png"> <h3 id="shims-vue-d-ts"><a href="#shims-vue-d-ts" class="header-anchor">#</a> shims-vue.d.ts</h3> <p>配置了某些插件，在template中直接使用$store会报红，需要在这里声明配置一下</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/* eslint-disable */</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">const</span> component<span class="token operator">:</span> DefineComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> component
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> $store<span class="token operator">:</span> <span class="token builtin">any</span>

</code></pre></div><h3 id="ts封装axios"><a href="#ts封装axios" class="header-anchor">#</a> ts封装axios</h3> <p>实现目标:</p> <ol><li>返回值约束，比如res.date时报错，避免代码写错</li> <li>传入约束</li></ol> <img src="/beifen/494.png"> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 请求出口</span>
<span class="token keyword">import</span> HYRequest <span class="token keyword">from</span> <span class="token string">'./request'</span>
<span class="token comment">// 基本配置根据不同的环境返回不同的url timeout</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">BASE_URL</span><span class="token punctuation">,</span> <span class="token constant">TIME_OUT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./request/config'</span>

<span class="token keyword">const</span> hyRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HYRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token constant">TIME_OUT</span><span class="token punctuation">,</span>
  interceptors<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">requestInterceptor</span><span class="token operator">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 携带token的拦截</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span>

      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求成功的拦截'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">requestInterceptorCatch</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求失败的拦截'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> err
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">responseInterceptor</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'响应成功的拦截'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> res
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">responseInterceptorCatch</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'响应失败的拦截'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> hyRequest

</code></pre></div><ul><li>request/index.ts</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token comment">//type</span>
<span class="token class-name"><span class="token keyword">import</span></span> <span class="token keyword">type</span> <span class="token punctuation">{</span> HYRequestInterceptors<span class="token punctuation">,</span> HYRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./type'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ElLoading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ILoadingInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus/lib/el-loading/src/loading.type'</span>

<span class="token keyword">const</span> <span class="token constant">DEAFULT_LOADING</span> <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token keyword">class</span> <span class="token class-name">HYRequest</span> <span class="token punctuation">{</span>
  instance<span class="token operator">:</span> AxiosInstance
  interceptors<span class="token operator">?</span><span class="token operator">:</span> HYRequestInterceptors
  showLoading<span class="token operator">:</span> <span class="token builtin">boolean</span>
  loading<span class="token operator">?</span><span class="token operator">:</span> ILoadingInstance

  <span class="token function">constructor</span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建axios实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>

    <span class="token comment">// 保存基本信息</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>showLoading <span class="token operator">=</span> config<span class="token punctuation">.</span>showLoading <span class="token operator">??</span> <span class="token constant">DEAFULT_LOADING</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors <span class="token operator">=</span> config<span class="token punctuation">.</span>interceptors

    <span class="token comment">// 使用拦截器</span>
    <span class="token comment">// 1.从config中取出的拦截器是对应的实例的拦截器</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>requestInterceptor<span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>requestInterceptorCatch
    <span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>responseInterceptor<span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>responseInterceptorCatch
    <span class="token punctuation">)</span>

    <span class="token comment">// 2.添加所有的实例都有的拦截器</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'所有的实例都有的拦截器: 请求成功拦截'</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showLoading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> ElLoading<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            lock<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            text<span class="token operator">:</span> <span class="token string">'正在请求数据....'</span><span class="token punctuation">,</span>
            background<span class="token operator">:</span> <span class="token string">'rgba(0, 0, 0, 0.5)'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> config
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'所有的实例都有的拦截器: 请求失败拦截'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> err
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'所有的实例都有的拦截器: 响应成功拦截'</span><span class="token punctuation">)</span>

        <span class="token comment">// 将loading移除</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading<span class="token operator">?.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>returnCode <span class="token operator">===</span> <span class="token string">'-1001'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求失败~, 错误信息'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> data
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'所有的实例都有的拦截器: 响应失败拦截'</span><span class="token punctuation">)</span>
        <span class="token comment">// 将loading移除</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading<span class="token operator">?.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 例子: 判断不同的HttpErrorCode显示不同的错误信息</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'404的错误~'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> err
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.单个请求对请求config的处理</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>requestInterceptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config <span class="token operator">=</span> config<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">requestInterceptor</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 2.判断是否需要显示loading</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>showLoading <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showLoading <span class="token operator">=</span> config<span class="token punctuation">.</span>showLoading
      <span class="token punctuation">}</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>instance
        <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 1.单个请求对数据的处理</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>interceptors<span class="token operator">?.</span>responseInterceptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res <span class="token operator">=</span> config<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">responseInterceptor</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// 2.将showLoading设置true, 这样不会影响下一个请求</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>showLoading <span class="token operator">=</span> <span class="token constant">DEAFULT_LOADING</span>

          <span class="token comment">// 3.将结果resolve返回出去</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 将showLoading设置true, 这样不会影响下一个请求</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>showLoading <span class="token operator">=</span> <span class="token constant">DEAFULT_LOADING</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
          <span class="token keyword">return</span> err
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'GET'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'POST'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">delete</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'DELETE'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token generic-function"><span class="token function">patch</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'PATCH'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HYRequest

</code></pre></div><ul><li>type.ts</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosRequestConfig<span class="token punctuation">,</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">HYRequestInterceptors<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> AxiosResponse<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  requestInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AxiosRequestConfig
  requestInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
  responseInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span>
  responseInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> AxiosResponse<span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AxiosRequestConfig</span> <span class="token punctuation">{</span>
  interceptors<span class="token operator">?</span><span class="token operator">:</span> HYRequestInterceptors<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
  showLoading<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="el-image"><div class="el-image__placeholder"></div><!----></div> <h3 id="tsconfig-json"><a href="#tsconfig-json" class="header-anchor">#</a> tsconfig.json</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 目标代码(ts -&gt; js(es5/6/7))</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 目标代码需要使用的模块化方案(commonjs require/module.exports/es module import/export)</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 严格一些严格的检查(any)</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 对jsx进行怎么样的处理</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 辅助的导入功能</span>
    <span class="token property">&quot;importHelpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 按照node的方式去解析模块 import &quot;/index.node&quot;</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 跳过一些库的类型检测 (axios -&gt; 类型/ lodash -&gt; @types/lodash / 其他的第三方)</span>
    <span class="token comment">// import { Person } from 'axios'</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// export default/module.exports = {}</span>
    <span class="token comment">// es module 和 commonjs</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 要不要生成映射文件(ts -&gt; js)</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 文件路径在解析时, 基本url</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 指定具体要解析使用的类型</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;webpack-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 路径解析(类似于webpack alias)</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;components/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/components/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 可以指定在项目中可以使用哪里库的类型(Proxy/Window/Document)</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom.iterable&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;scripthost&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tests/**/*.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tests/**/*.tsx&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-vue3-获取子组件的实例"><a href="#ts-vue3-获取子组件的实例" class="header-anchor">#</a> ts+vue3 获取子组件的实例</h3> <ul><li>读取子组件的属性内容：<code>ref&lt;InstanceType&lt;typeof LoginAccount&gt;&gt;()</code>，因为是没赋值，所以调用子组件的方法时accountRef.value?.loginAction()加问号表示不存在时短路</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>账号登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login-account</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountRef<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleLoginClick<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>立即登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
    <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> LoginAccount <span class="token keyword">from</span> <span class="token string">'./login-account.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    LoginAccount
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//InstanceType&lt;typeof LoginAccount&gt; === 获取了LoginAccount的实例</span>
    <span class="token keyword">const</span> accountRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> LoginAccount<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleLoginClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      accountRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">loginAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      handleLoginClick<span class="token punctuation">,</span>
      accountRef
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当然也可以应用在elementplus的组件上</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> ElForm<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">loginAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      formRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'真正执行登录逻辑'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-vue3使用vuex"><a href="#ts-vue3使用vuex" class="header-anchor">#</a> ts+vue3使用vuex</h3> <ul><li>IRootState接口</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IRootState</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Vuex</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">import</span> login <span class="token keyword">from</span> <span class="token string">'./login/login'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IRootState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types'</span>
<span class="token comment">// createStore可以传入泛型约束state，那么就更好的控制</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createStore</span><span class="token generic class-name"><span class="token operator">&lt;</span>IRootState<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'coderwhy'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      love<span class="token operator">:</span><span class="token string">'ll'</span><span class="token comment">//这边不会报错</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">af</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// console.log(state.love)</span>
      <span class="token comment">//类型“IRootState”上不存在属性“love”。</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span>
    login
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setupStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'login/loadLocalLogin'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><ul><li>Login.ts</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 引入Module,ts对vuex的支持还是需要更多的人为操作</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>
  accountLoginRequest<span class="token punctuation">,</span>
  requestUserInfoById<span class="token punctuation">,</span>
  requestUserMenusByRoleId
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/service/login/login'</span>
<span class="token keyword">import</span> localCache <span class="token keyword">from</span> <span class="token string">'@/utils/cache'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IAccount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/service/login/type'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ILoginState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IRootState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../types'</span>
<span class="token comment">// 子模块需要支持自己的state和根模块的state</span>
<span class="token keyword">const</span> loginModule<span class="token operator">:</span> Module<span class="token operator">&lt;</span>ILoginState<span class="token punctuation">,</span> IRootState<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      token<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      userInfo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      userMenus<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeToken</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">changeUserInfo</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> userInfo<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">changeUserMenus</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> userMenus<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>userMenus <span class="token operator">=</span> userMenus
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">accountLoginAction</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> IAccount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.实现登录逻辑</span>
      <span class="token keyword">const</span> loginResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">accountLoginRequest</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> loginResult<span class="token punctuation">.</span>data
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeToken'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>
      localCache<span class="token punctuation">.</span><span class="token function">setCache</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>

      <span class="token comment">// 2.请求用户信息</span>
      <span class="token keyword">const</span> userInfoResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">requestUserInfoById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> userInfoResult<span class="token punctuation">.</span>data
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeUserInfo'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span>
      localCache<span class="token punctuation">.</span><span class="token function">setCache</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span>

      <span class="token comment">// 3.请求用户菜单</span>
      <span class="token keyword">const</span> userMenusResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">requestUserMenusByRoleId</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>role<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token keyword">const</span> userMenus <span class="token operator">=</span> userMenusResult<span class="token punctuation">.</span>data
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeUserMenus'</span><span class="token punctuation">,</span> userMenus<span class="token punctuation">)</span>
      localCache<span class="token punctuation">.</span><span class="token function">setCache</span><span class="token punctuation">(</span><span class="token string">'userMenus'</span><span class="token punctuation">,</span> userMenus<span class="token punctuation">)</span>

      <span class="token comment">// 4.跳到首页</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/main'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">loadLocalLogin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> localCache<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeToken'</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> localCache<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeUserInfo'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> userMenus <span class="token operator">=</span> localCache<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token string">'userMenus'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>userMenus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeUserMenus'</span><span class="token punctuation">,</span> userMenus<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> loginModule
</code></pre></div><h4 id="vuex使用usestore的类型检测"><a href="#vuex使用usestore的类型检测" class="header-anchor">#</a> vuex使用useStore的类型检测</h4> <ul><li>/login/types</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ILoginState</span> <span class="token punctuation">{</span>
  token<span class="token operator">:</span> <span class="token builtin">string</span>
  userInfo<span class="token operator">:</span> <span class="token builtin">any</span>
  userMenus<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>所有的接口类型交叉之后导出给useStore方法使用</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ILoginState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./login/types'</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IRootState</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IRootWithModule</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里可以继续增加其他模块所需要的属性</span>
  login<span class="token operator">:</span> ILoginState
<span class="token punctuation">}</span>
<span class="token comment">//交叉类型进行处理</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">IStoreType</span> <span class="token operator">=</span> IRootState <span class="token operator">&amp;</span> IRootWithModule
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> Store<span class="token punctuation">,</span> useStore <span class="token keyword">as</span> useVuexStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">import</span> login <span class="token keyword">from</span> <span class="token string">'./login/login'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IRootState<span class="token punctuation">,</span> IStoreType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createStore</span><span class="token generic class-name"><span class="token operator">&lt;</span>IRootState<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'coderwhy'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span>
    login
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setupStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'login/loadLocalLogin'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用自己的useStore</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Store<span class="token operator">&lt;</span>IStoreType<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">useVuexStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 使用自己已经处理过的useStore那样就会增加类型检测了</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>
 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> userMenus <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>login<span class="token punctuation">.</span>userMenus<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      userMenus
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-vue3请求接口的封装"><a href="#ts-vue3请求接口的封装" class="header-anchor">#</a> ts+vue3请求接口的封装</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IAccount</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  password<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ILoginResult</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  token<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IDataType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span>
  data<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> hyRequest <span class="token keyword">from</span> <span class="token string">'../index'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> IAccount<span class="token punctuation">,</span> IDataType<span class="token punctuation">,</span> ILoginResult <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./type'</span>

<span class="token keyword">enum</span> LoginAPI <span class="token punctuation">{</span>
  AccountLogin <span class="token operator">=</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
  LoginUserInfo <span class="token operator">=</span> <span class="token string">'/users/'</span><span class="token punctuation">,</span> <span class="token comment">// 用法: /users/1</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accountLoginRequest</span><span class="token punctuation">(</span>account<span class="token operator">:</span> IAccount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//泛型嵌套</span>
  <span class="token keyword">return</span> hyRequest<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span>IDataType<span class="token operator">&lt;</span>ILoginResult<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> LoginAPI<span class="token punctuation">.</span>AccountLogin<span class="token punctuation">,</span>
    data<span class="token operator">:</span> account
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">requestUserInfoById</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> hyRequest<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>IDataType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> LoginAPI<span class="token punctuation">.</span>LoginUserInfo <span class="token operator">+</span> id<span class="token punctuation">,</span>
    showLoading<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code>  <span class="token comment">//post&lt;IDataType&lt;ILoginResult&gt;&gt;这里的T就是上面get/post后跟的T，就是为了约束返回值data的类型</span>
  <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> HYRequestConfig<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'POST'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="ts-vue3-proptype-props增加具体对象数组限制"><a href="#ts-vue3-proptype-props增加具体对象数组限制" class="header-anchor">#</a> ts+vue3 PropType: props增加具体对象数组限制</h3> <p>利用propType，它可以通过泛型进行对父组件传过来的格式进行约束。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> PropType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">type</span> <span class="token class-name">IFormType</span> <span class="token operator">=</span> <span class="token string">'input'</span> <span class="token operator">|</span> <span class="token string">'password'</span> <span class="token operator">|</span> <span class="token string">'select'</span> <span class="token operator">|</span> <span class="token string">'datepicker'</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IFormItem</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> IFormType
  label<span class="token operator">:</span> <span class="token builtin">string</span>
  rules<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  placeholder<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span>
  <span class="token comment">// 针对select</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 针对特殊的属性</span>
  otherOptions<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    formItems<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token builtin">Array</span> <span class="token keyword">as</span> PropType<span class="token operator">&lt;</span>IFormItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ts-vue3-table封装"><a href="#ts-vue3-table封装" class="header-anchor">#</a> ts+vue3 table封装</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> contentTableConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'用户列表'</span><span class="token punctuation">,</span>
  propList<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span> minWidth<span class="token operator">:</span> <span class="token string">'100'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'realname'</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">'真实姓名'</span><span class="token punctuation">,</span> minWidth<span class="token operator">:</span> <span class="token string">'100'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'cellphone'</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">'手机号码'</span><span class="token punctuation">,</span> minWidth<span class="token operator">:</span> <span class="token string">'100'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'enable'</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">'状态'</span><span class="token punctuation">,</span> minWidth<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span> slotName<span class="token operator">:</span> <span class="token string">'status'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      prop<span class="token operator">:</span> <span class="token string">'createAt'</span><span class="token punctuation">,</span>
      label<span class="token operator">:</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
      minWidth<span class="token operator">:</span> <span class="token string">'250'</span><span class="token punctuation">,</span>
      slotName<span class="token operator">:</span> <span class="token string">'createAt'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      prop<span class="token operator">:</span> <span class="token string">'updateAt'</span><span class="token punctuation">,</span>
      label<span class="token operator">:</span> <span class="token string">'更新时间'</span><span class="token punctuation">,</span>
      minWidth<span class="token operator">:</span> <span class="token string">'250'</span><span class="token punctuation">,</span>
      slotName<span class="token operator">:</span> <span class="token string">'updateAt'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span> minWidth<span class="token operator">:</span> <span class="token string">'120'</span><span class="token punctuation">,</span> slotName<span class="token operator">:</span> <span class="token string">'handler'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  showIndexColumn<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  showSelectColumn<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hy-table&quot;</span><span class="token operator">&gt;</span>
   
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>table
      <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">&quot;listData&quot;</span>
      border
      style<span class="token operator">=</span><span class="token string">&quot;width: 100%&quot;</span>
      <span class="token decorator"><span class="token at operator">@</span><span class="token function">selection</span></span><span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">&quot;handleSelectionChange&quot;</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column
        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;showSelectColumn&quot;</span>
        type<span class="token operator">=</span><span class="token string">&quot;selection&quot;</span>
        align<span class="token operator">=</span><span class="token string">&quot;center&quot;</span>
        width<span class="token operator">=</span><span class="token string">&quot;60&quot;</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column
        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;showIndexColumn&quot;</span>
        type<span class="token operator">=</span><span class="token string">&quot;index&quot;</span>
        label<span class="token operator">=</span><span class="token string">&quot;序号&quot;</span>
        align<span class="token operator">=</span><span class="token string">&quot;center&quot;</span>
        width<span class="token operator">=</span><span class="token string">&quot;80&quot;</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;propItem in propList&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;propItem.prop&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;propItem&quot;</span> align<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>template #<span class="token keyword">default</span><span class="token operator">=</span><span class="token string">&quot;scope&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>slot <span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;propItem.slotName&quot;</span> <span class="token operator">:</span>row<span class="token operator">=</span><span class="token string">&quot;scope.row&quot;</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span><span class="token punctuation">{</span> scope<span class="token punctuation">.</span>row<span class="token punctuation">[</span>propItem<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    listData<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    propList<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    showIndexColumn<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    showSelectColumn<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'selectionChange'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSelectionChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'selectionChange'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      handleSelectionChange
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hy-table</span> <span class="token attr-name">:listData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contentTableConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--列中的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
          <span class="token attr-name">plain</span>
          <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row.enable ? 'success' : 'danger'<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>
          {{ scope.row.enable ? '启用' : '禁用' }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#createAt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ $filters.formatTime(scope.row.createAt) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#updateAt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ $filters.formatTime(scope.row.updateAt) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#handler</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle-btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-icon-edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
          <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-icon-delete<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
          <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hy-table</span><span class="token punctuation">&gt;</span></span>
	
props: {
	    contentTableConfig: {
	      type: Object,
	      require: true
	    }
},
</code></pre></div><h3 id="ts-vue3-对象表单的双向绑定处理"><a href="#ts-vue3-对象表单的双向绑定处理" class="header-anchor">#</a> ts+vue3 对象表单的双向绑定处理</h3> <h4 id="子组件v-model变化通知父组件更新"><a href="#子组件v-model变化通知父组件更新" class="header-anchor">#</a> 子组件v-model变化通知父组件更新</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">+</span> 子组件
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;labelWidth&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>el<span class="token operator">-</span>input
			  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;item.placeholder&quot;</span>
			  v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;item.otherOptions&quot;</span>
			  <span class="token operator">:</span>show<span class="token operator">-</span>password<span class="token operator">=</span><span class="token string">&quot;item.type === 'password'&quot;</span>
			  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formData[`${item.field}`]&quot;</span>
			<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> PropType<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    modelValue<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//因为是浅拷贝，所以当改到formData.value.key,这里还是可以动态变化</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>props<span class="token punctuation">.</span>modelValue <span class="token punctuation">}</span><span class="token punctuation">)</span>
	
	  <span class="token function">watch</span><span class="token punctuation">(</span>
		  formData<span class="token punctuation">,</span>
		  <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
			<span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
		  <span class="token punctuation">}</span><span class="token punctuation">,</span>
		  <span class="token punctuation">{</span>
			deep<span class="token operator">:</span> <span class="token boolean">true</span>
		  <span class="token punctuation">}</span>
		<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formData
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">+</span> 父组件
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page-search&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hy<span class="token operator">-</span>form v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;searchFormConfig&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formData&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template #header<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span>高级检索<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template #footer<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;handle-btns&quot;</span><span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span>el<span class="token operator">-</span>button icon<span class="token operator">=</span><span class="token string">&quot;el-icon-refresh&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;handleResetClick&quot;</span>
		<span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button
	  <span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> icon<span class="token operator">=</span><span class="token string">&quot;el-icon-search&quot;</span><span class="token operator">&gt;</span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>hy<span class="token operator">-</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token keyword">const</span> formOriginData<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> formItems<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  formOriginData<span class="token punctuation">[</span>item<span class="token punctuation">.</span>field<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
<span class="token comment">//父组件接收到重置表单的命令，清空原表单的数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleResetClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> formOriginData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	formData<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> formOriginData<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>另一种模式</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hy-form</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchFormConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#footer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle-btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-icon-refresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleResetClick<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>重置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
          <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hy-form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> HyForm <span class="token keyword">from</span> <span class="token string">'@/base-ui/form'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">searchFormConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token literal-property property">reuqired</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    HyForm
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'resetBtnClick'</span><span class="token punctuation">,</span> <span class="token string">'queryBtnClick'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 双向绑定的属性应该是由配置文件的field来决定</span>
    <span class="token comment">// 1.优化一: formData中的属性应该动态来决定</span>
    <span class="token keyword">const</span> formItems <span class="token operator">=</span> props<span class="token punctuation">.</span>searchFormConfig<span class="token operator">?.</span>formItems <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token literal-property property">formOriginData</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> formItems<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      formOriginData<span class="token punctuation">[</span>item<span class="token punctuation">.</span>field<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>formOriginData<span class="token punctuation">)</span>

    <span class="token comment">// 2.优化二: 当用户点击重置</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResetClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">.</span>value <span class="token operator">=</span> formOriginData
     
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">,</span>
      handleResetClick<span class="token punctuation">,</span>
      handleQueryClick
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>子组件使用modelValue</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hy-form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">:label-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>labelWidth<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span>
			  <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.placeholder<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.otherOptions<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">:show-password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.type === 'password'<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name">:model-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modelValue[`${item.field}`]<span class="token punctuation">&quot;</span></span>
			  <span class="token attr-name"><span class="token namespace">@update:</span>modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleValueChange($event, item.field)<span class="token punctuation">&quot;</span></span>
			<span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> PropType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleValueChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">field</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>props<span class="token punctuation">.</span>modelValue<span class="token punctuation">,</span> <span class="token punctuation">[</span>field<span class="token punctuation">]</span><span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      handleValueChange
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/14/2022, 7:43:01 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mk/009elementuifz.html" class="prev">
        封装elementplus
      </a></span> <span class="next"><a href="/mk/011threejs.html">
        threejs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e1a3f4d1.js" defer></script><script src="/assets/js/2.55fc4dce.js" defer></script><script src="/assets/js/1.f626806d.js" defer></script><script src="/assets/js/282.cdbeb28e.js" defer></script><script src="/assets/js/25.769a5c57.js" defer></script><script src="/assets/js/24.8cb6bc89.js" defer></script>
  </body>
</html>
